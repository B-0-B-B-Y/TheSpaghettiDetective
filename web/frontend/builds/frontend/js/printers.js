(function(e){function t(t){for(var i,o,s=t[0],c=t[1],l=t[2],u=0,p=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={printers:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/static/frontend/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;a.push([6,"chunk-vendors"]),n()})({"020c":function(e,t,n){"use strict";var i=n("c2fe"),r=n.n(i);r.a},"0453":function(e,t,n){e.exports=n.p+"img/tick.svg"},"0548":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("a026"),r=n("f357"),a=n("5f5b"),o=n("785f"),s=n("648b"),c=n("8ffe"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("pull-to-reveal",{attrs:{shiftContent:!0,showEdge:!0,enable:e.printers.length>0},on:{hide:e.closeMenus}},[n("navbar",{ref:"navbar",attrs:{"view-name":"printers"}}),e.printers.length>1?n("div",{staticClass:"container"},[n("div",{staticClass:"option-drawer"},[n("div",{staticClass:"panel-group",attrs:{id:"accordion",role:"tablist","aria-multiselectable":"true"}},[n("div",{staticClass:"panel panel-default"},[n("div",{staticClass:"panel-collapse in",attrs:{id:"collapse-one",role:"tabpanel","aria-labelledby":"headingOne"}},[n("div",{staticClass:"panel-body p-3"},[n("div",[n("div",{ref:"filters",staticClass:"sorting-and-filter"},[n("Select",{staticClass:"my-1 mx-2",attrs:{id:"printer-sorting",options:e.sortFilters},on:{input:function(t){return e.onSortFilterChanged()}},model:{value:e.filters.sort,callback:function(t){e.$set(e.filters,"sort",t)},expression:"filters.sort"}}),n("Select",{staticClass:"my-1 mx-2",attrs:{id:"printer-filtering",options:e.stateFilters},on:{input:function(t){return e.onStateFilterChanged()}},model:{value:e.filters.state,callback:function(t){e.$set(e.filters,"state",t)},expression:"filters.state"}})],1)]),n("hr"),n("div",e._l(e.visiblePrinters,(function(t){return n("a",{key:t.id,staticClass:"btn btn-outline-primary btn-sm my-1 mx-3 printer-link",attrs:{href:"#"+t.id,role:"button"}},[n("i",{staticClass:"fas fa-map-pin"}),e._v(" "+e._s(t.name)+" ")])})),0)])])])])])]):e._e()],1),!e.user.is_pro&&e.printers.length>0?n("div",{staticClass:"row justify-content-center"},[e._m(0)]):e._e(),n("div",{staticClass:"row justify-content-center pt-2",attrs:{id:"printers"}},[e.loading?n("b-spinner",{staticClass:"mt-5",attrs:{label:"Loading..."}}):e._e(),e._l(e.visiblePrinters,(function(t){return n("printer-card",{key:t.id,attrs:{printer:t,"is-pro-account":e.user.is_pro},on:{PrinterUpdated:e.onPrinterUpdated}})}))],2),e._m(1),e.hiddenPrinterCount>0?n("div",{staticClass:"text-warning border-warning text-center border my-3 py-2",attrs:{id:"printers-hidden-warning"}},[n("span",{attrs:{id:"printers-hidden"}},[e._v(e._s(e.hiddenPrinterCount))]),e._v(" printers are hidden by the filtering settings. "),n("a",{attrs:{href:"#",id:"show-all-printers-btn"},on:{click:function(t){return e.onShowAllPrintersClicked()}}},[e._v("Show all printers >>>")])]):e._e()],1)},d=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-sm-12 col-lg-6"},[n("div",{staticClass:"form-container",staticStyle:{margin:"1em 0 -1em 0",padding:"0.5em 1em"}},[n("p",{staticStyle:{margin:"0"}},[e._v("Please consider "),n("a",{attrs:{href:"/ent/pricing?utm_source=tsd&utm_medium=printers-page"}},[e._v("upgrading")]),e._v(" to support our development efforts! "),n("a",{attrs:{href:"https://help.thespaghettidetective.com/kb/guide/en/pro-plan-vs-free-plan-My6yGUkT4T/Steps/294250",target:"_new"}},[e._v("Why?")])])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-12 col-lg-6",attrs:{id:"new-printer"}},[n("div",{staticClass:"new-printer-container"},[n("a",{attrs:{href:"/printers/wizard/"}},[n("i",{staticClass:"fa fa-plus fa-2x"}),n("div",[e._v("Link OctoPrint Printer")])])])])])}],u=(n("4de4"),n("7db0"),n("c740"),n("4160"),n("b0c0"),n("4fad"),n("159b"),n("fc11")),p=n("bc3a"),f=n.n(p),v=n("c707"),m=n.n(v),g=n("5128"),h=n.n(g),b=n("3c33"),w=n("502a"),y=n("1807"),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-sm-12 col-lg-6 printer-card",attrs:{id:e.printer.id}},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[n("div",{staticClass:"title-box"},[e.hasCurrentPrintFilename?n("div",{staticClass:"primary-title print-filename"},[e._v(e._s(e.printer.current_print.filename))]):e._e(),n("div",{staticClass:"printer-name",class:{"secondary-title":e.hasCurrentPrintFilename}},[e._v(e._s(e.printer.name)+" ("),n("a",{class:e.statusClass,attrs:{href:"#printer-actions-"+e.printer.id}},[e._v(e._s(e.statusText))]),e._v(") ")])]),n("div",{staticClass:"dropdown"},[n("button",{staticClass:"btn icon-btn",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-label":e.printer.name+" Controls"}},[n("i",{staticClass:"fas fa-ellipsis-v"})]),n("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuButton"}},[n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onSharePrinter()}}},[n("i",{staticClass:"fas fa-share-alt fa-lg"}),e._v("Share ")]),n("a",{staticClass:"dropdown-item",attrs:{href:e.octoPrintTunnelUrl()}},[n("svg",{staticClass:"menu-icon tunneling",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 346.26 368.59"}},[n("path",{staticClass:"tone-1",attrs:{d:"M336,358.66V172.06A162.88,162.88,0,0,0,173.13,9.18h0A162.88,162.88,0,0,0,10.24,172.06v186.6l64-58V175.09a98.91,98.91,0,0,1,98.91-98.91h0A98.91,98.91,0,0,1,272,175.09V300.64l64,58"}}),n("path",{staticClass:"tone-2",attrs:{d:"M253.53,221.06c0-.08-.06-.21-.13-.4-1.17-3.88-9.32-30.61-30.45-41.54-22-11.36-51.1-15.86-78.91,13.55C108.19,230.59,148.71,272,152,297.38H107C85.92,257.57,88.1,221.43,98.52,196.8,111,167.41,153,137.72,196.58,148.63,271.54,167.39,253.53,221.06,253.53,221.06Z"}}),n("path",{staticClass:"tone-2",attrs:{d:"M253.53,221.06c-.46-1.17-1.08-2.77-1.66-3.91a25.4,25.4,0,0,0-1.14-2.49s-.31-.82-.32-.83c-2.82-4.71-4.77-8.71-9.23-12.47a62.73,62.73,0,0,0-12.36-8.16c-.55-.28-1.1-.56-1.65-.8-16.18-7.65-36.17-9.07-53.28.27-20.4,11.15-18.53,28-11.84,41.57l0,.08a69.13,69.13,0,0,0,6.52,10.5s0,0,0,0a75.74,75.74,0,0,0,5.27,6.38c7.22,7.78,13.84,21.48,18.38,32.29,2.56,6.11,4.46,11.31,5.39,14H153.39a.22.22,0,0,0,0-.11c-1.27-24.48-43.55-65.71-7.88-103.44,27-28.52,55.22-24.16,76.54-13.15,20.44,10.58,30,36,31.37,39.87C253.47,220.85,253.5,221,253.53,221.06Z"}})]),e._v(" Tunneling ")]),n("div",{staticClass:"dropdown-divider"}),n("a",{staticClass:"dropdown-item",attrs:{href:e.settingsUrl()}},[n("i",{staticClass:"fas fa-wrench fa-lg"}),e._v("Configure ")])])])]),n("streaming-box",{attrs:{printer:e.printer,webrtc:e.webrtc}}),e.printer.alertUnacknowledged()?n("div",{staticClass:"failure-alert card-body bg-warning px-2 py-1"},[n("i",{staticClass:"fas fa-exclamation-triangle align-middle"}),n("span",{staticClass:"align-middle"},[e._v("Failure Detected!")]),n("button",{staticClass:"btn btn-outline-primary btn-sm float-right",attrs:{type:"button",id:"not-a-failure"},on:{click:function(t){return e.onNotAFailureClicked(t,!1)}}},[e._v("Not a failure?")])]):e._e(),n("div",{staticClass:"card-body gauge-container",class:{overlay:!e.isWatching}},[e.isWatching?e._e():n("div",{staticClass:"overlay-top text-center",staticStyle:{left:"0",width:"100%",top:"50%","margin-top":"-55px"}},[n("H1",[n("i",{staticClass:"far fa-eye-slash"})]),n("h5",{staticClass:"text-warning"},[e._v("The Detective Is Not Watching")]),e.printer.not_watching_reason?n("small",[e._v(e._s(e.printer.not_watching_reason)+". "),e._m(0)]):e._e(),n("div")],1),n("Gauge",{attrs:{normalizedP:e.printer.normalized_p,isWatching:e.isWatching}}),n("hr")],1),n("PrinterActions",e._b({staticClass:"container",attrs:{id:"printer-actions-"+e.printer.id},on:{PrinterActionPauseClicked:e.onPrinterActionPauseClicked,PrinterActionResumeClicked:function(t){return e.onPrinterActionResumeClicked(t)},PrinterActionCancelClicked:e.onPrinterActionCancelClicked,PrinterActionConnectClicked:e.onPrinterActionConnectClicked,PrinterActionStartClicked:e.onPrinterActionStartClicked,PrinterActionControlClicked:e.onPrinterActionControlClicked}},"PrinterActions",e.actionsProps,!1)),n("div",{staticClass:"info-section settings"},[n("button",{staticClass:"info-section-toggle btn btn-sm no-corner mx-2",class:{pressed:e.section_toggles.settings},attrs:{type:"button"},on:{click:function(t){return e.onSettingsToggleClicked()}}},[n("i",{staticClass:"fas fa-cog fa-lg"})]),n("button",{staticClass:"info-section-toggle btn btn-sm no-corner mx-2",class:{pressed:e.section_toggles.time},attrs:{type:"button"},on:{click:function(t){return e.onTimeToggleClicked()}}},[n("i",{staticClass:"fas fa-clock fa-lg"})]),n("button",{staticClass:"info-section-toggle btn btn-sm no-corner mx-2",class:{pressed:e.section_toggles.statusTemp},attrs:{type:"button"},on:{click:function(t){return e.onStatusTempToggleClicked()}}},[n("i",{staticClass:"fas fa-thermometer-half fa-lg"})])]),n("div",{staticClass:"info-section",staticStyle:{height:"0.3rem"}}),n("div",[n("div",{staticClass:"info-section container"},[e.section_toggles.settings?n("div",{attrs:{id:"panel-settings"}},[n("div",{staticClass:"pt-2 pb-3"},[n("div",{staticClass:"row justify-content-center px-3"},[n("div",{staticClass:"col-12 setting-item"},[n("label",{staticClass:"toggle-label",attrs:{for:"watching_enabled-toggle-"+e.printer.id}},[e._v("Watch for failures "),e.watchForFailures?e._e():n("div",{staticClass:"text-muted font-weight-light font-size-sm"},[e._v("Subsequent prints NOT watched until turned on. ")])]),n("div",{staticClass:"custom-control custom-switch"},[n("input",{staticClass:"custom-control-input update-printer",attrs:{type:"checkbox",name:"watching_enabled",id:"watching_enabled-toggle-"+e.printer.id},domProps:{checked:e.watchForFailures},on:{click:e.onWatchForFailuresToggled}}),n("label",{staticClass:"custom-control-label",staticStyle:{"font-size":"1rem"},attrs:{for:"watching_enabled-toggle-"+e.printer.id}})])])]),n("div",{staticClass:"row justify-content-center px-3"},[n("div",{staticClass:"col-12 setting-item"},[n("label",{staticClass:"toggle-label",attrs:{for:"pause-toggle-"+e.printer.id}},[e._v("Pause on detected failures "),e.pauseOnFailure?e._e():n("div",{staticClass:"text-muted font-weight-light font-size-sm"},[e._v("You will still be alerted via notifications ")])]),n("div",{staticClass:"custom-control custom-switch"},[n("input",{staticClass:"custom-control-input update-printer",attrs:{type:"checkbox",name:"pause_on_failure",id:"pause-toggle-"+e.printer.id},domProps:{checked:e.pauseOnFailure},on:{click:e.onPauseOnFailureToggled}}),n("label",{staticClass:"custom-control-label",staticStyle:{"font-size":"1rem"},attrs:{for:"pause-toggle-"+e.printer.id}})])])])])]):e._e(),e.section_toggles.time?n("div",{attrs:{id:"print-time"}},[n("div",{staticClass:"py-2"},[e._m(1),n("div",{staticClass:"row"},[e._m(2),n("duration-block",e._b({staticClass:"col-5 numbers",attrs:{id:"print-time-remaining"}},"duration-block",e.timeRemaining,!1)),n("duration-block",e._b({staticClass:"col-5 numbers",attrs:{id:"print-time-total"}},"duration-block",e.timeTotal,!1)),n("div",{staticClass:"col-12"},[n("div",{staticClass:"progress",staticStyle:{height:"2px"}},[n("div",{staticClass:"progress-bar",class:{"progress-bar-striped":e.progressPct<100,"progress-bar-animated":e.progressPct<100},style:"width: "+e.progressPct+"%;",attrs:{id:"print-progress",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}})])])],1)])]):e._e(),e.section_toggles.statusTemp&&e.tempProps.show?n("StatusTemp",e._b({attrs:{id:"status_temp_block"},on:{TempEditClicked:e.onTempEditClicked}},"StatusTemp",e.tempProps,!1)):e._e()],1)])],1)])},_=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://help.thespaghettidetective.com/kb/guide/en/why-is-the-detective-not-watching-jUGzXPoRIH/",target:"_blank"}},[e._v("Learn more. "),n("small",[n("i",{staticClass:"fas fa-external-link-alt"})])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row text-muted"},[n("small",{staticClass:"col-5 offset-2"},[e._v(" Remaining ")]),n("small",{staticClass:"col-5"},[e._v(" Total ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-2 text-muted"},[n("i",{staticClass:"fas fa-clock"})])}],k=(n("99af"),n("d81d"),n("b6802"),n("d0ff")),S=n("9b02"),x=n.n(S),A=n("e9a7"),T=n.n(A),O=n("c1df"),D=n.n(O),P=n("9380"),j=n.n(P),E=(n("c19f"),n("4ec9"),n("d3b7"),n("ac1f"),n("25f0"),n("3ca3"),n("5319"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("dce5")),I=n.n(E),R=n("aaa7"),F=n.n(R),L=n("acff");function M(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a={};return a.printerId=e,a.wsUri=t,a.onPrinterUpdateReceived=n,a.onStatusReceived=r,a.ws=null,a.webrtc=null,a.passthruQueue=new Map,F.a.on("blur",(function(){a.closeWebSocket()})),F.a.on("focus",(function(){a.connect()})),a.onPassThruReceived=function(e){var t=e.ref;if(t&&a.passthruQueue.get(t)){var n=a.passthruQueue.get(t);a.passthruQueue.delete(t),n(null,e.ret)}},a.connect=function(){a.ws=new WebSocket(window.location.protocol.replace("http","ws")+"//"+window.location.host+a.wsUri),a.ws.onmessage=function(e){var t={};try{t=JSON.parse(e.data)}catch(i){throw console.log(e.data),i}"passthru"in t?a.onPassThruReceived(t.passthru):n(t)},a.ensureWebsocketClosed(),setTimeout((function(){a.heartbeat()}),3e4)},a.setWebRTC=function(e){function t(e){var t={};try{t=JSON.parse(e)}catch(n){return}t&&"ref"in t&&"ret"in t?a.onPassThruReceived(t):a.onStatusReceived&&a.onStatusReceived(t)}a.webrtc=e,a.webrtc.callbacks.onData=function(e){if(e)if(e instanceof ArrayBuffer)try{var n=L["a"].ungzip(new Uint8Array(e),{to:"string"});t(n)}catch(r){console.error("could not decompress datachannel arraybuffer")}else if(e instanceof Blob){var i=new FileReader;i.addEventListener("loadend",(function(e){var n=e.srcElement.result;try{var i=L["a"].ungzip(new Uint8Array(n),{to:"string"});t(i)}catch(r){console.error("could not decompress datachannel blob")}})),i.readAsArrayBuffer(e)}else t(e)}},a.passThruToPrinter=function(e,t){if(a.canSend()){var n=Math.random().toString();I()(e,{ref:n}),t&&(a.passthruQueue.set(n,t),setTimeout((function(){a.passthruQueue.has(n)&&i["default"].swal.Toast.fire({type:"error",title:"Failed to contact OctoPrint, or the TSD plugin version is older than 1.2.0."})}),1e4)),a.webrtc&&a.webrtc.sendData(JSON.stringify(e)),a.ws.send(JSON.stringify({passthru:e}))}else t&&t("Message not passed through. No suitable WebSocket.")},a.ensureWebsocketClosed=function(){a.ws.onclose=function(e){a.ws===e.target&&(a.ws=null)},a.ws.onerror=function(){a.ws&&a.ws.close()}},a.closeWebSocket=function(){a.ws&&a.ws.close()},a.heartbeat=function(){a.canSend()&&(a.ws.send(JSON.stringify({})),setTimeout((function(){a.heartbeat()}),3e4))},a.canSend=function(){return a.ws&&1===a.ws.readyState},a}var B=n("c297"),V=function(e){return"/ws/janus/".concat(e,"/")},N=function(e){return"/ws/share_token/janus/".concat(e,"/")};function z(e){var t={callbacks:{},initialized:!1,streamId:void 0,streaming:void 0,videoEnabled:null!==e&&void 0!==e&&e,openForShareToken:function(e){t.connect(N(e),e)},openForPrinter:function(e,n){t.connect(V(e),n)},connect:function(e,n){B["a"].init({debug:"all",callback:function(){t.initialized=!0,B["a"].isWebrtcSupported()&&t.connectJanusWebSocket(e,n)}}),F.a.on("blur",(function(){t.stopStream()})),F.a.on("focus",(function(){t.startStream()}))},connectJanusWebSocket:function(e,n){var i="streamingtest-"+B["a"].randomString(12),r=[{urls:["stun:stun.l.google.com:19302"]}];if(n){var a=window.location.hostname.replace("app","turn");r.push({urls:"turn:"+a+":80?transport=udp",credential:n,username:n}),r.push({urls:"turn:"+a+":80?transport=tcp",credential:n,username:n})}var o=new B["a"]({server:window.location.protocol.replace("http","ws")+"//"+window.location.host+e,iceServers:r,success:function(){o.attach({plugin:"janus.plugin.streaming",opaqueId:i,success:function(e){B["a"].log("Plugin attached! ("+e.getPlugin()+", id="+e.getId()+")");var n={request:"list"};B["a"].debug("Sending message ("+JSON.stringify(n)+")"),e.send({message:n,success:function(n){var i=x()(n,"list[0]");i&&(t.streamId=i.id,t.streaming=e,t.startStream())}}),setInterval((function(){console.log(e.getBitrate())}),5e3)},error:function(e){B["a"].error("  -- Error attaching plugin... ",e),o.destroy()},onmessage:function(e,n){t.onMessage(e,n)},onremotestream:function(e){B["a"].debug(" ::: Got a remote stream :::"),B["a"].debug(e),"onRemoteStream"in t.callbacks&&t.callbacks.onRemoteStream(e)},ontrackmuted:function(){"onTrackMuted"in t.callbacks&&t.callbacks.onTrackMuted()},ontrackunmuted:function(){"onTrackUnmuted"in t.callbacks&&t.callbacks.onTrackUnmuted()},slowLink:function(e,n){"onSlowLink"in t.callbacks&&t.callbacks.onSlowLink(n)},ondataopen:function(){},ondata:function(e){"onData"in t.callbacks&&t.callbacks.onData(e)},oncleanup:function(){"onCleanup"in t.callbacks&&t.callbacks.onCleanup()}})},error:function(e){B["a"].error("  -- Error -- ",e),o.destroy()},destroyed:function(){t.streaming=void 0,t.streamId=void 0}})},onMessage:function(e,t){var n=this;B["a"].debug(" ::: Got a message :::"),B["a"].debug(e);var i=e["result"];if(null!==i&&void 0!==i){if(void 0!==i["status"]&&null!==i["status"]){var r=i["status"];"starting"===r?console.log("Starting"):"started"===r?console.log("Started"):"stopped"===r&&n.stopStream()}}else if(void 0!==e["error"]&&null!==e["error"])return B["a"].error(e),void n.stopStream();void 0!==t&&null!==t&&(B["a"].debug("Handling SDP as well..."),B["a"].debug(t),n.streaming.createAnswer({jsep:t,media:{audioSend:!1,videoSend:!1,data:!0},success:function(e){B["a"].debug("Got SDP!"),B["a"].debug(e);var t={request:"start"};n.streaming.send({message:t,jsep:e})},error:function(e){B["a"].error("WebRTC error:",e)}}))},channelOpen:function(){return!(void 0===t.streamId||void 0===t.streaming)},startStream:function(){if(t.channelOpen()){var e={request:"watch",offer_video:t.videoEnabled,id:parseInt(t.streamId)};t.streaming.send({message:e})}},stopStream:function(){if(t.channelOpen()){var e={request:"stop"};t.streaming.send({message:e}),t.streaming.hangup()}},sendData:function(e){t.channelOpen()&&t.streaming.data({text:e,success:function(){}})}};return t}var W,$=n("6868"),U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-img-top webcam_container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.slowLinkLoss>50,expression:"slowLinkLoss > 50"}],ref:"slowLinkWrapper",staticClass:"slow-link-wrapper",on:{click:e.slowLinkClicked,mouseenter:function(t){e.fixSlowLinkTextWidth(),e.slowLinkShowing=!0,e.slowLinkHiding=!1},mouseleave:function(t){e.fixSlowLinkTextWidth(),e.slowLinkShowing=!1,e.slowLinkHiding=!0}}},[e._m(0),n("div",{ref:"slowLinkText",staticClass:"text text-warning",class:{"show-and-hide":!e.slowLinkShowing&&!e.slowLinkHiding,showing:e.slowLinkShowing&&!e.slowLinkHiding,hiding:!e.slowLinkShowing&&e.slowLinkHiding}},[e._v("Video frames dropped")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.trackMuted,expression:"trackMuted"}],staticClass:"muted-status-wrapper"},[n("div",{staticClass:"text"},[e._v("Buffering...")]),n("a",{attrs:{href:"#"},on:{click:function(t){return e.showMutedStatusDescription(t)}}},[e._v("Why is it stuck?")])]),e.trackMuted||e.videoLoading?n("b-spinner",{staticClass:"loading-icon",attrs:{label:"Buffering..."}}):e._e(),e.isVideoVisible&&e.taggedImgAvailable?n("div",{staticClass:"streaming-switch"},[n("button",{staticClass:"btn btn-sm no-corner",class:{active:e.showVideo},attrs:{type:"button"},on:{click:function(t){return e.forceStreamingSrc("VIDEO")}}},[n("i",{staticClass:"fas fa-video"})]),n("button",{staticClass:"btn btn-sm no-corner ",class:{active:!e.showVideo},attrs:{type:"button"},on:{click:function(t){return e.forceStreamingSrc("IMAGE")}}},[n("i",{staticClass:"fas fa-camera"})])]):e._e(),n("div",{class:e.webcamRotateClass},[n("div",{staticClass:"webcam_fixed_ratio",class:e.webcamRatioClass},[n("div",{staticClass:"webcam_fixed_ratio_inner full"},[n("img",{staticClass:"tagged-jpg",class:{flipH:e.printer.settings.webcam_flipH,flipV:e.printer.settings.webcam_flipV},attrs:{src:e.taggedSrc,alt:e.printer.name+" current image"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showVideo,expression:"showVideo"}],staticClass:"webcam_fixed_ratio_inner ontop full"},[n("video",{ref:"video",staticClass:"remote-video",class:{hide:!e.isVideoVisible,flipH:e.printer.settings.webcam_flipH,flipV:e.printer.settings.webcam_flipV},attrs:{width:"960",height:e.webcamVideoHeight,poster:e.taggedSrc,autoplay:"",muted:"",playsinline:""},domProps:{muted:!0},on:{loadstart:function(t){return e.onLoadStart()},canplay:function(t){return e.onCanPlay()}}})])])])],1)},q=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon bg-warning"},[n("i",{staticClass:"fas fa-exclamation"})])}],G=n("f3f3"),H=n("6508"),J=n.n(H),Z={name:"StreamingBox",created:function(){var e=this;this.webrtc&&(this.webrtc.callbacks=Object(G["a"])(Object(G["a"])({},this.webrtc.callbacks),{},{onRemoteStream:this.onWebRTCRemoteStream,onCleanup:this.onWebRTCCleanup,onSlowLink:this.onSlowLink,onTrackMuted:function(){return e.trackMuted=!0},onTrackUnmuted:function(){return e.trackMuted=!1}}))},props:{printer:{type:Object,required:!0},webrtc:{type:Object,required:!1}},data:function(){return{stickyStreamingSrc:null,isVideoVisible:!1,slowLinkLoss:0,slowLinkShowing:!1,slowLinkHiding:!1,trackMuted:!1,videoLoading:!1}},computed:{taggedImgAvailable:function(){return this.taggedSrc!==J.a},showVideo:function(){return this.isVideoVisible&&"IMAGE"!==this.stickyStreamingSrc},webcamRotateClass:function(){switch(this.printer.settings.webcam_rotate90){case!0:return"webcam_rotated";case!1:return"webcam_unrotated";default:return"webcam_unrotated"}},webcamRatioClass:function(){switch(this.printer.settings.ratio169){case!0:return"ratio169";case!1:return"ratio43";default:return"ratio43"}},webcamVideoHeight:function(){switch(this.printer.settings.ratio169){case!0:return 540;case!1:return 720;default:return 720}},taggedSrc:function(){return x()(this.printer,"pic.img_url",J.a)}},methods:{forceStreamingSrc:function(e){this.stickyStreamingSrc=e},onCanPlay:function(){this.videoLoading=!1},onLoadStart:function(){this.videoLoading=!0},onWebRTCRemoteStream:function(e){B["a"].attachMediaStream(this.$refs.video,e);var t=e.getVideoTracks();null===t||void 0===t||0===t.length?this.isVideoVisible=!1:this.isVideoVisible=!0},onWebRTCCleanup:function(){this.isVideoVisible=!1},fixSlowLinkTextWidth:function(){var e=window.getComputedStyle(this.$refs.slowLinkText).width;this.$refs.slowLinkText.style.width=e},onSlowLink:function(e){this.slowLinkLoss+=e},slowLinkClicked:function(){this.slowLinkShowing=!1,this.slowLinkHiding=!1,this.slowLinkLoss=0,this.$swal({title:"Video frames dropped",html:"\n          <p>The video frames are getting dropped because there is a bandwidth bottleneck along the route it they take to travel from your Raspberry Pi to your computer. The bottleneck can be anywhere but in most cases <Text bold>it's either your computer's internet connection, or your Raspberry Pi's</Text>.</p>\n          <p>Make sure your computer is connected to the same network as your Pi. If you still see this warning, you need to trouble-shoot your computer's Wi-Fi connection, probably by moving closer to the Wi-Fi router.</p>\n          <p>If the webcam stream is smooth when your computer is on the same Wi-Fi network as your Pi, the bottleneck is likely with the upload speed of your internet connection. You need to run a speed test to make sure you have high-enough upload speed, as well as <b>low latency (ping)</b>.</p>\n          <p>Check out <a target=\"_blank\" href=\"https://help.thespaghettidetective.com/kb/guide/en/choppy-jerky-premium-streaming-troubleshooting-guide-vlaEmejqSi\">the step-by-step trouble-shooting guide.</a></p>\n        ",showCloseButton:!0})},showMutedStatusDescription:function(e){e.preventDefault(),this.$swal({title:"Webcam stream buffering",html:'\n          <p>When you see the messaging about webcam stream is "buffering" occasionally, you can just reload the page. If this message repeatedly appears, it may indicate one of the problems:</p>\n          <p class="lead">1. A constricted video stream on <strong>your Raspberry Pi. The most common reasons are:</p>\n          <ul>\n            <li>Camera resolution is set too high.</li>\n            <li>Camera framerate is set too high. This is only when you set <a target="_blank" href="https://help.thespaghettidetective.com/kb/guide/en/compatibility-mode-streaming-GaERh2rUjr">the compatibility mode</a> to "always".</li>\n            <li>The upload speed of your Raspberry Pi is too low.</li>\n          </ul>\n          <p class="lead">2. The internet connection of your computer or phone is not fast enough.</p>\n          <p class="lead">3. Your webcam is not properly connected to your Raspberry Pi.</p>\n          <br>\n          <p>You should leave the compatibility mode to "auto", unless you have <a target="_blank" href="https://help.thespaghettidetective.com/kb/guide/en/premium-streaming-in-the-compatibility-mode-GaERh2rUjr/Steps/300081,434913">a good reason to it to "always".</a></p>\n          <p>As a rule of thumb, for every 300k-pixel resolution (640x480), you need to have 1.5Mbps upload bandwidth to stream smoothly at 25fps. This means if you set the webcam resolution to 1024x768 (~800k pixels), you need to have 4.5Mbps upload bandwidth. Also remember that the upload bandwidth of your Raspberry Pi may not be the same as your computer, even if they are connected to the same Wi-Fi network. This is because Raspberry Pi\'s Wi-Fi chip is weaker than the most computers\'.</p>\n        ',showCloseButton:!0})}}},Q=Z,Y=(n("45b6"),n("2877")),X=Object(Y["a"])(Q,U,q,!1,null,"bbc8f5b6",null),K=X.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.valid||e.printing?e._e():n("span",[e._v("-")]),!e.valid&&e.printing?n("b-spinner",{attrs:{small:"",type:"grow",label:"Calculating..."}}):e._e(),e.valid&&e.showHours?n("span",[e._v(" "+e._s(e.hours)),n("span",{staticClass:"text-subscript text-muted"},[e._v("h")])]):e._e(),e.valid&&e.showMinutes?n("span",[e._v(" "+e._s(e.minutes)),n("span",{staticClass:"text-subscript text-muted"},[e._v("m")])]):e._e(),e.valid&&e.showSeconds?n("span",[e._v(" "+e._s(e.seconds)),n("span",{staticClass:"text-subscript text-muted"},[e._v("s")])]):e._e()],1)},te=[],ne=(n("a9e3"),{name:"DurationBlock",props:{valid:{type:Boolean,required:!0},printing:{type:Boolean,required:!0},hours:{type:Number,default:function(){return 0}},showHours:{type:Boolean,default:function(){return!1}},minutes:{type:Number,default:function(){return 0}},showMinutes:{type:Boolean,default:function(){return!1}},seconds:{type:Number,default:function(){return 0}},showSeconds:{type:Boolean,default:function(){return!1}}}}),ie=ne,re=Object(Y["a"])(ie,ee,te,!1,null,null,null),ae=re.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[!e.printer.isOffline()&&e.printer.hasError()?n("div",{staticClass:"row my-2"},[n("div",{staticClass:"col-12 bg-danger text-center"},[n("div",[e._v("OctoPrint Error")]),n("div",[e._v(e._s(e.printer.status.state.text))])])]):e._e(),e.printer.inTransientState()?n("div",{staticClass:"row my-2"},[n("div",{staticClass:"col-12 text-center my-3"},[n("b-spinner",{attrs:{label:"Processing..."}}),n("div",[e._v(e._s(e.printer.status.state.text)+" ...")])],1)]):n("div",{staticClass:"row my-2"},[e.printer.isOffline()||e.printer.isDisconnected()||e.printer.isIdle()?e._e():n("div",{staticClass:"col-sm-6"},[e.printer.isPaused()?n("button",{staticClass:"btn btn-block mt-2 btn-outline-success",attrs:{type:"button"},on:{click:function(t){return e.onPauseToggled(t)}}},[n("i",{staticClass:"fas fa-play"}),e._v(" Resume ")]):n("button",{staticClass:"btn btn-block mt-2 btn-outline-warning",attrs:{type:"button"},on:{click:function(t){return e.onPauseToggled(t)}}},[n("i",{staticClass:"fas fa-pause"}),e._v(" Pause ")])]),e.printer.isOffline()||e.printer.isDisconnected()||e.printer.isIdle()?e._e():n("div",{staticClass:"col-sm-6"},[n("button",{staticClass:"btn btn-outline-danger btn-block mt-2 mb-2",attrs:{id:"print-cancel",type:"button"},on:{click:function(t){return e.$emit("PrinterActionCancelClicked",t)}}},[n("i",{staticClass:"fas fa-stop"}),e._v(" Cancel ")])]),e.printer.isOffline()||e.printer.isDisconnected()||!e.printer.isIdle()?e._e():n("div",{staticClass:"col-sm-6"},[n("button",{staticClass:"btn btn-outline-primary btn-block mt-2",attrs:{id:"start-print",type:"button"},on:{click:function(t){return e.$emit("PrinterActionStartClicked",t)}}},[n("i",{staticClass:"fas fa-star"}),e._v(" Start Printing ")])]),e.printer.isOffline()||e.printer.isDisconnected()||!e.printer.isIdle()?e._e():n("div",{staticClass:"col-sm-6"},[n("button",{staticClass:"btn btn-outline-secondary btn-block mt-2 mb-2",attrs:{type:"button"},on:{click:function(t){return e.$emit("PrinterActionControlClicked",t)}}},[n("i",{staticClass:"fas fa-arrows-alt"}),e._v(" Control ")])])]),!e.printer.isOffline()&&e.printer.isDisconnected()?n("div",{staticClass:"row my-2"},[n("div",{staticClass:"col-12 text-center py-2 text-warning"},[n("div",[e._v("Printer is not connected to OctoPrint.")]),n("button",{staticClass:"btn btn-outline-primary btn-block mt-2",attrs:{id:"connect-printer",type:"button",disabled:e.connecting},on:{click:this.onConnectClicked}},[e.connecting?n("b-spinner",{attrs:{small:""}}):n("i",{staticClass:"fab fa-usb"}),e._v(" "+e._s(e.connecting?"Contacting OctoPrint":"Connect")+" ")],1)])]):e._e(),e.printer.isOffline()?n("div",{staticClass:"row my-2"},[e._m(0)]):e._e()])},se=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-12 text-center py-3 text-warning"},[n("div",[e._v(" OctoPrint is not powered on, or is offline. "),n("a",{attrs:{target:"_blank",href:"https://help.thespaghettidetective.com/kb/guide/en/octoprint-is-offline-z7RqhgmnPY/"}},[e._v("Why? "),n("small",[n("i",{staticClass:"fas fa-external-link-alt"})])])])])}],ce={name:"PrinterActions",props:{printer:{}},data:function(){return{connectBtnClicked:!1}},computed:{connecting:function(){return this.connectBtnClicked&&this.printer.isDisconnected()}},methods:{onPauseToggled:function(e){this.printer.isPaused()?this.$emit("PrinterActionResumeClicked",e):this.$emit("PrinterActionPauseClicked",e)},onConnectClicked:function(e){var t=this;this.$emit("PrinterActionConnectClicked",e),this.connectBtnClicked=!0,setTimeout((function(){t.connectBtnClicked=!1}),1e4)}}},le=ce,de=Object(Y["a"])(le,oe,se,!1,null,null,null),ue=de.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"py-2"},[e._m(0),e._l(e.temperatures,(function(t){return n("div",{key:t.id,staticClass:"row"},[n("div",{staticClass:"col-2 numbers"},[n("span",{staticClass:"text-subscript text-muted"},[e._v(e._s(t.toolName))])]),n("div",{staticClass:"col-5 numbers"},[e._v(" "+e._s(t.actual)),n("span",{staticClass:"text-subscript text-muted"},[e._v("°C")])]),n("div",{staticClass:"col-5 numbers",attrs:{id:t.id},on:{click:function(n){return e.onEditClicked(t)}}},[e._v(e._s(t.target)),n("span",{staticClass:"text-subscript text-muted"},[e._v("°C")]),e.editable?n("span",[e._v(" "),n("i",{staticClass:"fas fa-pencil-alt",staticStyle:{"font-size":"0.6em"}})]):e._e()])])}))],2)},fe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row text-muted"},[n("div",{staticClass:"col-2"},[n("i",{staticClass:"fas fa-thermometer-half fa-lg"})]),n("small",{staticClass:"col-5"},[e._v(" Actual ")]),n("small",{staticClass:"col-5"},[e._v(" Target ")])])}],ve={name:"StatusTemp",props:{temperatures:{type:Array,required:!0},editable:{type:Boolean,required:!0}},methods:{onEditClicked:function(e){this.editable&&this.$emit("TempEditClicked",e)}}},me=ve,ge=Object(Y["a"])(me,pe,fe,!1,null,null,null),he=ge.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"control-panel"},[n("search-input",{staticClass:"search-input",model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),e._m(0)],1),n("br"),e.gcodeFiles.length?n("div",e._l(e.visibleGcodeFiles,(function(t){return n("div",{key:t.id,staticClass:"card"},[n("div",{staticClass:"card-body",staticStyle:{display:"flex","justify-content":"space-between"}},[n("div",{staticStyle:{width:"100%"}},[n("strong",{staticClass:"gcode-filename"},[e._v(" "+e._s(t.filename)+" ")]),n("small",{staticClass:"gcode-info mt-1",staticStyle:{display:"flex","flex-wrap":"wrap"}},[n("div",{staticClass:"pr-3"},[n("span",{staticClass:"text-muted"},[e._v("Size: ")]),e._v(" "+e._s(t.filesize))]),n("div",[n("span",{staticClass:"text-muted"},[e._v("Uploaded: ")]),e._v(" "+e._s(t.created_at.fromNow()))])])]),n("button",{staticClass:"send-print btn btn-primary",attrs:{type:"button",disabled:e.isSending},on:{click:function(n){return e.onSendPrintClicked(t.id)}}},[e.isSending?n("b-spinner",{attrs:{small:"",label:"Loading..."}}):e._e(),e._v("Print ")],1)])])})),0):n("div",[e._m(1)])])},we=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"btn btn-outline-primary",attrs:{role:"button",href:"/gcodes/",title:"Upload more G-Code"}},[n("i",{staticClass:"fas fa-upload fa-lg mx-2"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"text-center font-weight-bold my-3"},[e._v("No G-Codes yet. You can upload them "),n("a",{attrs:{href:"/gcodes/"}},[e._v("here")]),e._v(".")])}],ye=(n("c975"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-wrapper"},[e._m(0),n("input",{staticClass:"dark",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])}),Ce=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-icon"},[n("i",{staticClass:"fas fa-search"})])}],_e={name:"SearchInput",props:{value:{type:String,default:""}}},ke=_e,Se=(n("bac1"),Object(Y["a"])(ke,ye,Ce,!1,null,"8b64328e",null)),xe=Se.exports,Ae={name:"StartPrint",components:{SearchInput:xe},props:{gcodeFiles:{type:Array,required:!0},onGcodeFileSelected:{type:Function,required:!0}},data:function(){return{searchText:"",isSending:!1}},computed:{visibleGcodeFiles:function(){var e=this.searchText.toLowerCase();return this.gcodeFiles.filter((function(t){return t.filename.toLowerCase().indexOf(e)>-1}))}},methods:{onSendPrintClicked:function(e){this.isSending=!0,this.onGcodeFileSelected(this.gcodeFiles,e)}}},Te=Ae,Oe=(n("14be"),Object(Y["a"])(Te,be,we,!1,null,"2ea37924",null)),De=Oe.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),n("div",[n("b-form-select",{attrs:{id:"connect-port"},model:{value:e.selectedPort,callback:function(t){e.selectedPort=t},expression:"selectedPort"}},e._l(e.connectionOptions.ports,(function(t){return n("b-form-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),n("br"),e._m(1),n("div",[n("b-form-select",{attrs:{id:"connect-baudrate"},model:{value:e.selectedBaudrate,callback:function(t){e.selectedBaudrate=t},expression:"selectedBaudrate"}},[n("b-form-select-option",{attrs:{value:""}},[e._v(" Auto ")]),e._l(e.connectionOptions.baudrates,(function(t){return n("b-form-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])}))],2)],1)])},je=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h5",[e._v("Serial Port:")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h5",[e._v("Baudrate:")])])}],Ee={name:"ConnectPrinter",props:{connectionOptions:{type:Object,required:!0}},data:function(){return{selectedPort:this.connectionOptions.ports[0],selectedBaudrate:""}}},Ie=Ee,Re=Object(Y["a"])(Ie,Pe,je,!1,null,null,null),Fe=Re.exports,Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"text-center"},[e.value>0?n("h1",{staticClass:"target-temp-degree"},[e._v(e._s(e.value)+" "),n("span",{staticClass:"text-subscript text-muted"},[e._v("°C")])]):e._e(),e.value<1?n("h1",{staticClass:"target-temp-degree"},[e._v("OFF")]):e._e()]),n("br"),n("div",{staticClass:"mb-5"},[e._m(0),n("div",[n("b-form-select",{attrs:{id:"id_preset"},on:{change:e.onPresetChanged},model:{value:e.preset,callback:function(t){e.preset=t},expression:"preset"}},e._l(e.allPresets,(function(t){return n("b-form-select-option",{key:t.value,attrs:{value:parseInt(t.value)}},[e._v(" "+e._s(t.title)+" ")])})),1)],1),n("br"),n("h5",[e._v("Manual:")]),n("div",[n("vue-slider",{attrs:{min:0,max:e.maxTemp,step:1,tooltip:"none"},on:{change:e.onSliderChanged},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{id:"target-temp",type:"hidden"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})],1)])])},Me=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h5",[e._v("Presets:")])])}],Be=n("4971"),Ve=n.n(Be),Ne={name:"TempTargetEditor",components:{VueSlider:Ve.a},props:{presets:{type:Array,required:!0},maxTemp:{type:Number,required:!0},curTarget:{type:Number,required:!0}},data:function(){var e=this,t=this.presets.find((function(t){return t.target==e.curTarget}))||{target:0!=this.curTarget?-1:0};return{value:this.curTarget,preset:t.target}},computed:{allPresets:function(){var e=[];return e.push({value:-1,title:"Manual"}),e.push({value:0,title:"OFF"}),this.presets.forEach((function(t){e.push({value:t.target,title:"".concat(t.name," (").concat(t.target,"°C)")})})),e}},methods:{onPresetChanged:function(){this.preset>-1&&(this.value=this.preset)},onSliderChanged:function(){0==this.value?this.preset=0:this.preset=-1}}},ze=Ne,We=Object(Y["a"])(ze,Le,Me,!1,null,null,null),$e=We.exports,Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"text-center"},[e._v("Printer Feed Sharing")]),n("hr"),e.isProAccount?n("div",[n("div",{staticClass:"py-3"},[n("div",{staticClass:"custom-control custom-switch"},[n("input",{staticClass:"custom-control-input update-printer",attrs:{type:"checkbox",id:"sharing_enabled-toggle-"+e.printer.id},domProps:{checked:e.sharedResource},on:{click:e.onSharingToggled}}),n("label",{staticClass:"custom-control-label",staticStyle:{"font-size":"1rem"},attrs:{for:"sharing_enabled-toggle-"+e.printer.id}},[e._v('Share live feed for printer "'),n("b",[e._v(e._s(e.printer.name))]),e._v('"')])]),n("div",{staticClass:"form-group"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.sharedLink,expression:"sharedLink"}]},[n("div",{staticClass:"input-group mt-4 mb-2"},[n("input",{ref:"sharedLink",staticClass:"form-control shared-link-text",attrs:{type:"text",id:"secret-token-input","aria-label":"Secret token",readonly:""},domProps:{value:e.sharedLink}}),n("div",{staticClass:"input-group-append"},[n("div",{staticClass:"btn btn-outline-primary",staticStyle:{"border-radius":"0 !important"},attrs:{id:"copy-link",type:"button","data-clipboard-target":"#secret-token-input","aria-label":"Copy secure link to clipboard"},on:{click:e.copyToClipboard}},[n("i",{staticClass:"fas fa-clipboard"})]),n("b-tooltip",{attrs:{show:e.copyStatus,target:"copy-link",triggers:"click",placement:"bottom"},on:{"update:show":function(t){e.copyStatus=t}}},[e._v(e._s(e.copyMessage))])],1)]),n("div",{staticClass:"my-1"},[e._v("Click the clipboard icon above to copy the secure shareable link to your clipboard.")]),n("div",{staticClass:"my-1"},[e._v("You can test the shareable link by right-clicking "),n("a",{attrs:{href:e.sharedLink}},[e._v("here")]),e._v(' and select "Open Link in Incognito Window".')]),n("br"),e._m(3)])]),n("br")])]):n("div",[e._m(0),n("p",[e._v("Printer feed sharing is a Pro feature.")]),e._m(1),e._m(2)])])},qe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h5",{staticClass:"mb-5"},[e._v("Wait! You need to "),n("a",{attrs:{href:"/ent/pricing/"}},[e._v("upgrade to Pro plan")]),e._v(" to enable Printer feed. ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("a",{attrs:{href:"https://help.thespaghettidetective.com/kb/guide/en/pro-plan-vs-free-plan-My6yGUkT4T/Steps/294250"}},[e._v("Running TSD incurs non-trivial amount of costs")]),e._v(". With little more than 1 Starbucks per month, you can upgrade to a Pro account and help us run TSD smoothly.")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("a",{attrs:{href:"/ent/pricing/"}},[e._v("Check out Pro pricing >>>")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("em",{staticClass:"text-muted"},[n("small",[n("div",[e._v("Notes:")]),n("ul",[n("li",[e._v("Send the secure link to anyone you want to share your printer feed with. They do NOT need a The Spaghetti Detective account to see your printer feed.")]),n("li",[e._v("Anyone with this shareable link will be able to see your printer feed. "),n("a",{attrs:{href:"https://help.thespaghettidetective.com/kb/guide/en/securely-share-your-printer-feed-kMCE7Shn0g/"}},[e._v("Learn more about what they can see.")])])])])])}],Ge={props:{isProAccount:{type:Boolean,default:!1},printer:{type:Object,required:!0}},data:function(){return{share:!1,sharedResource:null,copyStatus:!1,copyMessage:""}},created:function(){this.fetchSharedResources()},computed:{sharedLink:function(){if(this.sharedResource){var e=window.location;return"".concat(e.protocol,"//").concat(e.host,"/printers/share_token/").concat(this.sharedResource.share_token,"/")}return""}},methods:{fetchSharedResources:function(){var e=this;return f.a.get(y["a"].sharedResources({printer_id:this.printer.id})).then((function(t){t.data.length>0&&(e.sharedResource=t.data[0])}))},postSharedResources:function(){var e=this;return f.a.post(y["a"].sharedResources({printer_id:this.printer.id})).then((function(t){t.data.length>0&&(e.sharedResource=t.data[0])}))},deleteSharedResources:function(){var e=this;return f.a.delete(y["a"].sharedResource(this.sharedResource.id)).then((function(){e.sharedResource=null}))},onSharingToggled:function(){this.sharedResource?this.deleteSharedResources():this.postSharedResources()},copyToClipboard:function(){this.copyStatus=!0,this.$refs.sharedLink.focus(),this.$refs.sharedLink.select();try{document.execCommand("copy"),this.copyMessage="Copied!"}catch(e){console.error("Fallback: Oops, unable to copy",e),this.copyMessage="Failed!"}}}},He=Ge,Je=(n("77bd"),Object(Y["a"])(He,Ue,qe,!1,null,"0d8c118e",null)),Ze=Je.exports,Qe="/pause_print/",Ye="/resume_print/",Xe="/cancel_print/",Ke="/mute_current_print/?mute_alert=true",et="/acknowledge_alert/?alert_overwrite=NOT_FAILED",tt=!0,nt=!1,it={Settings:"panel-settings",Time:"print-time",StatusTemp:"status_temp_block"},rt={name:"PrinterCard",components:{StreamingBox:K,Gauge:$["a"],DurationBlock:ae,PrinterActions:ue,StatusTemp:he},props:{printer:{type:Object,required:!0},isProAccount:{type:Boolean,required:!0}},data:function(){return{section_toggles:{settings:Object(b["a"])(it.Settings+String(this.printer.id),tt),time:Object(b["a"])(it.Time+String(this.printer.id),nt),statusTemp:Object(b["a"])(it.StatusTemp+String(this.printer.id),tt)},webrtc:z(this.isProAccount)}},created:function(){var e=this;this.printerComm=M(this.printer.id,y["a"].printerWebSocket(this.printer.id),(function(t){e.$emit("PrinterUpdated",e.updatedPrinter(t))}),(function(t){e.$emit("PrinterUpdated",e.updatedPrinter({status:t.octoprint_data}))})),this.printerComm.connect(),this.webrtc.openForPrinter(this.printer.id,this.printer.auth_token),this.printerComm.setWebRTC(this.webrtc)},computed:{isWatching:function(){return!this.printer.not_watching_reason},timeRemaining:function(){return this.toDuration(this.secondsLeft,this.printer.isPrinting())},timeTotal:function(){var e=null;return this.secondsPrinted&&this.secondsLeft&&(e=this.secondsPrinted+this.secondsLeft),this.toDuration(e,this.printer.isPrinting())},secondsLeft:function(){return x()(this.printer,"status.progress.printTimeLeft")},secondsPrinted:function(){return x()(this.printer,"status.progress.printTime")},watchForFailures:function(){return this.printer.watching_enabled},pauseOnFailure:function(){return"PAUSE"==this.printer.action_on_failure},hasCurrentPrintFilename:function(){return!(!this.printer.current_print||!this.printer.current_print.filename)},actionsProps:function(){return{printer:this.printer}},progressPct:function(){return x()(this.printer,"status.progress.completion")||0},tempProps:function(){var e=this,t=void 0!=x()(this.printer,"settings.temp_profiles"),n=[],i=["bed","tool0","tool1"];return i.forEach((function(t){var i=x()(e.printer,"status.temperatures."+t);i&&(i.actual=parseFloat(i.actual).toFixed(1),i.target=Math.round(i.target),Object.assign(i,{toolName:T()(t)}),i.id=e.printer.id+"-"+t,i.key=t,n.push(i))})),{temperatures:n,show:n.length>0,editable:t}},statusText:function(){return x()(this.printer,"status.state.text","Offline")},statusClass:function(){return this.printer.hasError()?"text-danger":this.printer.isOffline()||this.printer.isDisconnected()||this.printer.inTransientState()?"text-warning":"text-success"}},methods:{updatedPrinter:function(e){return Object(w["d"])(e,this.printer)},shareUrl:function(){return"/printers/".concat(this.printer.id,"/share/")},settingsUrl:function(){return"/printers/".concat(this.printer.id,"/")},octoPrintTunnelUrl:function(){return"/tunnel/".concat(this.printer.id,"/")},onSettingsToggleClicked:function(){this.section_toggles.settings=!this.section_toggles.settings,Object(b["b"])(it.Settings+String(this.printer.id),this.section_toggles.settings)},onTimeToggleClicked:function(){this.section_toggles.time=!this.section_toggles.time,Object(b["b"])(it.Time+String(this.printer.id),this.section_toggles.time)},onStatusTempToggleClicked:function(){this.section_toggles.statusTemp=!this.section_toggles.statusTemp,Object(b["b"])(it.StatusTemp+String(this.printer.id),this.section_toggles.statusTemp)},onNotAFailureClicked:function(e,t){var n=this;this.$swal.Confirm.fire({title:"Noted!",html:'<p>Do you want The Detective to keep watching this print?</p><small>If you select "No", The Detective will stop watching this print, but will automatically resume watching on your next print.</small>',confirmButtonText:"Yes",cancelButtonText:"No"}).then((function(e){"cancel"==e.dismiss&&setTimeout((function(){n.sendPrinterAction(n.printer.id,Ke,!1)}),1e3),t?n.sendPrinterAction(n.printer.id,Ye,!0):n.sendPrinterAction(n.printer.id,et,!1)})),e.preventDefault()},onWatchForFailuresToggled:function(){this.printer.watching_enabled=!this.printer.watching_enabled,this.updatePrinter(this.printer)},onPauseOnFailureToggled:function(){this.printer.action_on_failure="PAUSE"==this.printer.action_on_failure?"NONE":"PAUSE",this.updatePrinter(this.printer)},onPrinterActionPauseClicked:function(){var e=this;this.$swal.Confirm.fire({html:'If you haven\'t changed the default configuration, the heaters will be turned off, and the print head will be z-lifted. The reversed will be performed before the print is resumed. <a target="_blank" href="https://help.thespaghettidetective.com/kb/guide/en/failure-detection-settings-TYti93JPPk/Steps/296229,296242">Learn more. <small><i class="fas fa-external-link-alt"></i></small></a>'}).then((function(t){t.value&&e.sendPrinterAction(e.printer.id,Qe,!0)}))},onPrinterActionResumeClicked:function(e){this.printer.alertUnacknowledged()?this.onNotAFailureClicked(e,!0):this.sendPrinterAction(this.printer.id,Ye,!0)},onPrinterActionCancelClicked:function(){var e=this;this.$swal.Confirm.fire({text:"Once cancelled, the print can no longer be resumed."}).then((function(t){t.value&&e.sendPrinterAction(e.printer.id,Xe,!0)}))},onPrinterActionConnectClicked:function(){var e=this;this.printerComm.passThruToPrinter({func:"get_connection_options",target:"_printer"},(function(t,n){t?e.$swal.Toast.fire({icon:"error",title:"Failed to connect!"}):n.ports.length<1?e.$swal.Toast.fire({icon:"error",title:"Uh-Oh. No printer is found on the serial port."}):e.$swal.openModalWithComponent(Fe,{connectionOptions:n},{confirmButtonText:"Connect",showCancelButton:!0,preConfirm:function(){return{port:document.getElementById("connect-port").value,baudrate:document.getElementById("connect-baudrate").value}}}).then((function(t){if(t.value){var n=[t.value.port,t.value.baudrate];e.printerComm.passThruToPrinter({func:"connect",target:"_printer",args:n})}}))}))},onPrinterActionStartClicked:function(){var e=this;this.isProAccount?f.a.get(y["a"].gcodes(1,1e3)).then((function(t){var n=Object(k["a"])(t.data.results.map((function(e){return Object(w["b"])(e)})));e.$swal.openModalWithComponent(De,{gcodeFiles:n,onGcodeFileSelected:e.onGcodeFileSelected},{title:'Start print on "'+e.printer.name+'"',showConfirmButton:!1,showCloseButton:!0})})):this.$swal.fire({title:"Wait!",html:'\n              <h5 class="mb-3">You need to <a href="/ent/pricing/">upgrade to Pro plan</a> to start a remote print job. </h5>\n              <p>Remote G-Code upload and print start is a Pro feature.</p>\n              <p>With <a href="/ent/pricing/">little more than 1 Starbucks per month</a>, you can upgrade to a Pro account.</p>\n            '})},onGcodeFileSelected:function(e,t){var n=this;this.printerComm.passThruToPrinter({func:"download",target:"file_downloader",args:j()(e,{id:t})},(function(e,t){if(e||t.error)n.$swal.Toast.fire({icon:"error",title:e||t.error});else{var i=t.target_path,r='\n          <div class="text-center">\n            <i class="fas fa-spinner fa-spin fa-lg py-3"></i>\n            <h5 class="py-3">\n              Uploading G-Code to '.concat(n.printer.name," ...\n            </h5>\n            <p>\n              ").concat(i,"\n            </p>\n          </div>");n.$swal.fire({html:r,showConfirmButton:!1});var a=function e(){"Operational"==x()(n.printer,"status.state.text")?setTimeout(e,1e3):n.$swal.close()};a()}}))},onPrinterActionControlClicked:function(){window.location=y["a"].printerControl(this.printer.id)},onTempEditClicked:function(e){var t,n=this,i=x()(this.printer,"settings.temp_profiles",[]),r=350;"bed"==e.key?(t=i.map((function(e){return{name:e.name,target:e["bed"]}})),r=140):t=i.map((function(e){return{name:e.name,target:e["extruder"]}})),this.$swal.openModalWithComponent($e,{presets:t,maxTemp:r,curTarget:e.target},{title:"Set "+e.toolName+" Temperature",confirmButtonText:"Confirm",showCancelButton:!0,preConfirm:function(){return{target:parseInt(document.getElementById("target-temp").value)}}}).then((function(t){if(t.value){var i=t.value.target;n.printerComm.passThruToPrinter({func:"set_temperature",target:"_printer",args:[e.key,i]})}}))},updatePrinter:function(e){var t=this;return f.a.patch(y["a"].printer(e.id),{watching_enabled:e.watching_enabled,action_on_failure:e.action_on_failure}).then((function(e){if(!e.data.succeeded)throw e;t.$emit("PrinterUpdated",Object(w["d"])(e.data.printer,t.printer))})).catch((function(e){console.error(e),t.$swal.Toast.fire({icon:"error",title:"Failed to update printer!"})}))},sendPrinterAction:function(e,t,n){var i=this;f.a.get(y["a"].printerAction(e,t)).then((function(){var e="";n&&(e+="<h6>Successfully sent command to OctoPrint!</h6><p>It may take a while to be executed by OctoPrint.</p>"),""!=e&&i.$swal.Toast.fire({icon:"success",html:e})}))},shouldVideoBeFull:function(e){var t=x()(e,"pic.img_url"),n=e.alertUnacknowledged()&&t;return!n},toDuration:function(e,t){if(null==e||0==e)return{valid:!1,printing:t};var n=D.a.duration(e,"seconds"),i=Math.floor(n.asHours()),r=n.minutes(),a=n.seconds();return{valid:!0,printing:t,hours:i,showHours:i>0,minutes:r,showMinutes:i>0||r>0,seconds:a,showSeconds:0==i&&0==r}},onSharePrinter:function(){this.$swal.openModalWithComponent(Ze,{isProAccount:this.isProAccount,printer:this.printer},{confirmButtonText:"Close"})}}},at=rt,ot=(n("2601"),Object(Y["a"])(at,C,_,!1,null,"27d25e14",null)),st=ot.exports,ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-dropdown",{attrs:{"toggle-class":"btn-light tsd-dropdown-toggle","menu-class":"tsd-dropdown-menu"},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("div",{staticClass:"tsd-dropdown-selected-title"},[e._v(e._s(e.selected_title)+" "),e.selected.iconClass?n("i",{class:e.selected.iconClass}):e._e()])]},proxy:!0}])},e._l(e.options,(function(t){return n("b-dropdown-item",{key:t.value,attrs:{active:e.value==t.value},on:{click:function(n){return e.onOptionClicked(t)}}},[e._v(e._s(t.title)+" "),t.iconClass?n("i",{class:t.iconClass}):e._e()])})),1)},lt=[],dt={name:"Select",props:["options","value"],methods:{onOptionClicked:function(e){this.$emit("input",e.value)}},computed:{selected:function(){var e=this;return this.options?this.options.find((function(t){return t.value==e.value})):null},selected_title:function(){var e=this.selected;return e.selected_title||e.title}}},ut=dt,pt=(n("08e1"),Object(Y["a"])(ut,ct,lt,!1,null,"976ec99a",null)),ft=pt.exports,vt=n("b768"),mt={Asc:"asc",Desc:"desc"},gt={All:"all",OnlineOnly:"online",ActiveOnly:"active"},ht={DateAsc:"by-date-asc",DateDesc:"by-date-desc",NameAsc:"by-name-asc",NameDesc:"by-name-desc"},bt=(W={},Object(u["a"])(W,mt.Asc,"fas fa-long-arrow-alt-up"),Object(u["a"])(W,mt.Desc,"fas fa-long-arrow-alt-down"),W),wt={StateFilter:"printer-filtering",SortFilter:"printer-sorting"},yt=function(e,t,n){var i=Object.entries(e).find((function(e){return e[1]==t}));return i?i[1]:n},Ct={name:"PrinterListPage",components:{PrinterCard:st,Select:ft,Navbar:c["a"],PullToReveal:vt["a"]},created:function(){this.user=JSON.parse(document.querySelector("#user-json").text),this.StateFilter=gt,this.SortFilter=ht,this.SortOrder=mt,this.stateFilters=[{value:gt.All,title:"All Printers"},{value:gt.OnlineOnly,title:"Online Printers Only"},{value:gt.ActiveOnly,title:"Active Printers Only"}],this.sortFilters=[{value:ht.DateAsc,title:"Sort By Date",iconClass:bt[mt.Asc]},{value:ht.DateDesc,title:"Sort By Date",iconClass:bt[mt.Desc]},{value:ht.NameAsc,title:"Sort By Name",iconClass:bt[mt.Asc]},{value:ht.NameDesc,title:"Sort By Name",iconClass:bt[mt.Desc]}],this.fetchPrinters()},data:function(){return{user:null,printers:[],loading:!0,filters:{visible:!1,state:yt(gt,Object(b["a"])(wt.StateFilter,gt.All),gt.All),sort:yt(ht,Object(b["a"])(wt.SortFilter,ht.DateDesc),ht.DateDesc)}}},computed:{visiblePrinters:function(){var e=this.printers;switch(this.filters.state){case gt.OnlineOnly:e=e.filter((function(e){return!e.isDisconnected()}));break;case gt.ActiveOnly:e=e.filter((function(e){return e.isPrinting()}));break;case gt.All:break}switch(this.filters.sort){case ht.DateAsc:e=m()(e,(function(e){return e.createdAt()}));break;case ht.DateDesc:e=h()(m()(e,(function(e){return e.createdAt()})));break;case ht.NameAsc:e=m()(e,(function(e){return e.name}));break;case ht.NameDesc:e=h()(m()(e,(function(e){return e.name})));break}return e},hiddenPrinterCount:function(){return this.printers.length-this.visiblePrinters.length}},methods:{fetchPrinters:function(){var e=this;return this.loading=!0,f.a.get(y["a"].printers(),{params:{with_archived:!0}}).then((function(t){e.loading=!1,t.data.forEach((function(t){t.archived_at?e.$swal.Toast.fire({html:'<br /><h6>Some of your printers have been archived.</h6><p><a href="/ent/printers/archived/">Find them here.</a></p>',timer:15e3}):e.insertPrinter(Object(w["d"])(t))}))}))},toggleFiltersPanel:function(){this.filters.visible=!this.filters.visible},onSortFilterChanged:function(){Object(b["b"])(wt.SortFilter,this.filters.sort),this.toggleFiltersPanel()},onStateFilterChanged:function(){Object(b["b"])(wt.StateFilter,this.filters.state),this.toggleFiltersPanel()},onShowAllPrintersClicked:function(){this.filters.state=gt.All,Object(b["b"])(wt.StateFilter,this.filters.state)},insertPrinter:function(e){this.printers.push(e)},onPrinterUpdated:function(e){var t=this.printers.findIndex((function(t){return t.id==e.id}));t<0||this.$set(this.printers,t,e)},closeMenus:function(){if(this.$refs.navbar.hideDropdowns(),this.$refs.filters){var e=this.$refs.filters.querySelectorAll(".dropdown");e.forEach((function(e){e.classList.contains("show")&&(e.classList.remove("show"),e.querySelector(".dropdown-menu").classList.remove("show"))}))}}}},_t=Ct,kt=(n("b01d"),Object(Y["a"])(_t,l,d,!1,null,null,null)),St=kt.exports,xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("pull-to-reveal",[n("navbar",{attrs:{"view-name":"printer_shared"}})],1),n("div",{staticClass:"row justify-content-center"},[e.loading?n("b-spinner",{staticClass:"mt-5",attrs:{label:"Loading..."}}):e._e(),e.printer?n("div",{staticClass:"col-sm-12 col-lg-6 printer-card"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[n("div",[e._v(e._s(e.printer.name))])]),n("streaming-box",{attrs:{printer:e.printer,webrtc:e.webrtc}}),n("div",{staticClass:"p-3 p-md-5"},[n("p",{staticClass:"text-center"},[e._v("You are viewing an awesome 3D print your friend shared specifically with you on")]),n("a",{attrs:{href:"https://www.thespaghettidetective.com/"}},[n("dark-light-image",{staticClass:"logo-img",attrs:{path:"navbar-brand",ext:"png",alt:"The Spaghetti Detective"}})],1),n("hr"),n("br"),n("br"),n("a",{staticClass:"btn btn-block btn-primary",attrs:{href:"/accounts/signup/"}},[e._v("Get OctoPrint remote monitoring/access for FREE")])])],1)]):e._e()],1)],1)},At=[],Tt=(n("fb6a"),n("6625")),Ot=n.n(Tt),Dt=n("e7f8"),Pt={name:"SharedPrinterPage",components:{StreamingBox:K,PullToReveal:vt["a"],Navbar:c["a"],DarkLightImage:Dt["a"]},created:function(){var e=this;this.shareToken=Ot()(window.location.pathname,"/").slice(-2,-1).pop(),this.printerComm=M(this.shareToken,y["a"].printerSharedWebSocket(this.shareToken),(function(t){e.printer=Object(w["d"])(t,e.printer),e.loading=!1})),this.printerComm.connect(),this.webrtc.openForShareToken(this.shareToken)},data:function(){return{printer:null,shareToken:null,videoAvailable:{},loading:!0,webrtc:z(!0)}}},jt=Pt,Et=(n("193f"),Object(Y["a"])(jt,xt,At,!1,null,"37c9e207",null)),It=Et.exports,Rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row justify-content-center"},[n("pull-to-reveal",[n("navbar",{attrs:{"view-name":"app.views.web_views.edit_printer"}})],1),n("div",{staticClass:"col-sm-11 col-md-10 col-lg-8"},[e.printer?n("div",{staticClass:"form-container"},[n("section",{staticClass:"settings"},[n("h2",{staticClass:"section-title"},[e._v("Settings")]),n("div",{staticClass:"form-group mb-4 mt-4"},[n("div",{staticClass:"form-label text-muted mb-2"},[e._v("Give your shiny new printer a name")]),n("saving-animation",{attrs:{errors:e.errorMessages.name,saving:e.saving.name}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.printer.name,expression:"printer.name"}],staticClass:"form-control field_required",attrs:{id:"id_name",type:"text",name:"name",maxlength:"200",placeholder:"",required:"required"},domProps:{value:e.printer.name},on:{input:function(t){t.target.composing||e.$set(e.printer,"name",t.target.value)}}})])],1),n("div",{staticClass:"failure-notification"},[n("div",{staticClass:"form-group mt-4 mb-4"},[n("div",{staticClass:"form-label text-muted"},[e._v("When a potential failure is detected:")]),n("saving-animation",{attrs:{errors:e.errorMessages.action_on_failure_NONE,saving:e.saving.action_on_failure_NONE}},[n("div",{staticClass:"custom-control custom-radio mt-1 radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.printer.action_on_failure,expression:"printer.action_on_failure"}],staticClass:"custom-control-input field_required",attrs:{type:"radio",name:"action_on_failure",id:"id_action_on_failure_0",value:"NONE"},domProps:{checked:e._q(e.printer.action_on_failure,"NONE")},on:{change:[function(t){return e.$set(e.printer,"action_on_failure","NONE")},function(t){return e.updateSetting("action_on_failure")}]}}),n("label",{staticClass:"custom-control-label",attrs:{for:"id_action_on_failure_0"}},[e._v("Just notify me")])])]),n("saving-animation",{attrs:{errors:e.errorMessages.action_on_failure_PAUSE,saving:e.saving.action_on_failure_PAUSE}},[n("div",{staticClass:"custom-control custom-radio mt-1 radio",attrs:{id:"action_on_failure_PAUSE"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.printer.action_on_failure,expression:"printer.action_on_failure"}],staticClass:"custom-control-input field_required",attrs:{type:"radio",name:"action_on_failure",id:"id_action_on_failure_1",value:"PAUSE"},domProps:{checked:e._q(e.printer.action_on_failure,"PAUSE")},on:{change:[function(t){return e.$set(e.printer,"action_on_failure","PAUSE")},function(t){return e.updateSetting("action_on_failure")}]}}),n("label",{staticClass:"custom-control-label",attrs:{for:"id_action_on_failure_1"}},[e._v("Pause the printer and notify me")])])])],1)])]),n("section",{staticClass:"mt-5"},[n("h2",{staticClass:"section-title"},[e._v("Failure Detection")]),n("div",{staticClass:"card-body p-0 pt-3"},[e._m(0),n("div",{staticClass:"form-group mt-4"},[n("div",{staticClass:"form-label text-muted"},[e._v("When print is paused,")]),n("saving-animation",{attrs:{errors:e.errorMessages.tools_off_on_pause,saving:e.saving.tools_off_on_pause}},[n("div",{staticClass:"custom-control custom-checkbox form-check-inline mt-2 checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.printer.tools_off_on_pause,expression:"printer.tools_off_on_pause"}],staticClass:"custom-control-input",attrs:{type:"checkbox",name:"tools_off_on_pause",id:"id_tools_off_on_pause"},domProps:{checked:Array.isArray(e.printer.tools_off_on_pause)?e._i(e.printer.tools_off_on_pause,null)>-1:e.printer.tools_off_on_pause},on:{change:[function(t){var n=e.printer.tools_off_on_pause,i=t.target,r=!!i.checked;if(Array.isArray(n)){var a=null,o=e._i(n,a);i.checked?o<0&&e.$set(e.printer,"tools_off_on_pause",n.concat([a])):o>-1&&e.$set(e.printer,"tools_off_on_pause",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(e.printer,"tools_off_on_pause",r)},function(t){return e.updateSetting("tools_off_on_pause")}]}}),n("label",{staticClass:"custom-control-label",attrs:{for:"id_tools_off_on_pause"}},[e._v(" Turn off hotend heater(s) ")])])]),n("saving-animation",{attrs:{errors:e.errorMessages.bed_off_on_pause,saving:e.saving.bed_off_on_pause}},[n("div",{staticClass:"custom-control custom-checkbox form-check-inline mt-2 checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.printer.bed_off_on_pause,expression:"printer.bed_off_on_pause"}],staticClass:"custom-control-input",attrs:{type:"checkbox",name:"bed_off_on_pause",id:"id_bed_off_on_pause"},domProps:{checked:Array.isArray(e.printer.bed_off_on_pause)?e._i(e.printer.bed_off_on_pause,null)>-1:e.printer.bed_off_on_pause},on:{change:[function(t){var n=e.printer.bed_off_on_pause,i=t.target,r=!!i.checked;if(Array.isArray(n)){var a=null,o=e._i(n,a);i.checked?o<0&&e.$set(e.printer,"bed_off_on_pause",n.concat([a])):o>-1&&e.$set(e.printer,"bed_off_on_pause",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(e.printer,"bed_off_on_pause",r)},function(t){return e.updateSetting("bed_off_on_pause")}]}}),n("label",{staticClass:"custom-control-label",attrs:{for:"id_bed_off_on_pause"}},[e._v(" Turn off bed heater ")])])]),n("saving-animation",{staticClass:"mobile-full-width",attrs:{errors:e.errorMessages.retract_on_pause,saving:e.saving.retract_on_pause}},[n("div",{staticClass:"form-inline my-1 checkbox-with-input"},[n("div",{staticClass:"custom-control custom-checkbox form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.retractFilamentByEnabled,expression:"retractFilamentByEnabled"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"retract-checkbox"},domProps:{checked:Array.isArray(e.retractFilamentByEnabled)?e._i(e.retractFilamentByEnabled,null)>-1:e.retractFilamentByEnabled},on:{change:function(t){var n=e.retractFilamentByEnabled,i=t.target,r=!!i.checked;if(Array.isArray(n)){var a=null,o=e._i(n,a);i.checked?o<0&&(e.retractFilamentByEnabled=n.concat([a])):o>-1&&(e.retractFilamentByEnabled=n.slice(0,o).concat(n.slice(o+1)))}else e.retractFilamentByEnabled=r}}}),n("label",{staticClass:"custom-control-label",attrs:{for:"retract-checkbox"}},[e._v("Retract filament by")])]),n("number-input",{attrs:{step:.5,disable:!e.retractFilamentByEnabled},model:{value:e.retractOnPause,callback:function(t){e.retractOnPause=t},expression:"retractOnPause"}})],1)]),n("saving-animation",{staticClass:"mobile-full-width",attrs:{errors:e.errorMessages.lift_z_on_pause,saving:e.saving.lift_z_on_pause}},[n("div",{staticClass:"form-inline my-1 checkbox-with-input"},[n("div",{staticClass:"custom-control custom-checkbox form-check-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.liftExtruderByEnabled,expression:"liftExtruderByEnabled"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"lift-z-checkbox"},domProps:{checked:Array.isArray(e.liftExtruderByEnabled)?e._i(e.liftExtruderByEnabled,null)>-1:e.liftExtruderByEnabled},on:{change:function(t){var n=e.liftExtruderByEnabled,i=t.target,r=!!i.checked;if(Array.isArray(n)){var a=null,o=e._i(n,a);i.checked?o<0&&(e.liftExtruderByEnabled=n.concat([a])):o>-1&&(e.liftExtruderByEnabled=n.slice(0,o).concat(n.slice(o+1)))}else e.liftExtruderByEnabled=r}}}),n("label",{staticClass:"custom-control-label",attrs:{for:"lift-z-checkbox"}},[e._v("Lift extruder along Z axis by")])]),n("number-input",{attrs:{step:.5,disable:!e.liftExtruderByEnabled},model:{value:e.liftExtruderBy,callback:function(t){e.liftExtruderBy=t},expression:"liftExtruderBy"}})],1)])],1),n("div",{staticClass:"form-group sensitivity my-4"},[n("div",{staticClass:"form-label text-muted"},[e._v("How sensitive do you want the Detective to be on this printer?")]),n("saving-animation",{attrs:{errors:e.errorMessages.detective_sensitivity,saving:e.saving.detective_sensitivity}},[n("div",{staticClass:"my-2 sensitivity-slider"},[n("input",{attrs:{id:"id_sensitivity",name:"detective_sensitivity","data-slider-id":"sensitivity-slider",type:"text","data-slider-min":"0.8","data-slider-max":"1.2","data-slider-step":"0.05","data-slider-value":e.printer.detective_sensitivity}})])]),n("div",{staticClass:"hint-low"},[e._v(" Low - I don't want a lot of false alarms. Only alert me when you are absolutely sure. ")]),n("div",{staticClass:"hint-medium"},[e._v(" Medium - A few false alarms won't bother me. But some well-disguised spaghetti will be missed. ")]),n("div",{staticClass:"hint-high"},[e._v(" High - Hit me with all the false alarms. I want to catch as many failures as possible. ")])],1)])]),n("section",{staticClass:"danger mt-5"},[n("h2",{staticClass:"section-title"},[e._v("Danger Zone")]),n("div",{staticClass:"mt-4"},[n("a",{staticClass:"btn btn-outline-secondary",attrs:{href:e.printerWizardUrl}},[e._v(" Re-Link OctoPrint ")]),e._m(1)]),n("div",{staticClass:"mt-4"},[n("button",{staticClass:"btn btn-outline-danger",on:{click:e.deletePrinter}},[e._v(" Delete Printer ")]),e._m(2)])])]):n("div",{staticClass:"text-center"},[n("b-spinner",{staticClass:"mt-5",attrs:{label:"Loading..."}})],1)])],1)},Ft=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"text-warning"},[n("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" If you are not sure about the settings below, leave the default values to minimize surprises. ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-muted mt-1"},[n("small",[e._v('If your OctoPrint is always showing as "offline", and you have gone through '),n("a",{attrs:{href:"https://help.thespaghettidetective.com/kb/guide/en/octoprint-is-offline-z7RqhgmnPY/"}},[e._v("all the trouble-shooting steps")]),e._v(", you can try to re-link OctoPrint as the last resort.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-muted mt-1"},[n("small",[e._v("Bye-bye printer. See you next time!")])])}],Lt=n("0122"),Mt=n("3a2b"),Bt=n.n(Mt),Vt=n("cb3d"),Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group input-group-sm input-wrapper"},[n("div",{staticClass:"input-group-prepend"},[n("button",{staticClass:"btn btn-outline-secondary control-button",attrs:{type:"button",disabled:e.disable},on:{click:function(t){e.inputValue=e.inputValue>0?Math.round(10*(e.inputValue-e.step))/10:0,e.$emit("input",e.inputValue)}}},[e._v("↓")])]),n("input",{staticClass:"form-control text-center field_required",style:{opacity:e.disable?.3:1},attrs:{type:"text",disabled:"","aria-describedby":"basic-addon1"},domProps:{value:e.inputValue+" mm"}}),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-outline-secondary control-button",attrs:{type:"button",disabled:e.disable},on:{click:function(t){e.inputValue=Math.round(10*(e.inputValue+e.step))/10,e.$emit("input",e.inputValue)}}},[e._v("↑")])])])},zt=[],Wt={name:"NumberInput",props:{value:{type:Number,default:0},step:{type:Number,default:.5},disable:{type:Boolean,default:!1}},data:function(){return{inputValue:this.value}},watch:{value:function(e){this.inputValue=e}}},$t=Wt,Ut=(n("67d7"),Object(Y["a"])($t,Nt,zt,!1,null,"10638ea7",null)),qt=Ut.exports,Gt={components:{SavingAnimation:Vt["a"],NumberInput:qt,PullToReveal:vt["a"],Navbar:c["a"]},data:function(){return{printer:null,printerId:"",saving:{},errorMessages:{},delayedSubmit:{name:{delay:1e3,timeoutId:null},retract_on_pause:{delay:1e3,timeoutId:null},lift_z_on_pause:{delay:1e3,timeoutId:null}}}},computed:{retractFilamentByEnabled:{get:function(){return this.printer.retract_on_pause>0},set:function(e){this.printer.retract_on_pause=e?6.5:0,this.updateSetting("retract_on_pause")}},retractOnPause:{get:function(){return this.printer?this.printer.retract_on_pause:void 0},set:function(e){this.printer&&(this.printer.retract_on_pause=e)}},liftExtruderByEnabled:{get:function(){return this.printer.lift_z_on_pause>0},set:function(e){this.printer.lift_z_on_pause=e?2.5:0,this.updateSetting("lift_z_on_pause")}},liftExtruderBy:{get:function(){return this.printer?this.printer.lift_z_on_pause:void 0},set:function(e){this.printer&&(this.printer.lift_z_on_pause=e)}},printerWizardUrl:function(){return y["a"].printerWizard(this.printer.id)},printerName:{get:function(){return this.printer?this.printer.name:void 0},set:function(e){this.printer.name=e}}},watch:{printerName:function(e,t){void 0!==t&&this.updateSetting("name")},retractOnPause:function(e,t){void 0!==t&&this.changeRetractOnPause(e)},liftExtruderBy:function(e,t){void 0!==t&&this.changeLiftExtruderBy(e)}},created:function(){var e=this;this.printerId=Ot()(window.location.pathname,"/").slice(-2,-1).pop(),this.fetchPrinter().then((function(){var t=new Bt.a("#id_sensitivity",{formatter:function(e){return e<.95?"Low":e>1.05?"High":"Medium"}});t.on("slideStop",e.saveSensitivity),t.on("change",e.updateSensitivityHint),e.updateSensitivityHint()}))},mounted:function(){},methods:{fetchPrinter:function(){var e=this;return f.a.get(y["a"].printer(this.printerId)).then((function(t){e.printer=Object(w["d"])(t.data,e.printer)}))},patchPrinter:function(e,t){var n=this,i=this.getSettingsItemInput(e,t);return this.setSavingStatus(i,!0),f.a.patch(y["a"].printer(this.printerId),Object(u["a"])({},e,t)).catch((function(e){if(e.response&&e.response.data&&"object"===Object(Lt["a"])(e.response.data))if(e.response.data.non_field_errors)n.errorAlert(e.response.data.non_field_errors);else for(var t in e.response.data)n.errorMessages[i]=e.response.data[t];else n.errorAlert()})).then((function(){n.setSavingStatus(i,!1)}))},errorAlert:function(){this.$swal.Toast.fire({icon:"error",html:'<div>Can not update printer settings.</div><div>Get help from <a href="https://discord.com/invite/NcZkQfj">TSD discussion forum</a> if this error persists.</div>'})},updateSetting:function(e){var t=this;if(e in this.delayedSubmit){var n=this.delayedSubmit[e];return n["timeoutId"]&&clearTimeout(n["timeoutId"]),void(this.delayedSubmit[e]["timeoutId"]=setTimeout((function(){t.patchPrinter(e,t.printer[e])}),n["delay"]))}this.patchPrinter(e,this.printer[e])},saveSensitivity:function(e){this.printer.detective_sensitivity=e,this.updateSetting("detective_sensitivity")},updateSensitivityHint:function(){var e=document.querySelectorAll(".sensitivity div[class^=hint]");[].forEach.call(e,(function(e){e.style.display="none"}));var t=parseFloat(document.querySelector("#id_sensitivity").value);t<.95?document.querySelector(".sensitivity .hint-low").style.display="block":t>1.05?document.querySelector(".sensitivity .hint-high").style.display="block":document.querySelector(".sensitivity .hint-medium").style.display="block"},deletePrinter:function(){var e=this;this.$swal.Confirm.fire().then((function(t){t.value&&(window.location.href="/printers/".concat(e.printerId,"/delete/"))}))},getSettingsItemInput:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(e){case"action_on_failure":return"".concat(e,"_").concat(t);default:return"".concat(e)}},setSavingStatus:function(e,t){t&&delete this.errorMessages[e],this.$set(this.saving,e,t)},changeRetractOnPause:function(e){this.printer.retract_on_pause=e,this.updateSetting("retract_on_pause")},changeLiftExtruderBy:function(e){this.printer.lift_z_on_pause=e,this.updateSetting("lift_z_on_pause")}}},Ht=Gt,Jt=(n("ef33"),Object(Y["a"])(Ht,Rt,Ft,!1,null,"003afa66",null)),Zt=Jt.exports,Qt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row justify-content-center"},[i("pull-to-reveal",[i("navbar",{attrs:{"view-name":"app.views.web_views.edit_printer"}})],1),i("div",{staticClass:"col-sm-12 col-lg-10 wizard-container form-container",class:{"logo-bg":e.verifiedPrinter}},[e.verifiedPrinter?i("div",{staticClass:"text-center py-5"},[i("svg",{staticClass:"success-checkmark",attrs:{viewBox:"0 0 446 410",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M173.26 409.06C77.84 409.06 0.200012 331.43 0.200012 236C0.200012 140.57 77.84 62.94 173.26 62.94C268.68 62.94 346.32 140.57 346.32 236C346.32 331.43 268.69 409.06 173.26 409.06ZM173.26 86.06C90.59 86.06 23.33 153.32 23.33 235.99C23.33 318.66 90.59 385.92 173.26 385.92C255.93 385.92 323.19 318.67 323.19 236C323.19 153.33 255.93 86.07 173.26 86.07V86.06Z"}}),i("path",{attrs:{d:"M173.26 293.77L95.82 216.34L117.04 195.12L173.26 251.35L424 0.600006L445.22 21.81L173.26 293.77Z"}})]),i("h3",{staticClass:"pb-4"},[e._v("Successfully linked to your account!")]),i("div",{staticClass:"col-sm-12 col-md-8 offset-md-2 col-lg-6 offset-lg-3 d-flex flex-column align-center justify-content-center"},[i("saving-animation",{attrs:{errors:e.errorMessages.printer_name,saving:e.saving.printer_name}},[i("div",{staticClass:"printer-name-input"},[i("div",{staticClass:"edit-icon"},[i("i",{staticClass:"fas fa-pen"})]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.verifiedPrinter.name,expression:"verifiedPrinter.name"}],staticClass:"dark",attrs:{type:"text",placeholder:"Printer name"},domProps:{value:e.verifiedPrinter.name},on:{input:[function(t){t.target.composing||e.$set(e.verifiedPrinter,"name",t.target.value)},e.updatePrinterName]}})])]),e._m(0)],1),i("br"),i("br"),i("div",{staticClass:"col-sm-12 col-md-8 offset-md-2 col-lg-6 offset-lg-3 d-flex flex-column align-center justify-content-center"},[e._m(1),e._m(2),e._m(3),i("div",{staticClass:"mt-4"},[i("a",{staticClass:"btn btn-outline-secondary btn-block mx-auto btn",attrs:{href:e.editPrinterUrl}},[e._v("Change Printer Settings")])]),e._m(4)])]):i("div",[i("form-wizard",{attrs:{color:"rgb(var(--color-primary))","step-size":"sm"},scopedSlots:e._u([{key:"footer",fn:function(t){return[i("div",{staticClass:"wizard-footer-left"},[t.activeTabIndex>0?i("wizard-button",{staticClass:"btn btn-link btn-back",nativeOn:{click:function(n){t.prevTab(),e.prevTab()}}},[e._v("< Back")]):e._e()],1),i("div",{staticClass:"wizard-footer-right"},[t.isLastStep?e._e():i("wizard-button",{staticClass:"wizard-footer-right wizard-btn",style:t.fillButtonStyle,nativeOn:{click:function(n){t.nextTab(),e.nextTab()}}},[e._v("Next >")])],1)]}}])},[i("h2",{attrs:{slot:"title"},slot:"title"},[i("svg",{staticClass:"header-img",attrs:{viewBox:"0 0 165 152",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{staticClass:"tone-1",attrs:{d:"M162.703 74.7397C162.703 74.6597 162.643 74.5297 162.573 74.3397C161.403 70.4597 153.253 43.7297 132.123 32.7997C110.123 21.4397 81.0226 16.9397 53.2126 46.3497C17.3626 84.2697 57.8826 125.68 61.1726 151.06H16.1726C-4.90742 111.25 -2.72743 75.1097 7.69257 50.4797C20.1726 21.0897 62.1726 -8.60031 105.753 2.30969C180.713 21.0697 162.703 74.7397 162.703 74.7397Z"}}),i("path",{staticClass:"tone-2",attrs:{d:"M163 72.8212C162.526 71.6245 161.887 69.9878 161.29 68.8218C160.945 67.9524 160.552 67.1022 160.115 66.2748C160.115 66.2748 159.796 65.436 159.785 65.4258C156.88 60.608 154.871 56.5165 150.275 52.6705C146.377 49.3988 142.103 46.597 137.541 44.3238C136.974 44.0374 136.407 43.7509 135.841 43.5055C119.17 35.6804 98.5736 34.2279 80.9447 43.7816C59.926 55.1868 61.8527 72.4223 68.7456 86.3028V86.3846C70.6573 90.1567 72.9056 93.7511 75.4633 97.1249C75.4633 97.1249 75.4633 97.1249 75.4633 97.1249C77.1521 99.3968 78.9648 101.575 80.8932 103.651C88.3321 111.609 95.1529 125.622 99.8306 136.68C102.468 142.929 104.426 148.248 105.384 151H59.823C59.8326 150.963 59.8326 150.924 59.823 150.887C58.5144 125.847 14.9522 83.674 51.704 45.0807C79.5228 15.9081 108.599 20.3679 130.565 31.6298C151.625 42.4519 161.475 68.4535 162.887 72.4121C162.938 72.6064 162.969 72.7599 163 72.8212Z"}})]),e._v(" "+e._s(e.title)+" ")]),e.printerIdToLink?i("tab-content",{attrs:{title:"Open Plugin Settings"}},[i("div",{staticClass:"container"},[i("div",{staticClass:"row justify-content-center pb-3"},[i("div",{staticClass:"col-sm-12 col-lg-8"},[i("div",{staticClass:"text-warning"},[e._v(" Warning: Re-Linking OctoPrint should be your last resort to solve issues. Please make sure you have exhausted all options on "),i("a",{attrs:{href:"https://www.thespaghettidetective.com/help/"}},[e._v("TSD's help website")]),e._v(". ")]),i("ol",[i("li",[e._v("Open OctoPrint in another browser tab. ")]),i("li",[e._v("Select "),i("em",[e._v('"OctoPrint settings menu → Access Anywhere - The Spaghetti Detective"')]),e._v(".")]),i("li",[e._v("Select "),i("em",[e._v('"Troubleshooting → Re-run Wizard"')]),e._v(".")])])])]),i("div",{staticClass:"row justify-content-center"},[i("div",{staticClass:"col-sm-12 col-lg-8 img-container"},[i("img",{staticClass:"mx-auto",attrs:{src:n("754e")}})])])])]):i("tab-content",{attrs:{title:"Install Plugin"}},[i("div",{staticClass:"container"},[i("div",{staticClass:"row justify-content-center pb-3"},[i("div",{staticClass:"col-sm-12 col-lg-8"},[i("ol",[i("li",[e._v("Open OctoPrint in another browser tab. ")]),i("li",[e._v("Select "),i("em",[e._v('"OctoPrint settings menu → Plugin Manager → Get More..."')]),e._v(".")]),i("li",[e._v('Enter "The Spaghetti Detective" to locate the plugin. Click '),i("em",[e._v('"Install"')]),e._v(".")]),i("li",[e._v("Restart OctoPrint when prompted.")])])])]),i("div",{staticClass:"row justify-content-center"},[i("div",{staticClass:"col-sm-12 col-lg-8 img-container"},[i("img",{staticClass:"mx-auto screenshot",attrs:{src:n("842d")},on:{click:function(t){return e.zoomIn(t)}}})])])])]),i("tab-content",{attrs:{title:"Plugin Wizard"}},[i("div",{staticClass:"container"},[i("div",{staticClass:"row justify-content-center pb-3"},[i("div",{staticClass:"col-sm-12 col-lg-8"},[i("ol",[i("li",[e._v("Wait for "),i("em",[e._v('"Access Anywhere - The Spaghetti Detective"')]),e._v(" wizard to popup.")]),i("li",[e._v("Follow the instructions in the wizard.")]),i("li",[e._v("Select "),i("em",[e._v('"Web Setup"')]),e._v(" when asked.")])])])]),i("div",{staticClass:"row justify-content-center"},[i("div",{staticClass:"col-sm-12 col-lg-8 img-container"},[i("img",{staticClass:"mx-auto screenshot",attrs:{src:n("ebff")},on:{click:function(t){return e.zoomIn(t)}}})])])])]),i("tab-content",{attrs:{title:"Enter Code"}},[i("div",{staticClass:"container"},[i("div",{staticClass:"row justify-content-center pb-3"},[i("div",{staticClass:"col-sm-12 col-lg-8  d-flex flex-column align-items-center"},[i("input",{ref:"code",staticClass:"code-btn",attrs:{disabled:""},domProps:{value:""+(e.verificationCode&&e.verificationCode.code)}}),i("small",{staticClass:"mx-auto py-1",class:{"text-muted":!e.copied}},[e._v(e._s(e.copied?"Code copied to system clipboard":"Ctrl-C/Cmd-C to copy the code"))]),i("div",{staticClass:"mx-auto pt-1 pb-4"},[i("span",{staticClass:"text-muted"},[e._v("Code expires in ")]),e._v(e._s(e.timeToExpire))]),i("div",{staticClass:"lead"},[e._v("Enter the "),i("strong",[e._v("6-digit verification code")]),e._v(" in the plugin")])])]),i("div",{staticClass:"row justify-content-center"},[i("div",{staticClass:"col-sm-12 col-lg-8 img-container"},[i("img",{staticClass:"screenshot",attrs:{src:n("5f18")},on:{click:function(t){return e.zoomIn(t)}}}),i("div",{staticClass:"helper mx-auto py-2"},[i("a",{staticClass:"link font-weight-bold",on:{click:e.showVerificationCodeHelpModal}},[e._v("Can't find the page to enter the 6-digit code?")])])])])])])],1),e._m(5)],1)])],1)},Yt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"text-muted mx-auto text-center font-weight-light"},[e._v("Give your printer a shiny name.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-4"},[n("a",{staticClass:"btn-primary btn-block mx-auto btn btn-lg",attrs:{href:"/printers/"}},[e._v("Go Check Out Printer Feed!")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-5"},[n("a",{staticClass:"btn btn-outline-secondary btn-block mx-auto btn",attrs:{href:"/user_preferences/"}},[e._v("Add Phone Number")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"text-muted mx-auto text-center font-weight-light"},[e._v("Receive text (SMS) in case of print failures.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"text-muted mx-auto text-center font-weight-light"},[e._v("You can always change it later.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"helper col-sm-12"},[e._v("Need help? Check out the "),n("a",{attrs:{href:"https://help.thespaghettidetective.com/kb/guide/en/setup-the-spaghetti-detective-using-the-web-app-dbCcgiR0Tr/"}},[e._v("step-by-step set up guide.")])])])}],Xt=(n("841c"),n("2b3d"),n("2ee4")),Kt=(n("da93"),n("99b8")),en=n.n(Kt),tn={components:{FormWizard:Xt["FormWizard"],TabContent:Xt["TabContent"],WizardButton:Xt["WizardButton"],PullToReveal:vt["a"],Navbar:c["a"],SavingAnimation:Vt["a"]},data:function(){return{theme:en.a,verificationCode:null,verifiedPrinter:null,onVerificationStep:!1,copied:!1,saving:{},errorMessages:{},delayedSubmit:{printer_name:{delay:1e3,timeoutId:null}}}},computed:{printerIdToLink:function(){return new URLSearchParams(window.location.search.substring(1)).get("printerId")},title:function(){return this.printerIdToLink?"Re-Link OctoPrint":"Link OctoPrint"},editPrinterUrl:function(){return"/printers/".concat(this.verifiedPrinter.id,"/")},expiryMoment:function(){return this.verificationCode?D()(this.verificationCode.expired_at):null},timeToExpire:function(){return this.expiryMoment?D.a.duration(this.expiryMoment.diff(D()())).humanize():"-"}},methods:{setSavingStatus:function(e,t){t&&delete this.errorMessages[e],this.$set(this.saving,e,t)},updatePrinterName:function(){var e=this;if("name"in this.verifiedPrinter&&this.verifiedPrinter.name){var t=this.delayedSubmit["printer_name"];return t["timeoutId"]&&clearTimeout(t["timeoutId"]),void(this.delayedSubmit["printer_name"]["timeoutId"]=setTimeout((function(){return e.setSavingStatus("printer_name",!0),f.a.patch(y["a"].printer(e.verifiedPrinter.id),{name:e.verifiedPrinter.name}).catch((function(e){console.log(e)})).then((function(){e.setSavingStatus("printer_name",!1)}))}),t["delay"]))}var n=this.delayedSubmit["printer_name"];n["timeoutId"]&&clearTimeout(n["timeoutId"])},prevTab:function(){document.querySelector(".wizard-nav.wizard-nav-pills li.active .wizard-icon-circle").classList.remove("checked"),this.onVerificationStep="step-PluginWizard1"===document.querySelector(".wizard-nav.wizard-nav-pills li.active .wizard-icon-circle").id},nextTab:function(){var e=this;if(document.querySelector(".wizard-nav.wizard-nav-pills li.active .wizard-icon-circle").classList.add("checked"),this.onVerificationStep="step-PluginWizard1"===document.querySelector(".wizard-nav.wizard-nav-pills li.active .wizard-icon-circle").id,this.onVerificationStep){this.codeInterval||(this.getVerificationCode(),this.codeInterval=setInterval((function(){e.getVerificationCode()}),5e3));var t=this.copyCode,n=!1,i=17,r=91,a=67;document.addEventListener("keydown",(function(e){e.keyCode!=i&&e.keyCode!=r||(n=!0)})),document.addEventListener("keyup",(function(e){e.keyCode!=i&&e.keyCode!=r||(n=!1)})),document.addEventListener("keydown",(function(e){n&&e.keyCode==a&&t()}))}},verificationCodeUrl:function(){var e=y["a"].verificationCode();return this.verificationCode?this.verificationCode.verified_at||D()().isBefore(this.expiryMoment)?"".concat(e).concat(this.verificationCode.id,"/"):e:this.printerIdToLink?"".concat(e,"?printer_id=").concat(this.printerIdToLink):e},copyCode:function(){if(this.onVerificationStep){var e=document.createElement("textarea");e.value=this.verificationCode.code,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),this.copied=!0}catch(t){console.error("Fallback: Oops, unable to copy",t)}document.body.removeChild(e)}},getVerificationCode:function(){var e=this;f.a.get(this.verificationCodeUrl()).then((function(t){t.data&&t.data&&(e.verificationCode=t.data,e.verificationCode.verified_at&&(e.verifiedPrinter=t.data.printer,clearInterval(e.codeInterval)))}))},showVerificationCodeHelpModal:function(){this.$swal.fire({title:"Can't find the page to enter the 6-digit code?",html:'<p>The 6-digit code needs to be entered in The Spaghetti Detective plugin in OctoPrint. There are a few reasons why you can\'t find this page:</p>\n        <p><ul>\n        <li style="margin: 10px 0;">You don\'t have the plugin installed or you haven\'t restarted OctoPrint after installation. Click <a href="/printers/wizard/">here</a> to walk through the process again.</li>\n        <li style="margin: 10px 0;">The installed plugin is on a version earlier than 1.5.0. You need to upgrade the plugin to <b>1.5.0</b> or later.</li>\n        <li style="margin: 10px 0;">Still no dice? Check out the step-by-step <a href="https://help.thespaghettidetective.com/kb/guide/en/setup-the-spaghetti-detective-using-the-web-app-dbCcgiR0Tr/">set up guide</a>.</li>\n        </ul></p>',customClass:{container:"dark-backdrop"}})},zoomIn:function(e){e.target.classList.toggle("zoomedIn")}}},nn=tn,rn=(n("ed13"),n("020c"),Object(Y["a"])(nn,Qt,Yt,!1,null,"f575f41c",null)),an=rn.exports,on=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container my-5"},[n("pull-to-reveal",[n("navbar",{attrs:{"view-name":"app.views.web_views.printer_control"}})],1),n("div",{staticClass:"row justify-content-center",staticStyle:{margin:"-24px -31px 0px"}},[e.printer?n("div",{staticClass:"col-sm-12 col-lg-8 printer-card"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[n("div",{staticClass:"title-box"},[n("div",{staticClass:"printer-name"},[e._v(e._s(e.printer.name))])])]),n("streaming-box",{attrs:{printer:e.printer,webrtc:e.webrtc}}),n("div",{staticClass:"card-body",class:{overlay:!e.printer.isIdle()}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.printer.isIdle(),expression:"!printer.isIdle()"}],staticClass:"overlay-top text-center",staticStyle:{left:"0",width:"100%",top:"50%","margin-top":"-85px"}},[n("div",[e._v("Printer controls are disabled")]),n("div",[e._v("because the printer is not idle.")])]),n("div",{staticClass:"printer-controls"},[n("div",{staticClass:"xy-controls"},[n("button",{staticClass:"btn",attrs:{type:"button","data-axis":"y","data-dir":"up"},on:{click:function(t){return e.control(e.axis.y,e.directions.up)}}},[n("i",{staticClass:"fas fa-angle-up fa-lg"})]),n("div",{staticClass:"x-controls"},[n("button",{staticClass:"btn",attrs:{type:"button","data-axis":"x","data-dir":"down"},on:{click:function(t){return e.control(e.axis.x,e.directions.down)}}},[n("i",{staticClass:"fas fa-angle-left fa-lg"})]),n("button",{staticClass:"btn",attrs:{type:"button","data-axis":"xy","data-dir":"home"},on:{click:function(t){return e.control(e.axis.xy,e.directions.home)}}},[n("i",{staticClass:"fas fa-home fa-lg"})]),n("button",{staticClass:"btn",attrs:{type:"button","data-axis":"x","data-dir":"up"},on:{click:function(t){return e.control(e.axis.x,e.directions.up)}}},[n("i",{staticClass:"fas fa-angle-right fa-lg"})])]),n("button",{staticClass:"btn",attrs:{type:"button","data-axis":"y","data-dir":"down"},on:{click:function(t){return e.control(e.axis.y,e.directions.down)}}},[n("i",{staticClass:"fas fa-angle-down fa-lg"})])]),n("div",{staticClass:"z-controls"},[n("button",{staticClass:"btn",attrs:{type:"button","data-axis":"z","data-dir":"up"},on:{click:function(t){return e.control(e.axis.z,e.directions.up)}}},[n("i",{staticClass:"fas fa-angle-up fa-lg"})]),n("button",{staticClass:"btn",attrs:{type:"button","data-axis":"z","data-dir":"home"},on:{click:function(t){return e.control(e.axis.z,e.directions.home)}}},[n("i",{staticClass:"fas fa-home fa-lg"})]),n("button",{staticClass:"btn",attrs:{type:"button","data-axis":"z","data-dir":"down"},on:{click:function(t){return e.control(e.axis.z,e.directions.down)}}},[n("i",{staticClass:"fas fa-angle-down fa-lg"})])])]),n("br"),n("div",{staticClass:"control-options"},[n("div",{staticClass:"btn-group btn-group-toggle",attrs:{"data-toggle":"buttons"}},e._l(e.jogDistanceOptions,(function(t){return n("label",{key:t,staticClass:"btn",class:{active:e.jogDistance==t},on:{click:function(n){e.jogDistance=t}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.jogDistance,expression:"jogDistance"}],attrs:{type:"radio",name:"jogDistance",autocomplete:"off"},domProps:{value:t,checked:e._q(e.jogDistance,t)},on:{change:function(n){e.jogDistance=t}}}),e._v(" "+e._s(t)+"mm ")])})),0)])])],1)]):e._e()])],1)},sn=[],cn={x:"x",y:"y",z:"z",xy:["x","y"]},ln={up:1,down:-1,home:0},dn={name:"PrinterControlPage",components:{StreamingBox:K,PullToReveal:vt["a"],Navbar:c["a"]},data:function(){return{axis:cn,directions:ln,user:null,printerId:null,printer:null,webrtc:null,jogDistance:10,jogDistanceOptions:[.1,1,10,100]}},created:function(){var e=this;this.user=JSON.parse(document.querySelector("#user-json").text),this.printerId=Ot()(window.location.pathname,"/").slice(-3,-2).pop();var t=localStorage.getItem("mm-per-step-".concat(this.printerId));this.jogDistance=t||this.jogDistance,this.webrtc=z(this.user.is_pro),this.printerComm=M(this.printerId,y["a"].printerWebSocket(this.printerId),(function(t){e.printer=Object(w["d"])(t,e.printer),e.webrtc&&!e.webrtc.initialized&&(e.webrtc.openForPrinter(e.printer.id,e.printer.auth_token),e.printerComm.setWebRTC(e.webrtc))})),this.printerComm.connect()},methods:{control:function(e,t){var n=[],i="jog";t===this.directions.home?(n.push(e),i="home"):n.push(Object(u["a"])({},e,t*this.jogDistance));var r={func:i,target:"_printer",args:n};this.printerComm.passThruToPrinter(r)}},watch:{jogDistance:function(e){localStorage.setItem("mm-per-step-".concat(this.printerId),e)}}},un=dn,pn=(n("cd51"),Object(Y["a"])(un,on,sn,!1,null,"5ea0e861",null)),fn=pn.exports,vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("pull-to-reveal",[n("navbar",{attrs:{"view-name":"app.views.web_views.gcodes"}})],1),e.user.is_pro?n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"row my-3 justify-content-center"},[n("div",{staticClass:"col-sm-12 col-lg-10"},[n("vue-dropzone",{ref:"gcodesDropzone",staticClass:"upload-box",attrs:{id:"dropzone",options:e.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-queue-complete":e.gcodeUploadSuccess}},[n("div",{staticClass:"dz-message needsclick"},[n("i",{staticClass:"fas fa-upload fa-2x"}),e._v(" "),n("br"),e._v(" Drop files here or click to upload."),n("br"),e._v(" G-Code files only. Up to 200MB each. ")])])],1)]),n("div",{staticClass:"row justify-content-center mb-2"},[n("div",{staticClass:"col-sm-12 col-lg-10"},[n("div",{staticClass:"gcodes-wrapper"},[n("div",{staticClass:"control-panel"},[n("search-input",{staticClass:"search-input",model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),n("div",{staticClass:"sorting-panel"},[n("div",{staticClass:"sorting-option",class:{active:e.activeSorting===e.sorting.NAME},on:{click:function(t){return e.updateSorting(e.sorting.NAME)}}},[n("span",{staticClass:"text"},[e._v("File name")]),n("div",{staticClass:"direction"},[e.activeSorting===e.sorting.NAME&&e.sortDirection===e.direction.DESC?n("i",{staticClass:"fas fa-arrow-down"}):n("i",{staticClass:"fas fa-arrow-up"})])]),n("div",{staticClass:"sorting-option",class:{active:e.activeSorting===e.sorting.SIZE},on:{click:function(t){return e.updateSorting(e.sorting.SIZE)}}},[n("span",{staticClass:"text"},[e._v("File size")]),n("div",{staticClass:"direction"},[e.activeSorting===e.sorting.SIZE&&e.sortDirection===e.direction.DESC?n("i",{staticClass:"fas fa-arrow-down"}):n("i",{staticClass:"fas fa-arrow-up"})])]),n("div",{staticClass:"sorting-option",class:{active:e.activeSorting===e.sorting.UPLOADED},on:{click:function(t){return e.updateSorting(e.sorting.UPLOADED)}}},[n("span",{staticClass:"text"},[e._v("Uploaded")]),n("div",{staticClass:"direction"},[e.activeSorting===e.sorting.UPLOADED&&e.sortDirection===e.direction.DESC?n("i",{staticClass:"fas fa-arrow-down"}):n("i",{staticClass:"fas fa-arrow-up"})])])]),n("div",{staticClass:"gcode-items-wrapper"},e._l(e.gcodesToShow,(function(t){return n("div",{key:t.id,staticClass:"item"},[n("div",{staticClass:"item-info"},[n("div",{staticClass:"filename"},[e._v(e._s(t.filename))]),n("div",{staticClass:"filesize"},[e._v(e._s(t.filesize))]),n("div",{staticClass:"uploaded"},[e._v(e._s(t.created_at.fromNow()))])]),n("div",{staticClass:"remove-button-wrapper"},[n("div",{staticClass:"remove-button",on:{click:function(n){return e.removeItem(t.id)}}},[n("i",{staticClass:"far fa-trash-alt"})])])])})),0),n("mugen-scroll",{staticClass:"text-center p-4",attrs:{handler:e.fetchGCodes,"should-handle":!e.loading}},[e.noMoreData?n("div",{staticClass:"text-center p-2"},[e._v("End of your G-Codes list.")]):e._e(),e.noMoreData?e._e():n("b-spinner",{attrs:{label:"Loading..."}})],1)],1)])])])]):n("div",{staticClass:"row my-3 justify-content-center"},[e._m(0)])],1)},mn=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-sm-11 col-md-10 col-lg-8"},[n("div",{staticClass:"form-container printer-settings"},[n("h5",{staticClass:"mb-5"},[e._v("Wait! You need to "),n("a",{attrs:{href:"/ent/pricing/"}},[e._v("upgrade to Pro plan")]),e._v(" to upload G-Code files or start prints remotely. ")]),n("p",[e._v("G-Code remote upload and printing is a Pro feature.")]),n("p",[n("a",{attrs:{href:"https://help.thespaghettidetective.com/kb/guide/en/pro-plan-vs-free-plan-My6yGUkT4T/Steps/294250"}},[e._v("Running TSD incurs non-trivial amount of costs")]),e._v(". With little more than 1 Starbucks per month, you can upgrade to a Pro account and help us run TSD smoothly.")]),n("p",[n("a",{attrs:{href:"/ent/pricing/"}},[e._v("Check out Pro pricing >>>")])])])])}],gn=(n("a434"),n("92c3")),hn=n.n(gn),bn=(n("1e3f"),n("996c")),wn=n.n(bn),yn={NAME:1,SIZE:2,UPLOADED:3},Cn={ASC:1,DESC:-1},_n={name:"GCodesPage",components:{Navbar:c["a"],PullToReveal:vt["a"],vueDropzone:hn.a,MugenScroll:wn.a,SearchInput:xe},props:{csrf:{type:String,requeired:!0}},data:function(){return{dropzoneOptions:{withCredentials:!0,maxFilesize:200,timeout:36e5,acceptedFiles:".g,.gcode,.gco",url:"upload/",headers:{"X-CSRFToken":this.csrf}},searchText:"",activeSorting:yn.UPLOADED,sortDirection:Cn.DESC,sorting:yn,direction:Cn,gcodes:[],currentPage:1,loading:!1,noMoreData:!1}},computed:{gcodesToShow:function(){var e=this.gcodes;if(!e)return[];var t=this.searchText.toLowerCase();e=e.filter((function(e){return e.filename.toLowerCase().indexOf(t)>-1}));var n=this.sortDirection;switch(this.activeSorting){case yn.NAME:e.sort((function(e,t){var i=e.filename.toUpperCase(),r=t.filename.toUpperCase();return i<r?n===Cn.ASC?-1:1:i>r?n===Cn.ASC?1:-1:0}));break;case yn.SIZE:e.sort((function(e,t){return n===Cn.ASC?e.num_bytes-t.num_bytes:t.num_bytes-e.num_bytes}));break;case yn.UPLOADED:e.sort((function(e,t){var i=e.created_at.unix(),r=t.created_at.unix();return n===Cn.ASC?i-r:r-i}));break}return e}},created:function(){this.user=JSON.parse(document.querySelector("#user-json").text),this.fetchGCodes()},methods:{gcodeUploadSuccess:function(){this.$refs.gcodesDropzone.removeAllFiles(),this.gcodes=[],this.currentPage=1,this.noMoreData=!1,this.fetchGCodes()},fetchGCodes:function(){var e=this;if(!this.noMoreData)return this.loading=!0,f.a.get(y["a"].gcodes(this.currentPage)).then((function(t){e.loading=!1,e.noMoreData=null===t.data.next;var n,i=t.data.results;i&&((n=e.gcodes).push.apply(n,Object(k["a"])(i.map((function(e){return Object(w["b"])(e)})))),e.currentPage+=1)})).catch((function(t){console.log(t),e.noMoreData=!0}))},updateSorting:function(e){this.activeSorting===e?this.sortDirection=-this.sortDirection:(this.activeSorting=e,this.sortDirection=Cn.ASC)},removeItem:function(e){var t=this;f.a.delete(y["a"].gcode(e)).then((function(){for(var n=0;n<t.gcodes.length;n++){var i=t.gcodes[n];if(i.id===e){t.gcodes.splice(n,1);var r="";r+='<h6 class="text-danger">'.concat(i.filename," successfully deleted!</h6>"),t.$swal.Toast.fire({html:r})}}}))}}},kn=_n,Sn=(n("8bc7"),Object(Y["a"])(kn,vn,mn,!1,null,"26ec102e",null)),xn=Sn.exports;Object(s["b"])(),Object(o["a"])(i["default"]),i["default"].use(a["a"]),i["default"].use(r["a"]),document.getElementById("navbar-mount")&&new i["default"]({components:{Navbar:c["a"]}}).$mount("#navbar-mount"),document.getElementById("printer-list-mount")&&new i["default"]({components:{PrinterListPage:St}}).$mount("#printer-list-mount"),document.getElementById("shared-printer-mount")&&new i["default"]({components:{SharedPrinterPage:It}}).$mount("#shared-printer-mount"),document.getElementById("printer-settings-mount")&&new i["default"]({components:{PrinterSettingsPage:Zt}}).$mount("#printer-settings-mount"),document.getElementById("printer-wizard-mount")&&new i["default"]({components:{PrinterWizardPage:an}}).$mount("#printer-wizard-mount"),document.getElementById("printer-control-mount")&&new i["default"]({components:{PrinterControlPage:fn}}).$mount("#printer-control-mount"),document.getElementById("share-printer-mount")&&new i["default"]({components:{SharePrinter:Ze}}).$mount("#share-printer-mount"),document.getElementById("gcodes-page-mount")&&new i["default"]({components:{GCodesPage:xn}}).$mount("#gcodes-page-mount")},"08e1":function(e,t,n){"use strict";var i=n("a440"),r=n.n(i);r.a},"0906":function(e,t,n){e.exports=n.p+"img/logo-square_christmas.png"},"0d29":function(e,t,n){e.exports=n.p+"img/detective-hour-inverse.png"},"0fb7":function(e,t,n){e.exports=n.p+"img/logo-square-inverted_newyear.png"},"10e7":function(e,t,n){e.exports=n.p+"img/logo_christmas.png"},"14be":function(e,t,n){"use strict";var i=n("957e"),r=n.n(i);r.a},"15dc":function(e,t,n){},"16b7":function(e,t,n){e.exports=n.p+"img/apple-touch-icon.png"},"17d7":function(e,t,n){e.exports=n.p+"img/octoprint-tunnel.png"},1807:function(e,t,n){"use strict";n("99af"),n("a15b");var i=n("0b49"),r=n.n(i),a=n("dd61"),o=n.n(a);t["a"]={publicTimelapse:function(){return"/api/v1/publictimelapse/"},printShotFeedback:function(e,t){return"/api/v1/printshotfeedbacks/".concat(e,"/?print_id=").concat(t)},print:function(e){return"/api/v1/prints/".concat(e,"/")},prints:function(){return"/api/v1/prints/"},printsBulkDelete:function(){return"/api/v1/prints/bulk_delete/"},printAlertOverwrite:function(e){return"/api/v1/prints/".concat(e,"/alert_overwrite/")},printers:function(){return"/api/v1/printers/"},printer:function(e){return"/api/v1/printers/".concat(e,"/")},printerAction:function(e,t){return"/api/v1/printers/".concat(e).concat(t)},pubPrinter:function(){return"/api/v1p/printer/"},gcodes:function(e,t){return"/api/v1/gcodes/?page=".concat(e,"&page_size=").concat(t||24)},gcode:function(e){return"/api/v1/gcodes/".concat(e,"/")},tunnelUsage:function(){return"/api/v1/tunnelusage/"},verificationCode:function(){return"/api/v1/onetimeverificationcodes/"},user:function(){return"/api/v1/users/me/"},sharedResources:function(e){return"/api/v1/sharedresources/?"+o()(r()(e),(function(e){return e.join("=")})).join("&")},sharedResource:function(e){return"/api/v1/sharedresources/".concat(e,"/")},printerControl:function(e){return"/printers/".concat(e,"/control/")},printerWebSocket:function(e){return"/ws/web/".concat(e,"/")},printerSharedWebSocket:function(e){return"/ws/share_token/web/".concat(e,"/")},printerWizard:function(e){return"/printers/wizard/?printerId=".concat(e)}}},"193f":function(e,t,n){"use strict";var i=n("5dbb"),r=n.n(i);r.a},"223c":function(e,t,n){e.exports=n.p+"img/octo-inverted.png"},2365:function(e,t,n){e.exports=n.p+"img/tail-spin_light.svg"},2601:function(e,t,n){"use strict";var i=n("9dc3"),r=n.n(i);r.a},2773:function(e,t,n){},"28c6":function(e,t){throw new Error("Module parse failed: Unexpected character '\0' (1:0)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},"2a22":function(e,t,n){},"305b":function(e,t,n){e.exports=n.p+"img/navbar-brand_dark.png"},3293:function(e,t,n){e.exports=n.p+"img/logo_square_newyear.png"},"3c33":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i=function(e,t){var n=localStorage.getItem(e)||t;try{return JSON.parse(n)}catch(i){return n}},r=function(e,t){return localStorage.setItem(e,t)}},"3ce2":function(e,t,n){e.exports=n.p+"img/cross.svg"},"44f7":function(e,t,n){},"45b6":function(e,t,n){"use strict";var i=n("15dc"),r=n.n(i);r.a},"471f":function(e,t,n){"use strict";var i=n("6e31"),r=n.n(i);r.a},"502a":function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return v}));n("caad"),n("2532");var i=n("f3f3"),r=n("c1df"),a=n.n(r),o=n("9b02"),s=n.n(o),c=n("49d5"),l=n.n(c),d=function(e){return e?a()(e):null},u=function(e){return e.ended_at=d(e.cancelled_at||e.finished_at),e.started_at=d(e.started_at),e.uploaded_at=d(e.uploaded_at),e.has_alerts=Boolean(e.alerted_at),e},p=function(e){return e.created_at=d(e.created_at),e.updated_at=d(e.updated_at),e.deleted=d(e.deleted),e.filesize=l()(e.num_bytes),e},f=function(e,t){var n={createdAt:function(){return d(this.created_at)},isOffline:function(){return null===s()(this,"status",null)},isPaused:function(){return s()(this,"status.state.flags.paused",!1)},isIdle:function(){return"Operational"===s()(this,"status.state.text","")},isDisconnected:function(){return s()(this,"status.state.flags.closedOrError",!0)},isPrinting:function(){return!this.isDisconnected()&&"Operational"!==s()(this,"status.state.text","")},inTransientState:function(){return!this.hasError()&&s()(this,"status.state.text","").includes("ing")&&!s()(this,"status.state.text","").includes("Printing")},hasError:function(){return s()(this,"status.state.flags.error")||s()(this,"status.state.text","").toLowerCase().includes("error")},alertUnacknowledged:function(){return s()(this,"current_print.alerted_at")&&a()(s()(this,"current_print.alerted_at")).isAfter(a()(s()(this,"current_print.alert_acknowledged_at")||0))}};return t?(s()(t,"status._ts",-1)>s()(e,"status._ts",s()(t,"status._ts",0))&&delete e.status,Object(i["a"])(Object(i["a"])(Object(i["a"])({},t),e),n)):Object(i["a"])(Object(i["a"])({},e),n)},v=function(e,t,n){var i=Math.round(e.length*t),r=n?"p":"fields.normalized_p";return s()(e[i],"".concat(r),0)}},5082:function(e,t,n){},5490:function(e,t,n){e.exports=n.p+"img/checkmark.png"},5820:function(e,t,n){e.exports=n.p+"img/logo-inverted_newyear.png"},"5dbb":function(e,t,n){},"5f18":function(e,t,n){e.exports=n.p+"img/plugin_verification_code.png"},6:function(e,t,n){e.exports=n("0548")},6208:function(e,t,n){},"648b":function(e,t,n){"use strict";n.d(t,"a",(function(){return de})),n.d(t,"d",(function(){return ue})),n.d(t,"b",(function(){return me})),n.d(t,"c",(function(){return ge}));n("99af"),n("4160"),n("b0c0"),n("d3b7"),n("ac1f"),n("159b"),n("ddb0");var i,r,a,o,s,c,l,d,u,p,f,v,m,g,h,b,w,y,C,_,k,S,x,A,T,O,D,P,j,E,I,R,F,L,M,B,V,N,z,W,$,U,q,G,H,J,Z,Q,Y,X,K,ee,te,ne,ie,re,ae,oe,se,ce=n("fc11"),le=n("a026"),de={Light:"Light",Dark:"Dark",System:"System"},ue=le["default"].observable({value:de.Dark,system:!1}),pe=[{name:"bg",values:(i={},Object(ce["a"])(i,de.Light,"#EBEBEB"),Object(ce["a"])(i,de.Dark,"#233141"),i)},{name:"bg-body",values:(r={},Object(ce["a"])(r,de.Light,"#FFFFFF"),Object(ce["a"])(r,de.Dark,"#2D3E4F"),r)},{name:"bg-secondary",values:(a={},Object(ce["a"])(a,de.Light,"#A67DF6"),Object(ce["a"])(a,de.Dark,"#505D6D"),a)},{name:"bg-video",values:(o={},Object(ce["a"])(o,de.Light,"#ADB7C3"),Object(ce["a"])(o,de.Dark,"#000000"),o)},{name:"bg-overlay",values:(s={},Object(ce["a"])(s,de.Light,"#FAFAFA"),Object(ce["a"])(s,de.Dark,"#000000"),s)},{name:"footer-bg",values:(c={},Object(ce["a"])(c,de.Light,"#ACB6C2"),Object(ce["a"])(c,de.Dark,"#000000"),c)},{name:"footer-text",values:(l={},Object(ce["a"])(l,de.Light,"#405464"),Object(ce["a"])(l,de.Dark,"#989898"),l)},{name:"input-bg",values:(d={},Object(ce["a"])(d,de.Light,"#E9E9E9"),Object(ce["a"])(d,de.Dark,"#FFFFFF"),d)},{name:"input-text",values:(u={},Object(ce["a"])(u,de.Light,"#23304B"),Object(ce["a"])(u,de.Dark,"#495057"),u)},{name:"input-dark-bg",values:(p={},Object(ce["a"])(p,de.Light,"#EBEBEB"),Object(ce["a"])(p,de.Dark,"#4E5D6C"),p)},{name:"icon-active",values:(f={},Object(ce["a"])(f,de.Light,"#A680E5"),Object(ce["a"])(f,de.Dark,"#4B5B69"),f)},{name:"icon-disabled",values:(v={},Object(ce["a"])(v,de.Light,"#D3BEF5"),Object(ce["a"])(v,de.Dark,"#A8AEB6"),v)},{name:"white-primary",values:(m={},Object(ce["a"])(m,de.Light,"#FFFFFF"),Object(ce["a"])(m,de.Dark,"#9965f4"),m)},{name:"primary-white",values:(g={},Object(ce["a"])(g,de.Light,"#9965f4"),Object(ce["a"])(g,de.Dark,"#FFFFFF"),g)},{name:"primary-light",values:(h={},Object(ce["a"])(h,de.Light,"#9965f4"),Object(ce["a"])(h,de.Dark,"#EBEBEB"),h)},{name:"text",values:(b={},Object(ce["a"])(b,de.Light,"#28303A"),Object(ce["a"])(b,de.Dark,"#EBEBEB"),b)},{name:"text-subdued",values:(w={},Object(ce["a"])(w,de.Light,"#7E8285"),Object(ce["a"])(w,de.Dark,"#FFFFFF"),w)},{name:"text-inverted",values:(y={},Object(ce["a"])(y,de.Light,"#EBEBEB"),Object(ce["a"])(y,de.Dark,"#28303A"),y)},{name:"color",values:(C={},Object(ce["a"])(C,de.Light,"#FFFFFF"),Object(ce["a"])(C,de.Dark,"#FFFFFF"),C)},{name:"color-2",values:(_={},Object(ce["a"])(_,de.Light,"#CCCCCC"),Object(ce["a"])(_,de.Dark,"#CCCCCC"),_)},{name:"primary",values:(k={},Object(ce["a"])(k,de.Light,"#9965f4"),Object(ce["a"])(k,de.Dark,"#9965f4"),k)},{name:"gray-100",values:(S={},Object(ce["a"])(S,de.Light,"#28303A"),Object(ce["a"])(S,de.Dark,"#EBEBEB"),S)},{name:"gray-200",values:(x={},Object(ce["a"])(x,de.Light,"#FFFFFF"),Object(ce["a"])(x,de.Dark,"#4E5D6C"),x)},{name:"gray-200-2",values:(A={},Object(ce["a"])(A,de.Light,"#cccccc"),Object(ce["a"])(A,de.Dark,"#4E5D6C"),A)},{name:"gray-200-hover",values:(T={},Object(ce["a"])(T,de.Light,"#9965f4"),Object(ce["a"])(T,de.Dark,"#596a7b"),T)},{name:"gray-600",values:(O={},Object(ce["a"])(O,de.Light,"#868e96"),Object(ce["a"])(O,de.Dark,"#868e96"),O)},{name:"form-bg",values:(D={},Object(ce["a"])(D,de.Light,"#FFFFFF"),Object(ce["a"])(D,de.Dark,"#2b3e50"),D)},{name:"body-bg",values:(P={},Object(ce["a"])(P,de.Light,"#FFFFFF"),Object(ce["a"])(P,de.Dark,"#2B3E50"),P)},{name:"body-bg-darker",values:(j={},Object(ce["a"])(j,de.Light,"#f6f9fc"),Object(ce["a"])(j,de.Dark,"#2B3E50"),j)},{name:"bg-dark",values:(E={},Object(ce["a"])(E,de.Light,"#f5f5f5"),Object(ce["a"])(E,de.Dark,"#293b4d"),E)},{name:"white",values:(I={},Object(ce["a"])(I,de.Light,"#000000"),Object(ce["a"])(I,de.Dark,"#FFFFFF"),I)},{name:"dark-white",values:(R={},Object(ce["a"])(R,de.Light,"#2B3E50"),Object(ce["a"])(R,de.Dark,"#FFFFFF"),R)},{name:"black",values:(F={},Object(ce["a"])(F,de.Light,"#FFFFFF"),Object(ce["a"])(F,de.Dark,"#000000"),F)},{name:"success",values:(L={},Object(ce["a"])(L,de.Light,"#5cb85c"),Object(ce["a"])(L,de.Dark,"#5cb85c"),L)},{name:"danger",values:(M={},Object(ce["a"])(M,de.Light,"#df706d"),Object(ce["a"])(M,de.Dark,"#d9534f"),M)},{name:"border",values:(B={},Object(ce["a"])(B,de.Light,"#abb6c2"),Object(ce["a"])(B,de.Dark,"#666666"),B)},{name:"primary-l-12",values:(V={},Object(ce["a"])(V,de.Light,"#9965f4"),Object(ce["a"])(V,de.Dark,"#bf9ef8"),V)},{name:"primary-l-10",values:(N={},Object(ce["a"])(N,de.Light,"#b995f7"),Object(ce["a"])(N,de.Dark,"#b995f7"),N)},{name:"primary-l-7",values:(z={},Object(ce["a"])(z,de.Light,"#af86f6"),Object(ce["a"])(z,de.Dark,"#af86f6"),z)},{name:"primary-l-5",values:(W={},Object(ce["a"])(W,de.Light,"#a97df6"),Object(ce["a"])(W,de.Dark,"#a97df6"),W)},{name:"primary-d-8",values:($={},Object(ce["a"])($,de.Light,"#803ff1"),Object(ce["a"])($,de.Dark,"#803ff1"),$)},{name:"primary-d-10",values:(U={},Object(ce["a"])(U,de.Light,"#7935f1"),Object(ce["a"])(U,de.Dark,"#7935f1"),U)},{name:"primary-d-20",values:(q={},Object(ce["a"])(q,de.Light,"#5d10e3"),Object(ce["a"])(q,de.Dark,"#5d10e3"),q)},{name:"primary-d-35",values:(G={},Object(ce["a"])(G,de.Light,"#400b9b"),Object(ce["a"])(G,de.Dark,"#400b9b"),G)},{name:"body-bg-l-10",values:(H={},Object(ce["a"])(H,de.Light,"#e6e6e6"),Object(ce["a"])(H,de.Dark,"#3d5871"),H)},{name:"body-bg-l-5p",values:(J={},Object(ce["a"])(J,de.Light,"#F1F1F1"),Object(ce["a"])(J,de.Dark,"#344b61"),J)},{name:"body-bg-l-3",values:(Z={},Object(ce["a"])(Z,de.Light,"#FFFFFF"),Object(ce["a"])(Z,de.Dark,"#30465a"),Z)},{name:"body-bg-d-5",values:(Q={},Object(ce["a"])(Q,de.Light,"#f2f2f2"),Object(ce["a"])(Q,de.Dark,"#22313f"),Q)},{name:"body-bg-d-10",values:(Y={},Object(ce["a"])(Y,de.Light,"#e6e6e6"),Object(ce["a"])(Y,de.Dark,"#19242f"),Y)},{name:"body-bg-d-10-darker",values:(X={},Object(ce["a"])(X,de.Light,"#b8b8b8"),Object(ce["a"])(X,de.Dark,"#19242f"),X)},{name:"body-bg-d-10-lighter",values:(K={},Object(ce["a"])(K,de.Light,"#E7E7E7"),Object(ce["a"])(K,de.Dark,"#252F3A"),K)},{name:"gray-100-d-20",values:(ee={},Object(ce["a"])(ee,de.Light,"#9f9f9f"),Object(ce["a"])(ee,de.Dark,"#b8b8b8"),ee)},{name:"gray-100-d-30",values:(te={},Object(ce["a"])(te,de.Light,"#b8b8b8"),Object(ce["a"])(te,de.Dark,"#9f9f9f"),te)},{name:"white-d-60",values:(ne={},Object(ce["a"])(ne,de.Light,"#9965f4"),Object(ce["a"])(ne,de.Dark,"#666666"),ne)},{name:"bg-dark-d-10",values:(ie={},Object(ce["a"])(ie,de.Light,"#9A65F4"),Object(ce["a"])(ie,de.Dark,"#17222c"),ie)},{name:"icon-tunneling-tone-1",values:(re={},Object(ce["a"])(re,de.Light,"#4e5d6c"),Object(ce["a"])(re,de.Dark,"#EAEAEA"),re)},{name:"icon-tunneling-tone-2",values:(ae={},Object(ce["a"])(ae,de.Light,"#1d2935"),Object(ce["a"])(ae,de.Dark,"#CDCDCD"),ae)}],fe=[{name:"logo-bg",values:(oe={},Object(ce["a"])(oe,de.Light,'url("/static/img/logo-bg/logo-bg_light.svg")'),Object(ce["a"])(oe,de.Dark,'url("/static/img/logo-bg/logo-bg_dark.svg")'),oe)},{name:"tail-spin",values:(se={},Object(ce["a"])(se,de.Light,'url("/static/img/tail-spin/tail-spin_light.svg")'),Object(ce["a"])(se,de.Dark,'url("/static/img/tail-spin/tail-spin_dark.svg")'),se)}];function ve(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t||console.log("Wrong HEX value!"),[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}function me(){console.log("Init theme");var e=localStorage.getItem("colorTheme"),t=e===de.System;t&&(e="not all"!==window.matchMedia("(prefers-color-scheme)").media&&window.matchMedia("(prefers-color-scheme: light)").matches?de.Light:de.Dark),null===e&&(e=ue.value),pe.forEach((function(t){var n=ve(t.values[e]);document.documentElement.style.setProperty("--color-".concat(t.name),"".concat(n[0]," ").concat(n[1]," ").concat(n[2]))})),fe.forEach((function(t){document.documentElement.style.setProperty("--url-".concat(t.name),t.values[e])})),ue.value=e,ue.system=t}function ge(e){localStorage.setItem("colorTheme",e),me()}},6508:function(e,t,n){e.exports=n.p+"img/3d_printer.png"},"662c":function(e,t,n){e.exports=n.p+"img/logo-square.png"},"67d7":function(e,t,n){"use strict";var i=n("f26c"),r=n.n(i);r.a},"681e":function(e,t,n){e.exports=n.p+"img/logo-square_dark.png"},6868:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tsd-gauge-container"},[n("span",{style:{color:e.titleColor},attrs:{id:"title"}},[e._v(e._s(e.titleText))]),n("div",{staticClass:"tsd-gauge"},[n("radial-gauge",{attrs:{value:e.value,options:e.computedOptions}})],1),n("hr")])},r=[],a=(n("a9e3"),n("7489")),o=n("648b"),s={name:"Gauge",components:{RadialGauge:a["a"]},data:function(){return{}},props:{normalizedP:{type:Number},isWatching:{type:Boolean,default:!0},options:{type:Object,default:null}},computed:{computedOptions:function(){if(null!==this.options)return this.options;var e={highlight1:o["d"].value===o["a"].Light?"#929292":"#8395a7",highlight2:o["d"].value===o["a"].Light?"#b7b7b7":"#a8bacc",highlight3:o["d"].value===o["a"].Light?"#7b7b7b":"#6c7e90",needle:o["d"].value===o["a"].Light?"#2d3e4f":"#ffffff"};return{valueDec:0,valueInt:0,width:240,height:240,units:!1,box:!1,minValue:0,maxValue:100,majorTicks:["","","",""],minorTicks:4,highlights:[{from:0,to:33,color:this.isWatching?"#5cb85c":e.highlight1},{from:33,to:67,color:this.isWatching?"#f0ad4e":e.highlight2},{from:67,to:100,color:this.isWatching?"#d9534f":e.highlight3}],colorPlate:"rgba(255,255,255,.0)",colorTitle:"#5cb85c",colorStrokeTicks:"#EBEBEB",colorNeedleEnd:this.isWatching?"rgba(255, 160, 122, .9)":e.needle,colorNeedle:this.isWatching?"rgba(240, 128, 128, 1)":e.needle,colorNeedleShadowUp:this.isWatching?"rgba(2,255,255,0.2)":e.needle,valueBox:!1,animationRule:"bounce",animationDuration:500,animatedValue:!0,startAngle:90,ticksAngle:180,borders:!1}},value:function(){return 100*this.normalizedP},titleText:function(){switch(this.level()){case 0:return"Looking Good";case 1:return"Fishy...";case 2:return"Failing!";default:return"Looking Good"}},titleColor:function(){switch(this.level()){case 0:return"#5cb85c";case 1:return"#f0ad4e";case 2:return"#d9534f";default:return"#5cb85c"}}},methods:{level:function(){return this.value>66?2:this.value>33?1:0}}},c=s,l=(n("b543"),n("2877")),d=Object(l["a"])(c,i,r,!1,null,"1e8f46d0",null);t["a"]=d.exports},"6bb8":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){return""!==JSON.parse(document.querySelector("#app-platform-json").text)["platform"]}},"6e05":function(e,t,n){e.exports=n.p+"img/detective-working.gif"},"6e31":function(e,t,n){},"72a8":function(e,t,n){var i={"./3d_printer.png":"6508","./android-chrome-192x192.png":"bc29","./android-chrome-256x256.png":"7daa","./apple-touch-icon.png":"16b7","./checkmark.png":"5490","./cross.svg":"3ce2","./detective-hour-2-inverse.png":"7c68","./detective-hour-2-primary.png":"b639","./detective-hour-inverse.png":"0d29","./detective-hour-primary.png":"7cec","./detective-working.gif":"6e05","./favicon-16x16.png":"c902","./favicon-32x32.png":"7af8","./favicon.ico":"28c6","./info-inverted.png":"8f11","./install_plugin.png":"842d","./logo-bg/logo-bg_dark.svg":"7888","./logo-bg/logo-bg_light.svg":"a8b3","./logo-inverted.png":"8a45","./logo-inverted_christmas.png":"90f4","./logo-inverted_newyear.png":"5820","./logo-square-inverted.png":"fbc4","./logo-square-inverted_christmas.png":"c3c8","./logo-square-inverted_newyear.png":"0fb7","./logo-square.png":"662c","./logo-square/logo-square_dark.png":"681e","./logo-square/logo-square_light.png":"88ec","./logo-square_christmas.png":"0906","./logo.png":"b5b9","./logo_christmas.png":"10e7","./logo_newyear.png":"e9d2","./logo_square_newyear.png":"3293","./mstile-150x150.png":"bb7b","./navbar-brand/navbar-brand_dark.png":"305b","./navbar-brand/navbar-brand_light.png":"bbe2","./octo-inverted.png":"223c","./octoprint-tunnel.png":"17d7","./paste_token.png":"a83d","./plugin_rerun_setup.png":"754e","./plugin_verification_code.png":"5f18","./plugin_wizard_websetup.png":"ebff","./safari-pinned-tab.svg":"9bbd","./tail-spin-lg.svg":"8617","./tail-spin/tail-spin_dark.svg":"cc4c","./tail-spin/tail-spin_light.svg":"2365","./tick.svg":"0453"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="72a8"},"742d":function(e,t,n){"use strict";var i=n("6208"),r=n.n(i);r.a},"754e":function(e,t,n){e.exports=n.p+"img/plugin_rerun_setup.png"},"77bd":function(e,t,n){"use strict";var i=n("a270"),r=n.n(i);r.a},"785f":function(e,t,n){"use strict";n("99af"),n("fb6a"),n("b0c0"),n("d3b7"),n("ac1f"),n("25f0"),n("5319");var i=n("0122"),r=/(?:^|[-_/])(\w)/g,a="root",o="anonymous component",s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/,c=function(e){var t=s.exec(e);return t?t.slice(1):[]},l=function(e,t){var n=c(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},d=function(e){if(!e)return o;if(e.$root===e)return a;if(!e.$options)return o;if(e.$options.name)return e.$options.name;if(e.$options._componentTag)return e.$options._componentTag;if(e.$options.__file){var t=e.$options.__file.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"),n=l(t,".vue");return n.replace(r,(function(e,t){return t?t.toUpperCase():""}))}return o},u=function e(t,n,r,a,o,s){var c=0;for(var l in n){if(c+=1,c>s)break;"object"==Object(i["a"])(n[l])?o>a&&e(t,n[l],r+"."+l,a+1,o,s):t[r+"."+l]=n[l]}},p=function(e){var t=e.config.errorHandler;e.config.errorHandler=function(n,i,r){if(window.Sentry){var a={},o=i;if(i._original&&(o=i._original),o)try{a.componentName=d(o),u(a,JSON.parse(JSON.stringify(o.$options.propsData)),"props",0,2,10)}catch(s){console.log("Unable to extract metadata from Vue component.")}r&&(a.lifecycleHook=r),setTimeout((function(){window.Sentry.getCurrentHub().withScope((function(e){e.setContext("vue",a),window.Sentry.getCurrentHub().captureException(n)}))}))}"function"===typeof t&&t.call(e,n,i,r),e.util&&e.util.warn("Error in ".concat(r,': "').concat(n.toString(),'"'),i),console.error(n)}};t["a"]=p},7888:function(e,t,n){e.exports=n.p+"img/logo-bg_dark.svg"},"7af8":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfiDB8PFjEcyEgxAAADKUlEQVRIx5WUS2yUVRTHf/d+z3n0mxlLHyMztHQiIhINCGya4WWIJCIbZaG4Mix044K4cGlioktdmbggGmPUhbKQxiYGiImJjYYEjAu0GqpVmrZYaUunY+d7HBfTsTPDPNpzNt93cv7/c+//nHMNWtou8spP2v3hgJNJWGm/FJ5nomWmuj+UIab/2R+ciQ7yoLgqYlnd0pfNL/6dO8ZVNmEmblFPI/WuIvOi5/W0yNbNgUMEhEeifGNUVFj0h/3NEMxzQsvuFpmpaGcrArM5MMtsMizcnyiW/3CEJmqKGxufI+xQFa88dKC4+/kgGRAh6zpbpHiIw2ppKpBMZSW4wnRjF/IUuDboj4bHZX849EzmE3eBaWZZZA1Fgm1sZye/ysnS3Xk9qSfMK871xdUX+bjKESeRsl7VN1SlqvgB+Vx+kSUJpGZrMifX5G3x1nuil4xL7pMpnQBUEh1bfSc8J3WXseglywApXEJWWWCWOZYb7q/vmC9XLj4GCZIF/Wdj1zfn1gdX1T60gTVjjKtmcbua/luPHZcAeonTk7bOGz/VNOjueskYc09kjQdqXRjEUzPZyqgcjU6GI53qKt/4Tl02vnGvl0sp5mtzsMICzj13KvRkVLZBmmNkcBDWMOgnx+MMMoOgRd+wLuz7YdFfprTB2wfE9xifqXL1iKaclXH5SJ4QxJaXZFw+lL0bF/jLes3z4utjBuQ5pZyn9c2G7ZOMpEVV1ZY+iTXupm9+mtgBp6rLFPBjnEOYqm5XhLssrtfwuUO5UYqy5NSj1M5wBCjo5Hb7BeOSute1A3+Y77rFTM/r5DhTTzpMjHTcOW1MqPbgkvl+fE9WZ9o1aRgXb9j8vjVcifNm1k41D1T9z+9owkBi7QpE9hsVu/OAmsSKeq7dCcyv+np6OxN4ZA3nWT3VEv51/BHIdVuSIcA6qn9uhhtfOnkadW9nCcA6rCfrCYwxO2fSvxk4gIXCeUrf/h/+bWLErX8+u9sAYJ9TJQTRvzkHYddW4ABxUo75HqJW7LOQ2SocXsEhVtA3zQt9TmrrcKhWdZ9z91q81SFLdaIoYBhEyGSHnP8ASQigTOVoQVgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMTItMzFUMTU6MjI6NDkrMDE6MDBazJm4AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTEyLTMxVDE1OjIyOjQ5KzAxOjAwK5EhBAAAAFd6VFh0UmF3IHByb2ZpbGUgdHlwZSBpcHRjAAB4nOPyDAhxVigoyk/LzEnlUgADIwsuYwsTIxNLkxQDEyBEgDTDZAMjs1Qgy9jUyMTMxBzEB8uASKBKLgDqFxF08kI1lQAAAABJRU5ErkJggg=="},"7c68":function(e,t,n){e.exports=n.p+"img/detective-hour-2-inverse.png"},"7cec":function(e,t,n){e.exports=n.p+"img/detective-hour-primary.png"},"7daa":function(e,t,n){e.exports=n.p+"img/android-chrome-256x256.png"},"842d":function(e,t,n){e.exports=n.p+"img/install_plugin.png"},8617:function(e,t,n){e.exports=n.p+"img/tail-spin-lg.svg"},"88ec":function(e,t,n){e.exports=n.p+"img/logo-square_light.png"},"8a45":function(e,t,n){e.exports=n.p+"img/logo-inverted.png"},"8bc7":function(e,t,n){"use strict";var i=n("5082"),r=n.n(i);r.a},"8f11":function(e,t,n){e.exports=n.p+"img/info-inverted.png"},"8ffe":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isInMobile?e._e():n("nav",{staticClass:"navbar navbar-expand-lg bg-dark static-top flex-column",class:{"navbar-dark":e.theme===e.themes.Dark,"navbar-light":e.theme===e.themes.Light}},[n("div",{staticClass:"container"},[n("a",{staticClass:"navbar-brand",attrs:{href:"/printers/"}},[n("dark-light-image",{attrs:{path:"navbar-brand",ext:"png",alt:"The Spaghetti Detective"}})],1),n("button",{ref:"mobileDropdown",staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})]),n("div",{ref:"mobileDropdownContent",staticClass:"collapse navbar-collapse",attrs:{id:"navbarResponsive"}},[n("ul",{staticClass:"navbar-nav"},[e.user?n("li",{staticClass:"nav-item",class:{active:e.viewName.includes("printers")}},[n("a",{staticClass:"nav-link",attrs:{href:"/printers/"}},[e._v("Printer ")])]):e._e(),e.user?n("li",{staticClass:"nav-item",class:{active:e.viewName.includes("prints")}},[n("a",{staticClass:"nav-link",attrs:{href:"/prints/"}},[e._v("Time-lapse ")])]):e._e(),e.user?n("li",{staticClass:"nav-item",class:{active:e.viewName.includes("gcodes")}},[n("a",{staticClass:"nav-link",attrs:{href:"/gcodes/"}},[e._v("G-Code ")])]):e._e(),e.user?e._e():n("li",{staticClass:"nav-item",class:{active:"publictimelapse_list"===e.viewName}},[n("a",{staticClass:"nav-link glowing",attrs:{href:"/publictimelapses/"}},[e._v("Spaghetti Gallery")])]),e.isEnt?n("li",{staticClass:"nav-item",class:{active:"pricing"===e.viewName}},[n("a",{staticClass:"nav-link",attrs:{href:"/ent/pricing/"}},[e._v("Pricing")])]):e._e(),e._m(0),e._m(1)]),n("ul",{staticClass:"navbar-nav ml-auto"},[e.user?e._e():n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"/accounts/login/"}},[e._v("Sign In")])]),!e.user&&e.allowSignUp?n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"/accounts/signup/"}},[e._v("Sign up")])]):e._e(),e.isEnt&&e.user?n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link badge-btn",attrs:{href:"/ent/subscription/#detective-hour-balance"}},[n("svg",{staticClass:"detective-hours",attrs:{width:"14.66",height:"21",viewBox:"0 0 384 550",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M363.11 44V43.85H370.48C372.207 43.85 373.918 43.5095 375.513 42.8479C377.109 42.1863 378.558 41.2166 379.778 39.9943C380.999 38.772 381.966 37.3211 382.626 35.7246C383.285 34.1281 383.623 32.4173 383.62 30.69V13.84C383.621 12.1136 383.282 10.4038 382.623 8.80848C381.963 7.2131 380.995 5.76338 379.775 4.54216C378.555 3.32093 377.106 2.35215 375.511 1.69118C373.916 1.03021 372.206 0.690006 370.48 0.690006H13.54C11.8123 0.688692 10.1012 1.02785 8.50464 1.68811C6.90805 2.34838 5.45723 3.31679 4.23508 4.53801C3.01293 5.75923 2.04342 7.20932 1.38194 8.80541C0.720468 10.4015 0.380004 12.1123 0.380005 13.84V30.64C0.377371 32.3689 0.71597 34.0814 1.37639 35.6792C2.03681 37.2771 3.00606 38.7289 4.22861 39.9514C5.45115 41.1739 6.90294 42.1432 8.50078 42.8036C10.0986 43.464 11.8111 43.8026 13.54 43.8H22.24V44C22.24 49.52 23.35 194 139.49 274.93C22.24 351.59 22.24 506.2 22.24 506.2H13.54C11.8111 506.197 10.0986 506.536 8.50078 507.196C6.90294 507.857 5.45115 508.826 4.22861 510.049C3.00606 511.271 2.03681 512.723 1.37639 514.321C0.71597 515.919 0.377371 517.631 0.380005 519.36V536.16C0.380004 537.888 0.720468 539.598 1.38194 541.195C2.04342 542.791 3.01293 544.241 4.23508 545.462C5.45723 546.683 6.90805 547.652 8.50464 548.312C10.1012 548.972 11.8123 549.311 13.54 549.31H370.48C372.206 549.31 373.916 548.97 375.511 548.309C377.106 547.648 378.555 546.679 379.775 545.458C380.995 544.237 381.963 542.787 382.623 541.192C383.282 539.596 383.621 537.886 383.62 536.16V519.36C383.623 517.633 383.285 515.922 382.626 514.325C381.966 512.729 380.999 511.278 379.778 510.056C378.558 508.833 377.109 507.864 375.513 507.202C373.918 506.541 372.207 506.2 370.48 506.2H363.11C363.11 506.2 363.11 351.59 245.86 274.88C362 194 363.11 49.47 363.11 44ZM253.4 320C333.8 401.86 332.47 506.19 332.47 506.19H51.55C51.55 506.19 50.22 401.87 130.6 320C145.68 304.62 161.04 296.9 172.6 293.07C184.16 289.24 192 289.21 192 289.21C192 289.21 223.26 289.22 253.4 320ZM192 260.78C192 260.78 184.18 260.78 172.6 256.92C161.02 253.06 145.67 245.39 130.6 229.99C50.22 148.11 51.55 43.8 51.55 43.8H332.47C332.47 43.8 333.8 148.11 253.4 230C223.26 260.78 192 260.78 192 260.78Z"}}),n("path",{attrs:{d:"M320.24 490.4H64.63C64.63 446 192.05 346.4 192.05 346.4C192.05 346.4 320.24 446.85 320.24 490.4Z"}}),n("path",{attrs:{d:"M270.69 167.94C270.685 173.993 269.043 179.933 265.94 185.13C255.78 202.13 229.74 239.53 192.01 249.42C156.84 239.93 129.75 203.65 118.72 186.69C115.206 181.267 113.337 174.942 113.34 168.48V167.94H270.69Z"}}),n("path",{attrs:{d:"M320.24 490.4H64.63C64.63 446 192.05 346.4 192.05 346.4C192.05 346.4 320.24 446.85 320.24 490.4Z"}})]),n("span",{staticClass:"badge badge-light",attrs:{id:"user-credits"}},[e._v(e._s(e.dhBadgeNum))]),n("span",{staticClass:"sr-only"},[e._v("Detective Hours")])])]):e._e(),e.user?n("li",{ref:"accountDropdown",staticClass:"nav-item dropdown"},[n("a",{staticClass:"nav-link dropdown-toggle user-menu",attrs:{"data-toggle":"dropdown",href:"#",id:e.user.id,"aria-expanded":"false"}},[e._v(" "+e._s(e.user.first_name||e.user.email)+" "),n("span",{staticClass:"caret"})]),n("div",{ref:"accountDropdownContent",staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"themes"}},[e._m(2),e.isEnt?n("a",{staticClass:"dropdown-item",attrs:{href:"/ent/subscription/"}},[n("i",{staticClass:"far fa-user-circle"}),e._v("Account")]):e._e(),n("div",{staticClass:"dropdown-divider"}),e._m(3)])]):e._e()])])])]),e.needsEmailVerification?n("div",{staticClass:"alert alert-warning text-center",attrs:{role:"alert"}},[e._v(" You will not get notified by email on print failure, as your primary email address is not verified. "),n("a",{attrs:{href:"/accounts/email/"}},[e._v("Verify your email address.")])]):e._e()])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"https://help.thespaghettidetective.com/"}},[e._v("Help")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"https://discord.gg/hsMwGpD"}},[e._v("Forum")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"dropdown-item",attrs:{href:"/user_preferences/"}},[n("i",{staticClass:"fas fa-sliders-h"}),e._v("Preferences")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"dropdown-item",attrs:{href:"/accounts/logout/"}},[n("i",{staticClass:"fas fa-sign-out-alt"}),e._v("Log out")])}],a=(n("d3b7"),n("ac1f"),n("3ca3"),n("841c"),n("2ca0"),n("ddb0"),n("2b3d"),n("c1df")),o=n.n(a),s=n("6bb8"),c=n("e7f8"),l=n("648b"),d={name:"Navbar",components:{DarkLightImage:c["a"]},data:function(){return{user:null,allowSignUp:!1,isEnt:!1,isInMobile:!1,themes:l["a"]}},props:{viewName:{default:function(){return""},type:String}},created:function(){var e=JSON.parse(document.querySelector("#settings-json").text),t=e.ACCOUNT_ALLOW_SIGN_UP,n=e.IS_ENT;this.allowSignUp=!!t,this.isEnt=!!n,this.user=JSON.parse(document.querySelector("#user-json").text),this.isInMobile=Object(s["a"])()||window.location.pathname.startsWith("/mobile/")||"true"===new URLSearchParams(window.location.search).get("inMobile")},computed:{theme:function(){return l["d"].value},dhBadgeNum:function(){return this.user&&this.user.is_dh_unlimited?"∞":Math.round(this.user.dh_balance)},needsEmailVerification:function(){if(!this.user)return!1;var e=o()(this.user.date_joined).isBefore(o()().subtract(15,"days"));return this.isEnt&&!this.user.is_primary_email_verified&&e}},methods:{hideDropdowns:function(){var e=this.$refs.accountDropdown;e.classList.contains("show")&&(e.classList.remove("show"),this.$refs.accountDropdownContent.classList.remove("show"));var t=this.$refs.mobileDropdown;t.getAttribute("aria-expanded")&&(t.classList.add("collapsed"),this.$refs.mobileDropdownContent.classList.remove("show"))}}},u=d,p=(n("742d"),n("2877")),f=Object(p["a"])(u,i,r,!1,null,"45dd142b",null);t["a"]=f.exports},"90f4":function(e,t,n){e.exports=n.p+"img/logo-inverted_christmas.png"},"957e":function(e,t,n){},"99b8":function(e,t,n){e.exports={primary:"#9965f4",white:"#fff"}},"9bbd":function(e,t,n){e.exports=n.p+"img/safari-pinned-tab.svg"},"9dc3":function(e,t,n){},"9eca":function(e,t,n){},a270:function(e,t,n){},a440:function(e,t,n){},a83d:function(e,t,n){e.exports=n.p+"img/paste_token.png"},a8b3:function(e,t,n){e.exports=n.p+"img/logo-bg_light.svg"},ae48:function(e,t,n){"use strict";var i=n("9eca"),r=n.n(i);r.a},b01d:function(e,t,n){"use strict";var i=n("d3a4"),r=n.n(i);r.a},b543:function(e,t,n){"use strict";var i=n("2773"),r=n.n(i);r.a},b5b9:function(e,t,n){e.exports=n.p+"img/logo.png"},b639:function(e,t,n){e.exports=n.p+"img/detective-hour-2-primary.png"},b768:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"pullToRevealWrapper",staticClass:"wrapper"},[n("div",[n("div",{staticClass:"pull-to-reveal"},[e.enable?e._t("default"):e._e()],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showEdge,expression:"showEdge"}],staticClass:"showing-edge"}),n("div",{staticClass:"spaceholder"})]),n("div",{ref:"staticWrapper"},[e.enable?e._e():e._t("default")],2)])},r=[],a={name:"PullToReveal",props:{showEdge:{default:function(){return!1},type:Boolean},shiftContent:{default:function(){return!0},type:Boolean},enable:{default:function(){return!1},type:Boolean}},data:function(){return{status:"closed",animationTime:.5}},watch:{enable:function(e){e?(this.destroyDisabled(),this.initEnabled()):(this.destroyEnabled(),this.initDisabled())}},mounted:function(){this.enable?this.initEnabled():this.initDisabled()},destroyed:function(){this.enable?this.destroyEnabled():this.destroyDisabled()},methods:{initEnabled:function(){window.addEventListener("scroll",this.handleScroll),document.querySelector("body").style.minHeight="101vh";var e=this.$refs.pullToRevealWrapper.querySelector(".pull-to-reveal"),t=this.$refs.pullToRevealWrapper.querySelector(".spaceholder"),n=this.animationTime;e.style.transition="all ".concat(n,"s"),t.style.transition="all ".concat(n,"s"),0===window.scrollY&&window.scrollBy({top:1,behavior:"smooth"}),window.onload=function(){var t=parseInt(window.getComputedStyle(e).height);e.style.top="-".concat(2*t,"px")}},destroyEnabled:function(){if(window&&window.removeEventListener("scroll",this.handleScroll),document&&(document.querySelector("body").style.minHeight=""),this.$refs.pullToRevealWrapper){var e=this.$refs.pullToRevealWrapper.querySelector(".pull-to-reveal");e.style.transition="none",e.style.top="-999px";var t=this.$refs.pullToRevealWrapper.querySelector(".spaceholder");t.style.transition="none"}},initDisabled:function(){var e=this.$refs.pullToRevealWrapper.querySelector(".showing-edge");e.style.display="none";var t=this.$refs.staticWrapper;t.style.position="absolute",t.style.width="100%",t.style.top="0",t.style.left="0",t.style.zIndex="10",document.querySelector("body").style.paddingTop="56px",window.onload=function(){var e=parseInt(window.getComputedStyle(t).height);document.querySelector("body").style.paddingTop="".concat(e,"px")}},destroyDisabled:function(){var e=this.$refs.pullToRevealWrapper;e&&(e.querySelector(".showing-edge").style.display="block");var t=this.$refs.staticWrapper;t&&(t.style.display="none"),document&&(document.querySelector("body").style.paddingTop=0)},handleScroll:function(){var e=window.pageYOffset,t=this.$refs.pullToRevealWrapper.querySelector(".pull-to-reveal"),n=parseInt(window.getComputedStyle(t).height);if(0===e){if("opened"===this.status)return;t.style.top=0,this.status="opened",this.shiftContent&&(this.$refs.pullToRevealWrapper.querySelector(".spaceholder").style.height="".concat(n,"px"))}else{if("closed"===this.status)return;this.$emit("hide"),t.style.top="-".concat(2*n,"px"),this.status="closed",this.shiftContent&&(this.$refs.pullToRevealWrapper.querySelector(".spaceholder").style.height=0)}}}},o=a,s=(n("ae48"),n("2877")),c=Object(s["a"])(o,i,r,!1,null,"cfa36fac",null);t["a"]=c.exports},b8ed:function(e,t,n){},bac1:function(e,t,n){"use strict";var i=n("2a22"),r=n.n(i);r.a},bb7b:function(e,t,n){e.exports=n.p+"img/mstile-150x150.png"},bbe2:function(e,t,n){e.exports=n.p+"img/navbar-brand_light.png"},bc29:function(e,t,n){e.exports=n.p+"img/android-chrome-192x192.png"},c297:function(e,t,n){"use strict";(function(e){n("7db0"),n("4160"),n("c975"),n("a15b"),n("45fc"),n("a434"),n("b0c0"),n("d3b7"),n("ac1f"),n("8a79"),n("3ca3"),n("466d"),n("5319"),n("1276"),n("159b"),n("ddb0"),n("2b3d");var i=n("0122");a.sessions={},a.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||a.extension.isInstalled()}return!0};var r={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){var t=window.setTimeout((function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){var n=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){var i=new Error("NavigatorUserMediaError");i.name="You cancelled the request for permission, giving up...",n(i)}else n(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&(console.log("clearing ",t.data.id),window.clearTimeout(t.data.id))}))}};function a(e){if(void 0===a.initDone)return e.error("Library not initialized"),{};if(!a.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(a.log("Library initialized: "+a.initDone),e=e||{},e.success="function"==typeof e.success?e.success:a.noop,e.error="function"==typeof e.error?e.error:a.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:a.noop,null===e.server||void 0===e.server)return e.error("Invalid server url"),{};var t=!1,n=null,r={},o=null,s=null,c=0,l=e.server;a.isArray(l)?(a.log("Multiple servers provided ("+l.length+"), will use the first that works"),l=null,s=e.server,a.debug(s)):0===l.indexOf("ws")?(t=!0,a.log("Using WebSockets to contact Janus: "+l)):(t=!1,a.log("Using REST API to contact Janus: "+l));var d=e.iceServers;void 0!==d&&null!==d||(d=[{urls:"stun:stun.l.google.com:19302"}]);var u=e.iceTransportPolicy,p=e.bundlePolicy,f=e.ipv6;void 0!==f&&null!==f||(f=!1);var v=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(v=!0===e.withCredentials);var m=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(m=e.max_poll_events),m<1&&(m=1);var g=null;void 0!==e.token&&null!==e.token&&(g=e.token);var h=null;void 0!==e.apisecret&&null!==e.apisecret&&(h=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var b=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(b=e.keepAlivePeriod),isNaN(b)&&(b=25e3);var w=6e4;function y(e){var t={high:9e5,medium:3e5,low:1e5};return void 0!==e&&null!==e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(w=e.longPollTimeout),isNaN(w)&&(w=6e4);var C=!1,_=null,k={},S=this,x=0,A={};function T(){if(null!=_)if(a.debug("Long poll..."),C){var t=l+"/"+_+"?rid="+(new Date).getTime();void 0!==m&&null!==m&&(t=t+"&maxev="+m),null!==g&&void 0!==g&&(t=t+"&token="+encodeURIComponent(g)),null!==h&&void 0!==h&&(t=t+"&apisecret="+encodeURIComponent(h)),a.httpAPICall(t,{verb:"GET",withCredentials:v,success:O,timeout:w,error:function(t,n){if(a.error(t+":",n),x++,x>3)return C=!1,void e.error("Lost connection to the server (is it down?)");T()}})}else a.warn("Is the server down? (connected=false)")}function O(e,i){if(x=0,t||void 0===_||null===_||!0===i||T(),t||!a.isArray(e))if("keepalive"!==e["janus"])if("ack"!==e["janus"])if("success"!==e["janus"])if("trickle"===e["janus"]){var r=e["sender"];if(void 0===r||null===r)return void a.warn("Missing sender...");var o=k[r];if(void 0===o||null===o)return void a.debug("This handle is not attached to this session");var s=e["candidate"];a.debug("Got a trickled candidate on session "+_),a.debug(s);var c=o.webrtcStuff;c.pc&&c.remoteSdp?(a.debug("Adding remote candidate:",s),s&&!0!==s.completed?c.pc.addIceCandidate(s):c.pc.addIceCandidate(a.endOfCandidates)):(a.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),c.candidates||(c.candidates=[]),c.candidates.push(s),a.debug(c.candidates))}else{if("webrtcup"===e["janus"]){a.debug("Got a webrtcup event on session "+_),a.debug(e);r=e["sender"];if(void 0===r||null===r)return void a.warn("Missing sender...");o=k[r];return void 0===o||null===o?void a.debug("This handle is not attached to this session"):void o.webrtcState(!0)}if("hangup"===e["janus"]){a.debug("Got a hangup event on session "+_),a.debug(e);r=e["sender"];if(void 0===r||null===r)return void a.warn("Missing sender...");o=k[r];if(void 0===o||null===o)return void a.debug("This handle is not attached to this session");o.webrtcState(!1,e["reason"]),o.hangup()}else if("detached"===e["janus"]){a.debug("Got a detached event on session "+_),a.debug(e);r=e["sender"];if(void 0===r||null===r)return void a.warn("Missing sender...");o=k[r];if(void 0===o||null===o)return;o.detached=!0,o.ondetached(),o.detach()}else if("media"===e["janus"]){a.debug("Got a media event on session "+_),a.debug(e);r=e["sender"];if(void 0===r||null===r)return void a.warn("Missing sender...");o=k[r];if(void 0===o||null===o)return void a.debug("This handle is not attached to this session");o.mediaState(e["type"],e["receiving"])}else if("slowlink"===e["janus"]){a.debug("Got a slowlink event on session "+_),a.debug(e);r=e["sender"];if(void 0===r||null===r)return void a.warn("Missing sender...");o=k[r];if(void 0===o||null===o)return void a.debug("This handle is not attached to this session");o.slowLink(e["uplink"],e["lost"])}else{if("error"===e["janus"]){a.error("Ooops: "+e["error"].code+" "+e["error"].reason),a.debug(e);f=e["transaction"];if(null!==f&&void 0!==f){v=A[f];null!==v&&void 0!==v&&v(e),delete A[f]}return}if("event"===e["janus"]){a.debug("Got a plugin event on session "+_),a.debug(e);r=e["sender"];if(void 0===r||null===r)return void a.warn("Missing sender...");var l=e["plugindata"];if(void 0===l||null===l)return void a.warn("Missing plugindata...");a.debug("  -- Event is coming from "+r+" ("+l["plugin"]+")");var d=l["data"];a.debug(d);o=k[r];if(void 0===o||null===o)return void a.warn("This handle is not attached to this session");var u=e["jsep"];void 0!==u&&null!==u&&(a.debug("Handling SDP as well..."),a.debug(u));var p=o.onmessage;null!==p&&void 0!==p?(a.debug("Notifying application..."),p(d,u)):a.debug("No provided notification callback")}else{if("timeout"===e["janus"])return a.error("Timeout on session "+_),a.debug(e),void(t&&n.close(3504,"Gateway timeout"));a.warn("Unknown message/event  '"+e["janus"]+"' on session "+_),a.debug(e)}}}else{a.debug("Got a success on session "+_),a.debug(e);var f=e["transaction"];if(null!==f&&void 0!==f){var v=A[f];null!==v&&void 0!==v&&v(e),delete A[f]}}else{a.debug("Got an ack on session "+_),a.debug(e);var f=e["transaction"];if(null!==f&&void 0!==f){var v=A[f];null!==v&&void 0!==v&&v(e),delete A[f]}}else a.vdebug("Got a keepalive on session "+_);else for(var m=0;m<e.length;m++)O(e[m],!0)}function D(){if(null!==l&&t&&C){o=setTimeout(D,b);var e={janus:"keepalive",session_id:_,transaction:a.randomString(12)};null!==g&&void 0!==g&&(e["token"]=g),null!==h&&void 0!==h&&(e["apisecret"]=h),n.send(JSON.stringify(e))}}function P(i){var d=a.randomString(12),u={janus:"create",transaction:d};if(i["reconnect"]&&(C=!1,u["janus"]="claim",u["session_id"]=_,n&&(n.onopen=null,n.onerror=null,n.onclose=null,o&&(clearTimeout(o),o=null))),null!==g&&void 0!==g&&(u["token"]=g),null!==h&&void 0!==h&&(u["apisecret"]=h),null===l&&a.isArray(s)&&(l=s[c],0===l.indexOf("ws")?(t=!0,a.log("Server #"+(c+1)+": trying WebSockets to contact Janus ("+l+")")):(t=!1,a.log("Server #"+(c+1)+": trying REST API to contact Janus ("+l+")"))),t)for(var p in n=a.newWebSocket(l,"janus-protocol"),r={error:function(){if(a.error("Error connecting to the Janus WebSockets server... "+l),a.isArray(s)&&!i["reconnect"])return c++,c==s.length?void i.error("Error connecting to any of the provided Janus servers: Is the server down?"):(l=null,void setTimeout((function(){P(i)}),200));i.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){A[d]=function(e){if(a.debug(e),"success"!==e["janus"])return a.error("Ooops: "+e["error"].code+" "+e["error"].reason),void i.error(e["error"].reason);o=setTimeout(D,b),C=!0,_=e["session_id"]?e["session_id"]:e.data["id"],i["reconnect"]?a.log("Claimed session: "+_):a.log("Created session: "+_),a.sessions[_]=S,i.success()},n.send(JSON.stringify(u))},message:function(e){O(JSON.parse(e.data))},close:function(){null!==l&&C&&(C=!1,e.error("Lost connection to the server (is it down?)"))}},r)n.addEventListener(p,r[p]);else a.httpAPICall(l,{verb:"POST",withCredentials:v,body:u,success:function(e){if(a.debug(e),"success"!==e["janus"])return a.error("Ooops: "+e["error"].code+" "+e["error"].reason),void i.error(e["error"].reason);C=!0,_=e["session_id"]?e["session_id"]:e.data["id"],i["reconnect"]?a.log("Claimed session: "+_):a.log("Created session: "+_),a.sessions[_]=S,T(),i.success()},error:function(e,t){if(a.error(e+":",t),a.isArray(s)&&!i["reconnect"])return c++,c==s.length?void i.error("Error connecting to any of the provided Janus servers: Is the server down?"):(l=null,void setTimeout((function(){P(i)}),200));""===t?i.error(e+": Is the server down?"):i.error(e+": "+t)}})}function j(i){i=i||{},i.success="function"==typeof i.success?i.success:a.noop;var s=!0;void 0!==i.asyncRequest&&null!==i.asyncRequest&&(s=!0===i.asyncRequest);var c=!0;void 0!==i.notifyDestroyed&&null!==i.notifyDestroyed&&(c=!0===i.notifyDestroyed);var d=!1;if(void 0!==i.cleanupHandles&&null!==i.cleanupHandles&&(d=!0===i.cleanupHandles),a.log("Destroying session "+_+" (async="+s+")"),!C)return a.warn("Is the server down? (connected=false)"),void i.success();if(void 0===_||null===_)return a.warn("No session to destroy"),i.success(),void(c&&e.destroyed());if(d)for(var u in k)B(u,{noRequest:!0});var p={janus:"destroy",transaction:a.randomString(12)};if(null!==g&&void 0!==g&&(p["token"]=g),null!==h&&void 0!==h&&(p["apisecret"]=h),t){p["session_id"]=_;var f=function(){for(var e in r)n.removeEventListener(e,r[e]);n.removeEventListener("message",m),n.removeEventListener("error",b),o&&clearTimeout(o),n.close()},m=function(t){var n=JSON.parse(t.data);n.session_id==p.session_id&&n.transaction==p.transaction&&(f(),i.success(),c&&e.destroyed())},b=function(t){f(),i.error("Failed to destroy the server: Is the server down?"),c&&e.destroyed()};return n.addEventListener("message",m),n.addEventListener("error",b),void n.send(JSON.stringify(p))}a.httpAPICall(l+"/"+_,{verb:"POST",async:s,withCredentials:v,body:p,success:function(t){a.log("Destroyed session:"),a.debug(t),_=null,C=!1,"success"!==t["janus"]&&a.error("Ooops: "+t["error"].code+" "+t["error"].reason),i.success(),c&&e.destroyed()},error:function(t,n){a.error(t+":",n),_=null,C=!1,i.success(),c&&e.destroyed()}})}function E(e){if(e=e||{},e.success="function"==typeof e.success?e.success:a.noop,e.error="function"==typeof e.error?e.error:a.noop,e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:a.noop,e.iceState="function"==typeof e.iceState?e.iceState:a.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:a.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:a.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:a.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:a.noop,e.onlocalstream="function"==typeof e.onlocalstream?e.onlocalstream:a.noop,e.onremotestream="function"==typeof e.onremotestream?e.onremotestream:a.noop,e.ondata="function"==typeof e.ondata?e.ondata:a.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:a.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:a.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:a.noop,!C)return a.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var i=e.plugin;if(void 0===i||null===i)return a.error("Invalid plugin"),void e.error("Invalid plugin");var r=e.opaqueId,o=e.token?e.token:g,s=a.randomString(12),c={janus:"attach",plugin:i,opaque_id:r,transaction:s};if(null!==o&&void 0!==o&&(c["token"]=o),null!==h&&void 0!==h&&(c["apisecret"]=h),t)return A[s]=function(t){if(a.debug(t),"success"!==t["janus"])return a.error("Ooops: "+t["error"].code+" "+t["error"].reason),void e.error("Ooops: "+t["error"].code+" "+t["error"].reason);var n=t.data["id"];a.log("Created handle: "+n);var r={session:S,plugin:i,id:n,token:o,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return i},getVolume:function(){return q(n,!0)},getRemoteVolume:function(){return q(n,!0)},getLocalVolume:function(){return q(n,!1)},isAudioMuted:function(){return G(n,!1)},muteAudio:function(){return H(n,!1,!0)},unmuteAudio:function(){return H(n,!1,!1)},isVideoMuted:function(){return G(n,!0)},muteVideo:function(){return H(n,!0,!0)},unmuteVideo:function(){return H(n,!0,!1)},getBitrate:function(){return J(n)},send:function(e){I(n,e)},data:function(e){L(n,e)},dtmf:function(e){M(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){N(n,!0,e)},createAnswer:function(e){N(n,!1,e)},handleRemoteJsep:function(e){z(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ontrackmuted:e.ontrackmuted,ontrackunmuted:e.ontrackunmuted,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){Q(n,!0===e)},detach:function(e){B(n,e)}};k[n]=r,e.success(r)},c["session_id"]=_,void n.send(JSON.stringify(c));a.httpAPICall(l+"/"+_,{verb:"POST",withCredentials:v,body:c,success:function(t){if(a.debug(t),"success"!==t["janus"])return a.error("Ooops: "+t["error"].code+" "+t["error"].reason),void e.error("Ooops: "+t["error"].code+" "+t["error"].reason);var n=t.data["id"];a.log("Created handle: "+n);var r={session:S,plugin:i,id:n,token:o,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return i},getVolume:function(){return q(n,!0)},getRemoteVolume:function(){return q(n,!0)},getLocalVolume:function(){return q(n,!1)},isAudioMuted:function(){return G(n,!1)},muteAudio:function(){return H(n,!1,!0)},unmuteAudio:function(){return H(n,!1,!1)},isVideoMuted:function(){return G(n,!0)},muteVideo:function(){return H(n,!0,!0)},unmuteVideo:function(){return H(n,!0,!1)},getBitrate:function(){return J(n)},send:function(e){I(n,e)},data:function(e){L(n,e)},dtmf:function(e){M(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){N(n,!0,e)},createAnswer:function(e){N(n,!1,e)},handleRemoteJsep:function(e){z(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ontrackmuted:e.ontrackmuted,ontrackunmuted:e.ontrackunmuted,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){Q(n,!0===e)},detach:function(e){B(n,e)}};k[n]=r,e.success(r)},error:function(e,t){a.error(e+":",t)}})}function I(e,i){if(i=i||{},i.success="function"==typeof i.success?i.success:a.noop,i.error="function"==typeof i.error?i.error:a.noop,!C)return a.warn("Is the server down? (connected=false)"),void i.error("Is the server down? (connected=false)");var r=k[e];if(null===r||void 0===r||null===r.webrtcStuff||void 0===r.webrtcStuff)return a.warn("Invalid handle"),void i.error("Invalid handle");var o=i.message,s=i.jsep,c=a.randomString(12),d={janus:"message",body:o,transaction:c};if(null!==r.token&&void 0!==r.token&&(d["token"]=r.token),null!==h&&void 0!==h&&(d["apisecret"]=h),null!==s&&void 0!==s&&(d.jsep=s),a.debug("Sending message to plugin (handle="+e+"):"),a.debug(d),t)return d["session_id"]=_,d["handle_id"]=e,A[c]=function(e){if(a.debug("Message sent!"),a.debug(e),"success"===e["janus"]){var t=e["plugindata"];if(void 0===t||null===t)return a.warn("Request succeeded, but missing plugindata..."),void i.success();a.log("Synchronous transaction successful ("+t["plugin"]+")");var n=t["data"];return a.debug(n),void i.success(n)}"ack"===e["janus"]?i.success():void 0!==e["error"]&&null!==e["error"]?(a.error("Ooops: "+e["error"].code+" "+e["error"].reason),i.error(e["error"].code+" "+e["error"].reason)):(a.error("Unknown error"),i.error("Unknown error"))},void n.send(JSON.stringify(d));a.httpAPICall(l+"/"+_+"/"+e,{verb:"POST",withCredentials:v,body:d,success:function(e){if(a.debug("Message sent!"),a.debug(e),"success"===e["janus"]){var t=e["plugindata"];if(void 0===t||null===t)return a.warn("Request succeeded, but missing plugindata..."),void i.success();a.log("Synchronous transaction successful ("+t["plugin"]+")");var n=t["data"];return a.debug(n),void i.success(n)}"ack"===e["janus"]?i.success():void 0!==e["error"]&&null!==e["error"]?(a.error("Ooops: "+e["error"].code+" "+e["error"].reason),i.error(e["error"].code+" "+e["error"].reason)):(a.error("Unknown error"),i.error("Unknown error"))},error:function(e,t){a.error(e+":",t),i.error(e+": "+t)}})}function R(e,i){if(C){var r=k[e];if(null!==r&&void 0!==r&&null!==r.webrtcStuff&&void 0!==r.webrtcStuff){var o={janus:"trickle",candidate:i,transaction:a.randomString(12)};if(null!==r.token&&void 0!==r.token&&(o["token"]=r.token),null!==h&&void 0!==h&&(o["apisecret"]=h),a.vdebug("Sending trickle candidate (handle="+e+"):"),a.vdebug(o),t)return o["session_id"]=_,o["handle_id"]=e,void n.send(JSON.stringify(o));a.httpAPICall(l+"/"+_+"/"+e,{verb:"POST",withCredentials:v,body:o,success:function(e){a.vdebug("Candidate sent!"),a.vdebug(e),"ack"===e["janus"]||a.error("Ooops: "+e["error"].code+" "+e["error"].reason)},error:function(e,t){a.error(e+":",t)}})}else a.warn("Invalid handle")}else a.warn("Is the server down? (connected=false)")}function F(e,t,n,i){var r=k[e];if(null!==r&&void 0!==r&&null!==r.webrtcStuff&&void 0!==r.webrtcStuff){var o=r.webrtcStuff;if(o.pc){var s=function(e){var t=e.target.label;r.ondata(e.data,t)},c=function(e){a.log("Received state change on data channel:",e);var t=e.target.label,n=o.dataChannel[t]?o.dataChannel[t].readyState:"null";if(a.log("State change on <"+t+"> data channel: "+n),"open"===n){if(o.dataChannel[t].pending&&o.dataChannel[t].pending.length>0){for(var i in a.log("Sending pending messages on <"+t+">:",o.dataChannel[t].pending.length),o.dataChannel[t].pending){var s=o.dataChannel[t].pending[i];a.log("Sending string on data channel <"+t+">: "+s),o.dataChannel[t].send(s)}o.dataChannel[t].pending=[]}r.ondataopen(t)}},l=function(e){a.error("Got error on data channel:",e)};o.dataChannel[t]=n||o.pc.createDataChannel(t,{ordered:!1}),o.dataChannel[t].onmessage=s,o.dataChannel[t].onopen=c,o.dataChannel[t].onclose=c,o.dataChannel[t].onerror=l,o.dataChannel[t].pending=[],i&&o.dataChannel[t].pending.push(i)}else a.warn("Invalid PeerConnection")}else a.warn("Invalid handle")}function L(e,t){t=t||{},t.success="function"==typeof t.success?t.success:a.noop,t.error="function"==typeof t.error?t.error:a.noop;var n=k[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return a.warn("Invalid handle"),void t.error("Invalid handle");var i=n.webrtcStuff,r=t.text;if(null===r||void 0===r)return a.warn("Invalid text"),void t.error("Invalid text");var o=t.label?t.label:a.dataChanDefaultLabel;return i.dataChannel[o]?"open"!==i.dataChannel[o].readyState?(i.dataChannel[o].pending.push(r),void t.success()):(a.log("Sending string on data channel <"+o+">: "+r),i.dataChannel[o].send(r),void t.success()):(F(e,o,!1,r),void t.success())}function M(e,t){t=t||{},t.success="function"==typeof t.success?t.success:a.noop,t.error="function"==typeof t.error?t.error:a.noop;var n=k[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return a.warn("Invalid handle"),void t.error("Invalid handle");var i=n.webrtcStuff;if(null===i.dtmfSender||void 0===i.dtmfSender){if(void 0!==i.pc&&null!==i.pc){var r=i.pc.getSenders(),o=r.find((function(e){return e.track&&"audio"===e.track.kind}));if(!o)return a.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");i.dtmfSender=o.dtmf,i.dtmfSender&&(a.log("Created DTMF Sender"),i.dtmfSender.ontonechange=function(e){a.debug("Sent DTMF tone: "+e.tone)})}if(null===i.dtmfSender||void 0===i.dtmfSender)return a.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}var s=t.dtmf;if(null===s||void 0===s)return a.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");var c=s.tones;if(null===c||void 0===c)return a.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");var l=s.duration;null!==l&&void 0!==l||(l=500);var d=s.gap;null!==d&&void 0!==d||(d=50),a.debug("Sending DTMF string "+c+" (duration "+l+"ms, gap "+d+"ms)"),i.dtmfSender.insertDTMF(c,l,d),t.success()}function B(e,i){i=i||{},i.success="function"==typeof i.success?i.success:a.noop,i.error="function"==typeof i.error?i.error:a.noop;var r=!0;void 0!==i.asyncRequest&&null!==i.asyncRequest&&(r=!0===i.asyncRequest);var o=!0;void 0!==i.noRequest&&null!==i.noRequest&&(o=!0===i.noRequest),a.log("Destroying handle "+e+" (async="+r+")"),Q(e);var s=k[e];if(null===s||void 0===s||s.detached)return delete k[e],void i.success();if(o)return delete k[e],void i.success();if(!C)return a.warn("Is the server down? (connected=false)"),void i.error("Is the server down? (connected=false)");var c={janus:"detach",transaction:a.randomString(12)};if(null!==s.token&&void 0!==s.token&&(c["token"]=s.token),null!==h&&void 0!==h&&(c["apisecret"]=h),t)return c["session_id"]=_,c["handle_id"]=e,n.send(JSON.stringify(c)),delete k[e],void i.success();a.httpAPICall(l+"/"+_+"/"+e,{verb:"POST",async:r,withCredentials:v,body:c,success:function(t){a.log("Destroyed handle:"),a.debug(t),"success"!==t["janus"]&&a.error("Ooops: "+t["error"].code+" "+t["error"].reason),delete k[e],i.success()},error:function(t,n){a.error(t+":",n),delete k[e],i.success()}})}function V(e,t,n,r,o){var s=k[e];if(null===s||void 0===s||null===s.webrtcStuff||void 0===s.webrtcStuff)return a.warn("Invalid handle"),void r.error("Invalid handle");var c=s.webrtcStuff;a.debug("streamsDone:",o),o&&(a.debug("  -- Audio tracks:",o.getAudioTracks()),a.debug("  -- Video tracks:",o.getVideoTracks()));var l=!1;if(c.myStream&&n.update&&!c.streamExternal){if((!n.update&&X(n)||n.update&&(n.addAudio||n.replaceAudio))&&o.getAudioTracks()&&o.getAudioTracks().length)if(c.myStream.addTrack(o.getAudioTracks()[0]),a.unifiedPlan){a.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",o.getAudioTracks()[0]);var v=null,m=c.pc.getTransceivers();if(m&&m.length>0)for(var g in m){var h=m[g];if(h.sender&&h.sender.track&&"audio"===h.sender.track.kind||h.receiver&&h.receiver.track&&"audio"===h.receiver.track.kind){v=h;break}}v&&v.sender?v.sender.replaceTrack(o.getAudioTracks()[0]):c.pc.addTrack(o.getAudioTracks()[0],o)}else a.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",o.getAudioTracks()[0]),c.pc.addTrack(o.getAudioTracks()[0],o);if((!n.update&&te(n)||n.update&&(n.addVideo||n.replaceVideo))&&o.getVideoTracks()&&o.getVideoTracks().length)if(c.myStream.addTrack(o.getVideoTracks()[0]),a.unifiedPlan){a.log((n.replaceVideo?"Replacing":"Adding")+" video track:",o.getVideoTracks()[0]);var b=null;m=c.pc.getTransceivers();if(m&&m.length>0)for(var g in m){h=m[g];if(h.sender&&h.sender.track&&"video"===h.sender.track.kind||h.receiver&&h.receiver.track&&"video"===h.receiver.track.kind){b=h;break}}b&&b.sender?b.sender.replaceTrack(o.getVideoTracks()[0]):c.pc.addTrack(o.getVideoTracks()[0],o)}else a.log((n.replaceVideo?"Replacing":"Adding")+" video track:",o.getVideoTracks()[0]),c.pc.addTrack(o.getVideoTracks()[0],o)}else c.myStream=o,l=!0;if(!c.pc){var w={iceServers:d,iceTransportPolicy:u,bundlePolicy:p};"chrome"===a.webRTCAdapter.browserDetails.browser&&(w["sdpSemantics"]=a.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var C={optional:[{DtlsSrtpKeyAgreement:!0}]};if(!0===f&&C.optional.push({googIPv6:!0}),r.rtcConstraints&&"object"===Object(i["a"])(r.rtcConstraints))for(var g in a.debug("Adding custom PeerConnection constraints:",r.rtcConstraints),r.rtcConstraints)C.optional.push(r.rtcConstraints[g]);"edge"===a.webRTCAdapter.browserDetails.browser&&(w.bundlePolicy="max-bundle"),a.log("Creating PeerConnection"),a.debug(C),c.pc=new RTCPeerConnection(w,C),a.debug(c.pc),c.pc.getStats&&(c.volume={},c.bitrate.value="0 kbits/sec"),a.log("Preparing local SDP and gathering candidates (trickle="+c.trickle+")"),c.pc.oniceconnectionstatechange=function(e){c.pc&&s.iceState(c.pc.iceConnectionState)},c.pc.onicecandidate=function(t){if(null==t.candidate||"edge"===a.webRTCAdapter.browserDetails.browser&&t.candidate.candidate.indexOf("endOfCandidates")>0)a.log("End of candidates."),c.iceDone=!0,!0===c.trickle?R(e,{completed:!0}):U(e,r);else{var n={candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex};!0===c.trickle&&R(e,n)}},c.pc.ontrack=function(e){a.log("Handling Remote Track"),a.debug(e),e.streams&&(c.remoteStream=e.streams[0],s.onremotestream(c.remoteStream),e.track.onended||(a.log("Adding onended callback to track:",e.track),e.track.onended=function(e){a.log("Remote track muted/removed:",e),c.remoteStream&&(c.remoteStream.removeTrack(e.target),s.onremotestream(c.remoteStream))},e.track.onmute=function(t){s.ontrackmuted(),e.track.onended(t)},e.track.onunmute=function(e){a.log("Remote track flowing again:",e);try{c.remoteStream.addTrack(e.target),s.onremotestream(c.remoteStream),s.ontrackunmuted()}catch(t){a.error(t)}}))}}if(l&&null!==o&&void 0!==o){a.log("Adding local stream");var _=!0===r.simulcast2;o.getTracks().forEach((function(e){if(a.log("Adding local track:",e),_)if("audio"===e.kind)c.pc.addTrack(e,o);else{a.log("Enabling rid-based simulcasting:",e);var t=y(r.simulcastMaxBitrates);c.pc.addTransceiver(e,{direction:"sendrecv",streams:[o],sendEncodings:[{rid:"h",active:!0,maxBitrate:t.high},{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:t.low,scaleResolutionDownBy:4}]})}else c.pc.addTrack(e,o)}))}if(ae(n)&&!c.dataChannel[a.dataChanDefaultLabel]&&(a.log("Creating data channel"),F(e,a.dataChanDefaultLabel,!1),c.pc.ondatachannel=function(t){a.log("Data channel created by Janus:",t),F(e,t.channel.label,t.channel)}),c.myStream&&s.onlocalstream(c.myStream),null===t||void 0===t)W(e,n,r);else{var S=t["sdp"],x=/420029/gi,A=S.replace(x,"42e01f");a.log(A),t["sdp"]=A,c.pc.setRemoteDescription(t).then((function(){if(a.log("Remote description accepted!"),c.remoteSdp=t.sdp,c.candidates&&c.candidates.length>0){for(var i=0;i<c.candidates.length;i++){var o=c.candidates[i];a.debug("Adding remote candidate:",o),o&&!0!==o.completed?c.pc.addIceCandidate(o):c.pc.addIceCandidate(a.endOfCandidates)}c.candidates=[]}$(e,n,r)}),r.error)}}function N(e,t,n){n=n||{},n.success="function"==typeof n.success?n.success:a.noop,n.error="function"==typeof n.error?n.error:Z;var r=n.jsep;if(t&&r)return a.error("Provided a JSEP to a createOffer"),void n.error("Provided a JSEP to a createOffer");if(!t&&(!r||!r.type||!r.sdp))return a.error("A valid JSEP is required for createAnswer"),void n.error("A valid JSEP is required for createAnswer");n.media=n.media||{audio:!0,video:!0};var o=n.media,s=k[e];if(null===s||void 0===s||null===s.webrtcStuff||void 0===s.webrtcStuff)return a.warn("Invalid handle"),void n.error("Invalid handle");var c=s.webrtcStuff;if(c.trickle=oe(n.trickle),void 0===c.pc||null===c.pc)o.update=!1,o.keepAudio=!1,o.keepVideo=!1;else if(void 0!==c.pc&&null!==c.pc){if(a.log("Updating existing media session"),o.update=!0,null!==n.stream&&void 0!==n.stream)n.stream!==c.myStream&&a.log("Renegotiation involves a new external stream");else{if(o.addAudio){if(o.keepAudio=!1,o.replaceAudio=!1,o.removeAudio=!1,o.audioSend=!0,c.myStream&&c.myStream.getAudioTracks()&&c.myStream.getAudioTracks().length)return a.error("Can't add audio stream, there already is one"),void n.error("Can't add audio stream, there already is one")}else o.removeAudio?(o.keepAudio=!1,o.replaceAudio=!1,o.addAudio=!1,o.audioSend=!1):o.replaceAudio&&(o.keepAudio=!1,o.addAudio=!1,o.removeAudio=!1,o.audioSend=!0);if(null===c.myStream||void 0===c.myStream?(o.replaceAudio&&(o.keepAudio=!1,o.replaceAudio=!1,o.addAudio=!0,o.audioSend=!0),X(o)&&(o.keepAudio=!1,o.addAudio=!0)):null===c.myStream.getAudioTracks()||void 0===c.myStream.getAudioTracks()||0===c.myStream.getAudioTracks().length?(o.replaceAudio&&(o.keepAudio=!1,o.replaceAudio=!1,o.addAudio=!0,o.audioSend=!0),X(o)&&(o.keepVideo=!1,o.addAudio=!0)):!X(o)||o.removeAudio||o.replaceAudio||(o.keepAudio=!0),o.addVideo){if(o.keepVideo=!1,o.replaceVideo=!1,o.removeVideo=!1,o.videoSend=!0,c.myStream&&c.myStream.getVideoTracks()&&c.myStream.getVideoTracks().length)return a.error("Can't add video stream, there already is one"),void n.error("Can't add video stream, there already is one")}else o.removeVideo?(o.keepVideo=!1,o.replaceVideo=!1,o.addVideo=!1,o.videoSend=!1):o.replaceVideo&&(o.keepVideo=!1,o.addVideo=!1,o.removeVideo=!1,o.videoSend=!0);null===c.myStream||void 0===c.myStream||null===c.myStream.getVideoTracks()||void 0===c.myStream.getVideoTracks()||0===c.myStream.getVideoTracks().length?(o.replaceVideo&&(o.keepVideo=!1,o.replaceVideo=!1,o.addVideo=!0,o.videoSend=!0),te(o)&&(o.keepVideo=!1,o.addVideo=!0)):!te(o)||o.removeVideo||o.replaceVideo||(o.keepVideo=!0),o.addData&&(o.data=!0)}if(X(o)&&o.keepAudio&&te(o)&&o.keepVideo)return s.consentDialog(!1),void V(e,r,o,n,c.myStream)}if(o.update&&!c.streamExternal){if(o.removeAudio||o.replaceAudio){if(c.myStream&&c.myStream.getAudioTracks()&&c.myStream.getAudioTracks().length){var l=c.myStream.getAudioTracks()[0];a.log("Removing audio track:",l),c.myStream.removeTrack(l);try{l.stop()}catch(P){}}if(c.pc.getSenders()&&c.pc.getSenders().length){var d=!0;if(o.replaceAudio&&a.unifiedPlan&&(d=!1),d)for(var u in c.pc.getSenders()){l=c.pc.getSenders()[u];l&&l.track&&"audio"===l.track.kind&&(a.log("Removing audio sender:",l),c.pc.removeTrack(l))}}}if(o.removeVideo||o.replaceVideo){if(c.myStream&&c.myStream.getVideoTracks()&&c.myStream.getVideoTracks().length){l=c.myStream.getVideoTracks()[0];a.log("Removing video track:",l),c.myStream.removeTrack(l);try{l.stop()}catch(P){}}if(c.pc.getSenders()&&c.pc.getSenders().length){var p=!0;if(o.replaceVideo&&a.unifiedPlan&&(p=!1),p)for(var u in c.pc.getSenders()){l=c.pc.getSenders()[u];l&&l.track&&"video"===l.track.kind&&(a.log("Removing video sender:",l),c.pc.removeTrack(l))}}}}if(null!==n.stream&&void 0!==n.stream){var f=n.stream;if(a.log("MediaStream provided by the application"),a.debug(f),o.update&&c.myStream&&c.myStream!==n.stream&&!c.streamExternal){try{var v=c.myStream.getTracks();for(var m in v){var g=v[m];a.log(g),null!==g&&void 0!==g&&g.stop()}}catch(P){}c.myStream=null}return c.streamExternal=!0,s.consentDialog(!1),void V(e,r,o,n,f)}if(X(o)||te(o)){if(!a.isGetUserMediaAvailable())return void n.error("getUserMedia not available");var h={mandatory:{},optional:[]};s.consentDialog(!0);var b=X(o);!0===b&&void 0!=o&&null!=o&&"object"===Object(i["a"])(o.audio)&&(b=o.audio);var w=te(o);if(!0===w&&void 0!=o&&null!=o){var y=!0===n.simulcast,C=!0===n.simulcast2;if(!y&&!C||r||void 0!==o.video&&!1!==o.video||(o.video="hires"),o.video&&"screen"!=o.video&&"window"!=o.video)if("object"===Object(i["a"])(o.video))w=o.video;else{var _=0,S=0;"lowres"===o.video?(S=240,240,_=320):"lowres-16:9"===o.video?(S=180,180,_=320):"hires"===o.video||"hires-16:9"===o.video||"hdres"===o.video?(S=720,720,_=1280):"fhdres"===o.video?(S=1080,1080,_=1920):"4kres"===o.video?(S=2160,2160,_=3840):"stdres"===o.video?(S=480,480,_=640):"stdres-16:9"===o.video?(S=360,360,_=640):(a.log("Default video setting is stdres 4:3"),S=480,480,_=640),a.log("Adding media constraint:",o.video),w={height:{ideal:S},width:{ideal:_}},a.log("Adding video constraint:",w)}else if("screen"===o.video||"window"===o.video){if(o.screenshareFrameRate||(o.screenshareFrameRate=3),navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return void navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(t){s.consentDialog(!1),X(o)&&!o.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(i){t.addTrack(i.getAudioTracks()[0]),V(e,r,o,n,t)})):V(e,r,o,n,t)}),(function(e){s.consentDialog(!1),n.error(e)}));function x(t,i){s.consentDialog(!1),t?n.error(t):V(e,r,o,n,i)}function A(e,t,n){a.log("Adding media constraint (screen capture)"),a.debug(e),navigator.mediaDevices.getUserMedia(e).then((function(e){n?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(n){e.addTrack(n.getAudioTracks()[0]),t(null,e)})):t(null,e)})).catch((function(e){s.consentDialog(!1),t(e)}))}if("chrome"===a.webRTCAdapter.browserDetails.browser){var T=a.webRTCAdapter.browserDetails.version,O=33;window.navigator.userAgent.match("Linux")&&(O=35),T>=26&&T<=O?(h={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:o.screenshareFrameRate,maxFrameRate:o.screenshareFrameRate,chromeMediaSource:"screen"}},audio:X(o)&&!o.keepAudio},A(h,x)):a.extension.getScreen((function(e,t){if(e)return s.consentDialog(!1),n.error(e);h={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:o.screenshareFrameRate,maxFrameRate:o.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},h.video.mandatory.chromeMediaSourceId=t,A(h,x,X(o)&&!o.keepAudio)}))}else if("firefox"===a.webRTCAdapter.browserDetails.browser){if(!(a.webRTCAdapter.browserDetails.version>=33)){var D=new Error("NavigatorUserMediaError");return D.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",s.consentDialog(!1),void n.error(D)}h={video:{mozMediaSource:o.video,mediaSource:o.video},audio:X(o)&&!o.keepAudio},A(h,(function(e,t){if(x(e,t),!e)var n=t.currentTime,i=window.setInterval((function(){t||window.clearInterval(i),t.currentTime==n&&(window.clearInterval(i),t.onended&&t.onended()),n=t.currentTime}),500)}))}return}}null!==o&&void 0!==o&&"screen"===o.video||navigator.mediaDevices.enumerateDevices().then((function(t){var i=t.some((function(e){return"audioinput"===e.kind})),c=re(o)||t.some((function(e){return"videoinput"===e.kind})),l=X(o),d=te(o),u=K(o),p=ne(o);if(l||d||u||p){var v=!!l&&i,m=!!d&&c;if(!v&&!m)return s.consentDialog(!1),n.error("No capture device found"),!1;if(!v&&u)return s.consentDialog(!1),n.error("Audio capture is required, but no capture device found"),!1;if(!m&&p)return s.consentDialog(!1),n.error("Video capture is required, but no capture device found"),!1}var g={audio:!(!i||o.keepAudio)&&b,video:!(!c||o.keepVideo)&&w};a.debug("getUserMedia constraints",g),g.audio||g.video?navigator.mediaDevices.getUserMedia(g).then((function(t){s.consentDialog(!1),V(e,r,o,n,t)})).catch((function(e){s.consentDialog(!1),n.error({code:e.code,name:e.name,message:e.message})})):(s.consentDialog(!1),V(e,r,o,n,f))})).catch((function(e){s.consentDialog(!1),n.error("enumerateDevices error",e)}))}else V(e,r,o,n)}function z(e,t){t=t||{},t.success="function"==typeof t.success?t.success:a.noop,t.error="function"==typeof t.error?t.error:Z;var n=t.jsep,i=k[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return a.warn("Invalid handle"),void t.error("Invalid handle");var r=i.webrtcStuff;if(void 0!==n&&null!==n){if(null===r.pc)return a.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");r.pc.setRemoteDescription(n).then((function(){if(a.log("Remote description accepted!"),r.remoteSdp=n.sdp,r.candidates&&r.candidates.length>0){for(var e=0;e<r.candidates.length;e++){var i=r.candidates[e];a.debug("Adding remote candidate:",i),i&&!0!==i.completed?r.pc.addIceCandidate(i):r.pc.addIceCandidate(a.endOfCandidates)}r.candidates=[]}t.success()}),t.error)}else t.error("Invalid JSEP")}function W(e,t,n){n=n||{},n.success="function"==typeof n.success?n.success:a.noop,n.error="function"==typeof n.error?n.error:a.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:a.noop;var i=k[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return a.warn("Invalid handle"),void n.error("Invalid handle");var r=i.webrtcStuff,o=!0===n.simulcast;o?a.log("Creating offer (iceDone="+r.iceDone+", simulcast="+o+")"):a.log("Creating offer (iceDone="+r.iceDone+")");var s={};if(a.unifiedPlan){var c=null,l=null,d=r.pc.getTransceivers();if(d&&d.length>0)for(var u in d){var p=d[u];p.sender&&p.sender.track&&"audio"===p.sender.track.kind||p.receiver&&p.receiver.track&&"audio"===p.receiver.track.kind?c||(c=p):(p.sender&&p.sender.track&&"video"===p.sender.track.kind||p.receiver&&p.receiver.track&&"video"===p.receiver.track.kind)&&(l||(l=p))}var f=X(t),v=ee(t);f||v?f&&v?c&&(c.setDirection?c.setDirection("sendrecv"):c.direction="sendrecv",a.log("Setting audio transceiver to sendrecv:",c)):f&&!v?c&&(c.setDirection?c.setDirection("sendonly"):c.direction="sendonly",a.log("Setting audio transceiver to sendonly:",c)):!f&&v&&(c?(c.setDirection?c.setDirection("recvonly"):c.direction="recvonly",a.log("Setting audio transceiver to recvonly:",c)):(c=r.pc.addTransceiver("audio",{direction:"recvonly"}),a.log("Adding recvonly audio transceiver:",c))):t.removeAudio&&c&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive",a.log("Setting audio transceiver to inactive:",c));var m=te(t),g=ie(t);m||g?m&&g?l&&(l.setDirection?l.setDirection("sendrecv"):l.direction="sendrecv",a.log("Setting video transceiver to sendrecv:",l)):m&&!g?l&&(l.setDirection?l.setDirection("sendonly"):l.direction="sendonly",a.log("Setting video transceiver to sendonly:",l)):!m&&g&&(l?(l.setDirection?l.setDirection("recvonly"):l.direction="recvonly",a.log("Setting video transceiver to recvonly:",l)):(l=r.pc.addTransceiver("video",{direction:"recvonly"}),a.log("Adding recvonly video transceiver:",l))):t.removeVideo&&l&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive",a.log("Setting video transceiver to inactive:",l))}else s["offerToReceiveAudio"]=ee(t),s["offerToReceiveVideo"]=ie(t);var h=!0===n.iceRestart;h&&(s["iceRestart"]=!0),a.debug(s);var b=te(t);if(b&&o&&"firefox"===a.webRTCAdapter.browserDetails.browser){a.log("Enabling Simulcasting for Firefox (RID)");var w=r.pc.getSenders().find((function(e){return"video"==e.track.kind}));if(w){var C=w.getParameters();C||(C={});var _=y(n.simulcastMaxBitrates);C.encodings=[{rid:"h",active:!0,maxBitrate:_.high},{rid:"m",active:!0,maxBitrate:_.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:_.low,scaleResolutionDownBy:4}],w.setParameters(C)}}r.pc.createOffer(s).then((function(e){a.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,a.log("Setting local description"),b&&o&&("chrome"===a.webRTCAdapter.browserDetails.browser||"safari"===a.webRTCAdapter.browserDetails.browser?(a.log("Enabling Simulcasting for Chrome (SDP munging)"),e.sdp=Y(e.sdp)):"firefox"!==a.webRTCAdapter.browserDetails.browser&&a.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),r.mySdp=e.sdp,r.pc.setLocalDescription(e).catch(n.error),r.mediaConstraints=s,r.iceDone||r.trickle?(a.log("Offer ready"),a.debug(n),n.success(e)):a.log("Waiting for all candidates...")}),n.error)}function $(e,t,n){n=n||{},n.success="function"==typeof n.success?n.success:a.noop,n.error="function"==typeof n.error?n.error:a.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:a.noop;var i=k[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return a.warn("Invalid handle"),void n.error("Invalid handle");var r=i.webrtcStuff,o=!0===n.simulcast;o?a.log("Creating answer (iceDone="+r.iceDone+", simulcast="+o+")"):a.log("Creating answer (iceDone="+r.iceDone+")");var s=null;if(a.unifiedPlan){s={};var c=null,l=null,d=r.pc.getTransceivers();if(d&&d.length>0)for(var u in d){var p=d[u];p.sender&&p.sender.track&&"audio"===p.sender.track.kind||p.receiver&&p.receiver.track&&"audio"===p.receiver.track.kind?c||(c=p):(p.sender&&p.sender.track&&"video"===p.sender.track.kind||p.receiver&&p.receiver.track&&"video"===p.receiver.track.kind)&&(l||(l=p))}var f=X(t),v=ee(t);if(f||v){if(f&&v){if(c)try{c.setDirection?c.setDirection("sendrecv"):c.direction="sendrecv",a.log("Setting audio transceiver to sendrecv:",c)}catch(_){a.error(_)}}else if(f&&!v)try{c&&(c.setDirection?c.setDirection("sendonly"):c.direction="sendonly",a.log("Setting audio transceiver to sendonly:",c))}catch(_){a.error(_)}else if(!f&&v)if(c)try{c.setDirection?c.setDirection("recvonly"):c.direction="recvonly",a.log("Setting audio transceiver to recvonly:",c)}catch(_){a.error(_)}else c=r.pc.addTransceiver("audio",{direction:"recvonly"}),a.log("Adding recvonly audio transceiver:",c)}else if(t.removeAudio&&c)try{c.setDirection?c.setDirection("inactive"):c.direction="inactive",a.log("Setting audio transceiver to inactive:",c)}catch(_){a.error(_)}var m=te(t),g=ie(t);if(m||g){if(m&&g){if(l)try{l.setDirection?l.setDirection("sendrecv"):l.direction="sendrecv",a.log("Setting video transceiver to sendrecv:",l)}catch(_){a.error(_)}}else if(m&&!g){if(l)try{l.setDirection?l.setDirection("sendonly"):l.direction="sendonly",a.log("Setting video transceiver to sendonly:",l)}catch(_){a.error(_)}}else if(!m&&g)if(l)try{l.setDirection?l.setDirection("recvonly"):l.direction="recvonly",a.log("Setting video transceiver to recvonly:",l)}catch(_){a.error(_)}else l=r.pc.addTransceiver("video",{direction:"recvonly"}),a.log("Adding recvonly video transceiver:",l)}else if(t.removeVideo&&l)try{l.setDirection?l.setDirection("inactive"):l.direction="inactive",a.log("Setting video transceiver to inactive:",l)}catch(_){a.error(_)}}else s="firefox"==a.webRTCAdapter.browserDetails.browser||"edge"==a.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:ee(t),offerToReceiveVideo:ie(t)}:{mandatory:{OfferToReceiveAudio:ee(t),OfferToReceiveVideo:ie(t)}};a.debug(s);var h=te(t);if(h&&o&&"firefox"===a.webRTCAdapter.browserDetails.browser){a.log("Enabling Simulcasting for Firefox (RID)");var b=r.pc.getSenders()[1];a.log(b);var w=b.getParameters();a.log(w);var C=y(n.simulcastMaxBitrates);b.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:C.high},{rid:"medium",active:!0,priority:"medium",maxBitrate:C.medium},{rid:"low",active:!0,priority:"low",maxBitrate:C.low}]})}r.pc.createAnswer(s).then((function(e){a.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,a.log("Setting local description"),h&&o&&("chrome"===a.webRTCAdapter.browserDetails.browser?a.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):"firefox"!==a.webRTCAdapter.browserDetails.browser&&a.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),r.mySdp=e.sdp,r.pc.setLocalDescription(e).catch(n.error),r.mediaConstraints=s,r.iceDone||r.trickle?n.success(e):a.log("Waiting for all candidates...")}),n.error)}function U(e,t){t=t||{},t.success="function"==typeof t.success?t.success:a.noop,t.error="function"==typeof t.error?t.error:a.noop;var n=k[e];if(null!==n&&void 0!==n&&null!==n.webrtcStuff&&void 0!==n.webrtcStuff){var i=n.webrtcStuff;a.log("Sending offer/answer SDP..."),null!==i.mySdp&&void 0!==i.mySdp?(i.mySdp={type:i.pc.localDescription.type,sdp:i.pc.localDescription.sdp},!1===i.trickle&&(i.mySdp["trickle"]=!1),a.debug(t),i.sdpSent=!0,t.success(i.mySdp)):a.warn("Local SDP instance is invalid, not sending anything...")}else a.warn("Invalid handle, not sending anything")}function q(e,t){var n=k[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return a.warn("Invalid handle"),0;var i=t?"remote":"local",r=n.webrtcStuff;return r.volume[i]||(r.volume[i]={value:0}),r.pc.getStats&&"chrome"===a.webRTCAdapter.browserDetails.browser?!t||null!==r.remoteStream&&void 0!==r.remoteStream?t||null!==r.myStream&&void 0!==r.myStream?null===r.volume[i].timer||void 0===r.volume[i].timer?(a.log("Starting "+i+" volume monitor"),r.volume[i].timer=setInterval((function(){r.pc.getStats((function(e){for(var n=e.result(),a=0;a<n.length;a++){var o=n[a];"ssrc"==o.type&&(t&&o.stat("audioOutputLevel")?r.volume[i].value=parseInt(o.stat("audioOutputLevel")):!t&&o.stat("audioInputLevel")&&(r.volume[i].value=parseInt(o.stat("audioInputLevel"))))}}))}),200),0):r.volume[i].value:(a.warn("Local stream unavailable"),0):(a.warn("Remote stream unavailable"),0):(a.warn("Getting the "+i+" volume unsupported by browser"),0)}function G(e,t){var n=k[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return a.warn("Invalid handle"),!0;var i=n.webrtcStuff;return null===i.pc||void 0===i.pc?(a.warn("Invalid PeerConnection"),!0):void 0===i.myStream||null===i.myStream?(a.warn("Invalid local MediaStream"),!0):t?null===i.myStream.getVideoTracks()||void 0===i.myStream.getVideoTracks()||0===i.myStream.getVideoTracks().length?(a.warn("No video track"),!0):!i.myStream.getVideoTracks()[0].enabled:null===i.myStream.getAudioTracks()||void 0===i.myStream.getAudioTracks()||0===i.myStream.getAudioTracks().length?(a.warn("No audio track"),!0):!i.myStream.getAudioTracks()[0].enabled}function H(e,t,n){var i=k[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return a.warn("Invalid handle"),!1;var r=i.webrtcStuff;return null===r.pc||void 0===r.pc?(a.warn("Invalid PeerConnection"),!1):void 0===r.myStream||null===r.myStream?(a.warn("Invalid local MediaStream"),!1):t?null===r.myStream.getVideoTracks()||void 0===r.myStream.getVideoTracks()||0===r.myStream.getVideoTracks().length?(a.warn("No video track"),!1):(r.myStream.getVideoTracks()[0].enabled=!n,!0):null===r.myStream.getAudioTracks()||void 0===r.myStream.getAudioTracks()||0===r.myStream.getAudioTracks().length?(a.warn("No audio track"),!1):(r.myStream.getAudioTracks()[0].enabled=!n,!0)}function J(e){var t=k[e];if(null===t||void 0===t||null===t.webrtcStuff||void 0===t.webrtcStuff)return a.warn("Invalid handle"),"Invalid handle";var n=t.webrtcStuff;return null===n.pc||void 0===n.pc?"Invalid PeerConnection":n.pc.getStats?null===n.bitrate.timer||void 0===n.bitrate.timer?(a.log("Starting bitrate timer (via getStats)"),n.bitrate.timer=setInterval((function(){n.pc.getStats().then((function(e){e.forEach((function(e){if(e){var t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(n.bitrate.bsnow=e.bytesReceived,n.bitrate.tsnow=e.timestamp,null===n.bitrate.bsbefore||null===n.bitrate.tsbefore)n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow;else{var i=n.bitrate.tsnow-n.bitrate.tsbefore;"safari"==a.webRTCAdapter.browserDetails.browser&&(i/=1e3);var r=Math.round(8*(n.bitrate.bsnow-n.bitrate.bsbefore)/i);"safari"===a.webRTCAdapter.browserDetails.browser&&(r=parseInt(r/1e3)),n.bitrate.value=r+" kbits/sec",n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow}}}))}))}),1e3),"0 kbits/sec"):n.bitrate.value:(a.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser")}function Z(e){a.error("WebRTC error:",e)}function Q(e,i){a.log("Cleaning WebRTC stuff");var r=k[e];if(null!==r&&void 0!==r){var o=r.webrtcStuff;if(null!==o&&void 0!==o){if(!0===i){var s={janus:"hangup",transaction:a.randomString(12)};null!==r.token&&void 0!==r.token&&(s["token"]=r.token),null!==h&&void 0!==h&&(s["apisecret"]=h),a.debug("Sending hangup request (handle="+e+"):"),a.debug(s),t?(s["session_id"]=_,s["handle_id"]=e,n.send(JSON.stringify(s))):a.httpAPICall(l+"/"+_+"/"+e,{verb:"POST",withCredentials:v,body:s})}o.remoteStream=null,o.volume&&(o.volume["local"]&&o.volume["local"].timer&&clearInterval(o.volume["local"].timer),o.volume["remote"]&&o.volume["remote"].timer&&clearInterval(o.volume["remote"].timer)),o.volume={},o.bitrate.timer&&clearInterval(o.bitrate.timer),o.bitrate.timer=null,o.bitrate.bsnow=null,o.bitrate.bsbefore=null,o.bitrate.tsnow=null,o.bitrate.tsbefore=null,o.bitrate.value=null;try{if(!o.streamExternal&&null!==o.myStream&&void 0!==o.myStream){a.log("Stopping local stream tracks");var c=o.myStream.getTracks();for(var d in c){var u=c[d];a.log(u),null!==u&&void 0!==u&&u.stop()}}}catch(p){}o.streamExternal=!1,o.myStream=null;try{o.pc.close()}catch(p){}o.pc=null,o.candidates=null,o.mySdp=null,o.remoteSdp=null,o.iceDone=!1,o.dataChannel={},o.dtmfSender=null}r.oncleanup()}}function Y(e){for(var t=e.split("\r\n"),n=!1,i=[-1],r=[-1],o=null,s=null,c=null,l=null,d=-1,u=0;u<t.length;u++){var p=t[u].match(/m=(\w+) */);if(p){var f=p[1];if("video"===f){if(!(i[0]<0)){d=u;break}n=!0}else if(i[0]>-1){d=u;break}}else if(n){var v=t[u].match(/a=ssrc-group:FID (\d+) (\d+)/);if(v)i[0]=v[1],r[0]=v[2],t.splice(u,1),u--;else{if(i[0]){var m=t[u].match("a=ssrc:"+i[0]+" cname:(.+)");if(m&&(o=m[1]),m=t[u].match("a=ssrc:"+i[0]+" msid:(.+)"),m&&(s=m[1]),m=t[u].match("a=ssrc:"+i[0]+" mslabel:(.+)"),m&&(c=m[1]),m=t[u].match("a=ssrc:"+i[0]+" label:(.+)"),m&&(l=m[1]),0===t[u].indexOf("a=ssrc:"+r[0])){t.splice(u,1),u--;continue}if(0===t[u].indexOf("a=ssrc:"+i[0])){t.splice(u,1),u--;continue}}0!=t[u].length||(t.splice(u,1),u--)}}}if(i[0]<0){d=-1,n=!1;for(u=0;u<t.length;u++){p=t[u].match(/m=(\w+) */);if(p){f=p[1];if("video"===f){if(!(i[0]<0)){d=u;break}n=!0}else if(i[0]>-1){d=u;break}}else if(n){if(i[0]<0){var g=t[u].match(/a=ssrc:(\d+)/);if(g){i[0]=g[1],t.splice(u,1),u--;continue}}else{m=t[u].match("a=ssrc:"+i[0]+" cname:(.+)");if(m&&(o=m[1]),m=t[u].match("a=ssrc:"+i[0]+" msid:(.+)"),m&&(s=m[1]),m=t[u].match("a=ssrc:"+i[0]+" mslabel:(.+)"),m&&(c=m[1]),m=t[u].match("a=ssrc:"+i[0]+" label:(.+)"),m&&(l=m[1]),0===t[u].indexOf("a=ssrc:"+r[0])){t.splice(u,1),u--;continue}if(0===t[u].indexOf("a=ssrc:"+i[0])){t.splice(u,1),u--;continue}}0!=t[u].length||(t.splice(u,1),u--)}}}if(i[0]<0)return a.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),e;d<0&&(d=t.length),i[1]=Math.floor(4294967295*Math.random()),i[2]=Math.floor(4294967295*Math.random()),r[1]=Math.floor(4294967295*Math.random()),r[2]=Math.floor(4294967295*Math.random());for(u=0;u<i.length;u++)o&&(t.splice(d,0,"a=ssrc:"+i[u]+" cname:"+o),d++),s&&(t.splice(d,0,"a=ssrc:"+i[u]+" msid:"+s),d++),c&&(t.splice(d,0,"a=ssrc:"+i[u]+" mslabel:"+c),d++),l&&(t.splice(d,0,"a=ssrc:"+i[u]+" label:"+l),d++),o&&(t.splice(d,0,"a=ssrc:"+r[u]+" cname:"+o),d++),s&&(t.splice(d,0,"a=ssrc:"+r[u]+" msid:"+s),d++),c&&(t.splice(d,0,"a=ssrc:"+r[u]+" mslabel:"+c),d++),l&&(t.splice(d,0,"a=ssrc:"+r[u]+" label:"+l),d++);return t.splice(d,0,"a=ssrc-group:FID "+i[2]+" "+r[2]),t.splice(d,0,"a=ssrc-group:FID "+i[1]+" "+r[1]),t.splice(d,0,"a=ssrc-group:FID "+i[0]+" "+r[0]),t.splice(d,0,"a=ssrc-group:SIM "+i[0]+" "+i[1]+" "+i[2]),e=t.join("\r\n"),e.endsWith("\r\n")||(e+="\r\n"),e}function X(e){return a.debug("isAudioSendEnabled:",e),void 0===e||null===e||!1!==e.audio&&(void 0===e.audioSend||null===e.audioSend||!0===e.audioSend)}function K(e){return a.debug("isAudioSendRequired:",e),void 0!==e&&null!==e&&(!1!==e.audio&&!1!==e.audioSend&&(void 0!==e.failIfNoAudio&&null!==e.failIfNoAudio&&!0===e.failIfNoAudio))}function ee(e){return a.debug("isAudioRecvEnabled:",e),void 0===e||null===e||!1!==e.audio&&(void 0===e.audioRecv||null===e.audioRecv||!0===e.audioRecv)}function te(e){return a.debug("isVideoSendEnabled:",e),void 0===e||null===e||!1!==e.video&&(void 0===e.videoSend||null===e.videoSend||!0===e.videoSend)}function ne(e){return a.debug("isVideoSendRequired:",e),void 0!==e&&null!==e&&(!1!==e.video&&!1!==e.videoSend&&(void 0!==e.failIfNoVideo&&null!==e.failIfNoVideo&&!0===e.failIfNoVideo))}function ie(e){return a.debug("isVideoRecvEnabled:",e),void 0===e||null===e||!1!==e.video&&(void 0===e.videoRecv||null===e.videoRecv||!0===e.videoRecv)}function re(e){if(a.debug("isScreenSendEnabled:",e),void 0===e||null===e)return!1;if("object"!==Object(i["a"])(e.video)||"object"!==Object(i["a"])(e.video.mandatory))return!1;var t=e.video.mandatory;return t.chromeMediaSource?"desktop"===t.chromeMediaSource||"screen"===t.chromeMediaSource:t.mozMediaSource?"window"===t.mozMediaSource||"screen"===t.mozMediaSource:!!t.mediaSource&&("window"===t.mediaSource||"screen"===t.mediaSource)}function ae(e){return a.debug("isDataEnabled:",e),"edge"==a.webRTCAdapter.browserDetails.browser?(a.warn("Edge doesn't support data channels yet"),!1):void 0!==e&&null!==e&&!0===e.data}function oe(e){return a.debug("isTrickleEnabled:",e),void 0===e||null===e||!0===e}P(e),this.getServer=function(){return l},this.isConnected=function(){return C},this.reconnect=function(e){e=e||{},e.success="function"==typeof e.success?e.success:a.noop,e.error="function"==typeof e.error?e.error:a.noop,e["reconnect"]=!0,P(e)},this.getSessionId=function(){return _},this.destroy=function(e){j(e)},this.attach=function(e){E(e)}}a.useDefaultDependencies=function(t){var n=t&&t.fetch||fetch,o=t&&t.Promise||Promise,s=t&&t.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new s(e,t)},extension:t&&t.extension||r,isArray:function(e){return Array.isArray(e)},webRTCAdapter:t&&t.adapter||e,httpAPICall:function(e,t){var r={method:t.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===t.verb&&(r.headers["Content-Type"]="application/json"),void 0!==t.withCredentials&&(r.credentials=!0===t.withCredentials?"include":t.withCredentials?t.withCredentials:"omit"),void 0!==t.body&&(r.body=JSON.stringify(t.body));var s=n(e,r).catch((function(e){return o.reject({message:"Probably a network error, is the server down?",error:e})}));if(void 0!==t.timeout){var c=new o((function(e,n){var i=setTimeout((function(){return clearTimeout(i),n({message:"Request timed out",timeout:t.timeout})}),t.timeout)}));s=o.race([s,c])}return s.then((function(e){return e.ok?Object(i["a"])(t.success)===Object(i["a"])(a.noop)?e.json().then((function(e){t.success(e)})).catch((function(t){return o.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:o.reject({message:"API call failed",response:e})})).catch((function(e){Object(i["a"])(t.error)===Object(i["a"])(a.noop)&&t.error(e.message||"<< internal error >>",e)})),s}}},a.useOldDependencies=function(t){var n=t&&t.jQuery||jQuery,o=t&&t.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new o(e,t)},isArray:function(e){return n.isArray(e)},extension:t&&t.extension||r,webRTCAdapter:t&&t.adapter||e,httpAPICall:function(e,t){var r=void 0!==t.body?{contentType:"application/json",data:JSON.stringify(t.body)}:{},o=void 0!==t.withCredentials?{xhrFields:{withCredentials:t.withCredentials}}:{};return n.ajax(n.extend(r,o,{url:e,type:t.verb,cache:!1,dataType:"json",async:t.async,timeout:t.timeout,success:function(e){Object(i["a"])(t.success)===Object(i["a"])(a.noop)&&t.success(e)},error:function(e,n,r){Object(i["a"])(t.error)===Object(i["a"])(a.noop)&&t.error(n,r)}}))}}},a.noop=function(){},a.dataChanDefaultLabel="JanusDataChannel",a.endOfCandidates=null,a.init=function(e){if(e=e||{},e.callback="function"==typeof e.callback?e.callback:a.noop,!0===a.initDone)e.callback();else{if("undefined"!=typeof console&&"undefined"!=typeof console.log||(console={log:function(){}}),a.trace=a.noop,a.debug=a.noop,a.vdebug=a.noop,a.log=a.noop,a.warn=a.noop,a.error=a.noop,!0===e.debug||"all"===e.debug)a.trace=console.trace.bind(console),a.debug=console.debug.bind(console),a.vdebug=console.debug.bind(console),a.log=console.log.bind(console),a.warn=console.warn.bind(console),a.error=console.error.bind(console);else if(Array.isArray(e.debug))for(var t in e.debug){var n=e.debug[t];switch(n){case"trace":a.trace=console.trace.bind(console);break;case"debug":a.debug=console.debug.bind(console);break;case"vdebug":a.vdebug=console.debug.bind(console);break;case"log":a.log=console.log.bind(console);break;case"warn":a.warn=console.warn.bind(console);break;case"error":a.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+n+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')");break}}a.log("Initializing library");var i=e.dependencies||a.useDefaultDependencies();a.isArray=i.isArray,a.webRTCAdapter=i.webRTCAdapter,a.httpAPICall=i.httpAPICall,a.newWebSocket=i.newWebSocket,a.extension=i.extension,a.extension.init(),a.listDevices=function(e,t){e="function"==typeof e?e:a.noop,null==t&&(t={audio:!0,video:!0}),a.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(t).then((function(t){navigator.mediaDevices.enumerateDevices().then((function(n){a.debug(n),e(n);try{var i=t.getTracks();for(var r in i){var o=i[r];null!==o&&void 0!==o&&o.stop()}}catch(s){}}))})).catch((function(t){a.error(t),e([])})):(a.warn("navigator.mediaDevices unavailable"),e([]))},a.attachMediaStream=function(e,t){if("chrome"===a.webRTCAdapter.browserDetails.browser){var n=a.webRTCAdapter.browserDetails.version;n>=52?e.srcObject=t:"undefined"!==typeof e.src?e.src=URL.createObjectURL(t):a.error("Error attaching stream to element")}else e.srcObject=t},a.reattachMediaStream=function(e,t){if("chrome"===a.webRTCAdapter.browserDetails.browser){var n=a.webRTCAdapter.browserDetails.version;n>=52?e.srcObject=t.srcObject:"undefined"!==typeof e.src?e.src=t.src:a.error("Error reattaching stream to element")}else e.srcObject=t.srcObject};var r=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0,o=r?"pagehide":"beforeunload",s=window["on"+o];if(window.addEventListener(o,(function(e){for(var t in a.log("Closing window"),a.sessions)null!==a.sessions[t]&&void 0!==a.sessions[t]&&a.sessions[t].destroyOnUnload&&(a.log("Destroying session "+t),a.sessions[t].destroy({asyncRequest:!1,notifyDestroyed:!1}));s&&"function"==typeof s&&s()})),a.safariVp8=!1,"safari"===a.webRTCAdapter.browserDetails.browser&&a.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(var t in RTCRtpSender.getCapabilities("video").codecs){var c=RTCRtpSender.getCapabilities("video").codecs[t];if(c&&c.mimeType&&"video/vp8"===c.mimeType.toLowerCase()){a.safariVp8=!0;break}}a.safariVp8?a.log("This version of Safari supports VP8"):a.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var l=new RTCPeerConnection({},{});l.createOffer({offerToReceiveVideo:!0}).then((function(e){a.safariVp8=-1!==e.sdp.indexOf("VP8"),a.safariVp8?a.log("This version of Safari supports VP8"):a.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),l.close(),l=null}))}if(a.unifiedPlan=!1,"firefox"===a.webRTCAdapter.browserDetails.browser&&a.webRTCAdapter.browserDetails.version>=59)a.unifiedPlan=!0;else if("chrome"===a.webRTCAdapter.browserDetails.browser&&a.webRTCAdapter.browserDetails.version<72)a.unifiedPlan=!1;else if(window.RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype){var d=new RTCPeerConnection;try{d.addTransceiver("audio"),a.unifiedPlan=!0}catch(u){}d.close()}else a.unifiedPlan=!1;a.initDone=!0,e.callback()}},a.isWebrtcSupported=function(){return void 0!==window.RTCPeerConnection&&null!==window.RTCPeerConnection},a.isGetUserMediaAvailable=function(){return void 0!==navigator.mediaDevices&&null!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia&&null!==navigator.mediaDevices.getUserMedia},a.randomString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",i=0;i<e;i++){var r=Math.floor(Math.random()*t.length);n+=t.substring(r,r+1)}return n},t["a"]=a}).call(this,n("d093"))},c2fe:function(e,t,n){},c3c8:function(e,t,n){e.exports=n.p+"img/logo-square-inverted_christmas.png"},c902:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfiDB8PFjEcyEgxAAABWklEQVQoz22QTUtUcRTGf+f87+ukoxlzu1HTxhcMcpVRfgI3biIkddGyRbRpEy2CyJV+AhEXrty11cBPkIHYpgQ3WY6UkExQoN653dPiTjUDPmdxOOfH4eE8AgApR3hXiykbJZcdt1H8yOlSlcTpMgWGceaewlCbeGVr0araOAJAYHcG3a/fJZEYddlw6+7tifuzn3ubKDUuf1taa7zztypfcpMozp7ZI0sv6Qw3qFLQZJvXnObySReurBKm+hb7W2Ji/ydd6w8A/6Yu6i7m2lBMjVy33POgDnqB6gfd5CeMMM1FrvOAFIQjXc8OekEIb+l7DAssMc8iS8wZRqFv4msBKJXIH9NXckiHu3x0T/zBHi8qf+0B3HwHzvw56AdAAfoA2ZPmv2C/0lBedEYdM6DuoXzHMNl3k+VRl0Jq4h5zIsfuHkSco4Ao0hV9mei5GEbxCethLeja/gHQnHeKM14ANwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0xMi0zMVQxNToyMjo0OSswMTowMFrMmbgAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMTItMzFUMTU6MjI6NDkrMDE6MDArkSEEAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC"},cb3d:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"saving-in-progress":e.savingClass,"successfully-saved":e.savingDoneClass,"failed-to-save":e.savingFailedClass,"small-height":e.smallHeightClass}},[e._t("default"),e.errors&&e.errors.length>0?n("small",{staticClass:"text-danger"},[e._v(e._s(e.errorMsg))]):e._e()],2)},r=[],a=(n("a15b"),{name:"SavingAnimation",data:function(){return{savingTimeout:null,savingDoneTimeout:null}},props:{saving:{default:function(){return!1},type:Boolean},errors:{type:Array},height:{default:function(){return"normal"},type:String}},watch:{saving:function(e,t){var n=this;!t&&e?(this.clearSavingTimeout(),this.savingTimeout=setTimeout(this.clearSavingTimeout,15e3)):t&&!e&&(this.clearSavingTimeout(),this.savingDoneTimeout=setTimeout((function(){clearTimeout(n.savingDoneTimeout),n.savingDoneTimeout=null}),2e3))}},computed:{savingClass:function(){return this.saving&&this.savingTimeout},savingDoneClass:function(){return!this.saving&&this.savingDoneTimeout&&!this.errors},savingFailedClass:function(){return!this.saving&&this.savingDoneTimeout&&this.errors&&this.errors.length>0},smallHeightClass:function(){return"small"===this.height},errorMsg:function(){return this.errors.join(" ")}},methods:{clearSavingTimeout:function(){this.savingTimeout&&(clearTimeout(this.savingTimeout),this.savingTimeout=null)}}}),o=a,s=(n("471f"),n("2877")),c=Object(s["a"])(o,i,r,!1,null,"64ab9070",null);t["a"]=c.exports},cc4c:function(e,t,n){e.exports=n.p+"img/tail-spin_dark.svg"},cd51:function(e,t,n){"use strict";var i=n("b8ed"),r=n.n(i);r.a},d3a4:function(e,t,n){},e7f8:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("img",{directives:[{name:"show",rawName:"v-show",value:e.theme===e.themes.Light,expression:"theme === themes.Light"}],attrs:{src:n("72a8")("./"+e.path+"/"+e.path+"_light."+e.ext),draggable:"false",alt:e.alt}}),i("img",{directives:[{name:"show",rawName:"v-show",value:e.theme===e.themes.Dark,expression:"theme === themes.Dark"}],attrs:{src:n("72a8")("./"+e.path+"/"+e.path+"_dark."+e.ext),draggable:"false",alt:e.alt}})])},r=[],a=n("648b"),o={name:"DarkLightImage",props:{path:{type:String,required:!0},ext:{type:String,require:!0},alt:{type:String,default:""}},data:function(){return{themes:a["a"]}},computed:{theme:function(){return a["d"].value}}},s=o,c=n("2877"),l=Object(c["a"])(s,i,r,!1,null,null,null);t["a"]=l.exports},e9d2:function(e,t,n){e.exports=n.p+"img/logo_newyear.png"},ebff:function(e,t,n){e.exports=n.p+"img/plugin_wizard_websetup.png"},ed13:function(e,t,n){"use strict";var i=n("fdc8"),r=n.n(i);r.a},ef33:function(e,t,n){"use strict";var i=n("44f7"),r=n.n(i);r.a},f26c:function(e,t,n){},f357:function(e,t,n){"use strict";var i=n("f3f3"),r=n("a026"),a=n("5886"),o=n("3c33"),s=function(e,t,n){var a=document.createElement("div"),o=new r["default"]({render:function(n){return n(e,{props:t})}}).$mount(a);return r["default"].swal(Object(i["a"])(Object(i["a"])({},n),{},{customClass:{container:"dark-backdrop"},html:'<div id="replace-here">Placeholder</div>',onBeforeOpen:function(e){e.querySelector("#replace-here").replaceWith(o.$el)},onDestroy:function(){o.$destroy(),a.remove()}}))},c=function(e,t,n){return r["default"].swal(Object(i["a"])(Object(i["a"])({},n),{},{customClass:{container:"dark-backdrop"},html:'<div id="replace-here">Placeholder</div>',onBeforeOpen:function(t){t.querySelector("#replace-here").replaceWith(e)}}))},l=function(e,t){e.use(a["a"],t);var n=e.swal.mixin({title:"Are you sure?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",customClass:{container:"dark-backdrop"}}),r=e.swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3}),l=function(t,n){if(!Object(o["a"])(n,!1)){var r=Object(i["a"])(Object(i["a"])({},t),{},{position:"top-end",confirmButtonText:"Gotcha! Don't show this again."});return e.swal(r).then((function(e){e.value&&(Object(o["b"])(n,!0),console.log(e))}))}};e.prototype.$swal["openModalWithComponent"]=s,e.prototype.$swal["openModalWithElement"]=c,e.prototype.$swal["Confirm"]=n,e.prototype.$swal["Toast"]=r,e.prototype.$swal["DismissableToast"]=l};t["a"]={install:l}},fbc4:function(e,t,n){e.exports=n.p+"img/logo-square-inverted.png"},fdc8:function(e,t,n){}});
//# sourceMappingURL=printers.js.map